var BS=Object.create;var ns=Object.defineProperty;var VS=Object.getOwnPropertyDescriptor;var WS=Object.getOwnPropertyNames;var zS=Object.getPrototypeOf,KS=Object.prototype.hasOwnProperty;var $=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),XS=(n,e)=>{for(var t in e)ns(n,t,{get:e[t],enumerable:!0})},Ip=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of WS(e))!KS.call(n,i)&&i!==t&&ns(n,i,{get:()=>e[i],enumerable:!(r=VS(e,i))||r.enumerable});return n};var Be=(n,e,t)=>(t=n!=null?BS(zS(n)):{},Ip(e||!n||!n.__esModule?ns(t,"default",{value:n,enumerable:!0}):t,n)),GS=n=>Ip(ns({},"__esModule",{value:!0}),n);var ss=$(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.Event=Ir.Response=Ir.Message=void 0;var co=class{constructor(e){this.seq=0,this.type=e}};Ir.Message=co;var Yc=class extends co{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};Ir.Response=Yc;var Jc=class extends co{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};Ir.Event=Jc});var Hp=$(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.ProtocolServer=void 0;var nT=require("events"),uo=ss(),Zc=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let r;return r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},as=class n extends nT.EventEmitter{constructor(){super(),this._sendMessage=new Zc,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",r=>this._handleData(r)),e.on("close",()=>{this._emitEvent(new uo.Event("close"))}),e.on("error",r=>{this._emitEvent(new uo.Event("error","inStream error: "+(r&&r.message)))}),t.on("error",r=>{this._emitEvent(new uo.Event("error","outStream error: "+(r&&r.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,i){let o={command:e};if(t&&Object.keys(t).length>0&&(o.arguments=t),this._send("request",o),i){this._pendingRequests.set(o.seq,i);let s=setTimeout(()=>{clearTimeout(s);let a=this._pendingRequests.get(o.seq);a&&(this._pendingRequests.delete(o.seq),a(new uo.Response(o,"timeout")))},r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let r=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}\r
\r
${r}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let r=JSON.parse(t);this.handleMessage(r)}catch(r){this._emitEvent(new uo.Event("error","Error handling data: "+(r&&r.message)))}continue}}else{let t=this._rawData.indexOf(n.TWO_CRLF);if(t!==-1){let i=this._rawData.toString("utf8",0,t).split(`\r
`);for(let o=0;o<i.length;o++){let s=i[o].split(/: +/);s[0]=="Content-Length"&&(this._contentLength=+s[1])}this._rawData=this._rawData.slice(t+n.TWO_CRLF.length);continue}}break}}};cs.ProtocolServer=as;as.TWO_CRLF=`\r
\r
`});var Up=$(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.runDebugAdapter=void 0;var rT=require("net");function iT(n){let e=0;if(process.argv.slice(2).forEach(function(r,i,o){let s=/^--server=(\d{4,5})$/.exec(r);s&&(e=parseInt(s[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),rT.createServer(r=>{console.error(">> accepted connection from client"),r.on("end",()=>{console.error(`>> client connection closed
`)});let i=new n(!1,!0);i.setRunAsServer(!0),i.start(r,r)}).listen(e);else{let r=new n(!1);process.on("SIGTERM",()=>{r.shutdown()}),r.start(process.stdin,process.stdout)}}us.runDebugAdapter=iT});var ds=$(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.DebugSession=fe.ErrorDestination=fe.MemoryEvent=fe.InvalidatedEvent=fe.ProgressEndEvent=fe.ProgressUpdateEvent=fe.ProgressStartEvent=fe.CapabilitiesEvent=fe.LoadedSourceEvent=fe.ModuleEvent=fe.BreakpointEvent=fe.ThreadEvent=fe.OutputEvent=fe.ExitedEvent=fe.TerminatedEvent=fe.InitializedEvent=fe.ContinuedEvent=fe.StoppedEvent=fe.CompletionItem=fe.Module=fe.Breakpoint=fe.Variable=fe.Thread=fe.StackFrame=fe.Scope=fe.Source=void 0;var oT=Hp(),Ut=ss(),sT=Up(),Bp=require("url"),eu=class{constructor(e,t,r=0,i,o){this.name=e,this.path=t,this.sourceReference=r,i&&(this.origin=i),o&&(this.adapterData=o)}};fe.Source=eu;var tu=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};fe.Scope=tu;var nu=class{constructor(e,t,r,i=0,o=0){this.id=e,this.source=r,this.line=i,this.column=o,this.name=t}};fe.StackFrame=nu;var ru=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};fe.Thread=ru;var iu=class{constructor(e,t,r=0,i,o){this.name=e,this.value=t,this.variablesReference=r,typeof o=="number"&&(this.namedVariables=o),typeof i=="number"&&(this.indexedVariables=i)}};fe.Variable=iu;var ou=class{constructor(e,t,r,i){this.verified=e;let o=this;typeof t=="number"&&(o.line=t),typeof r=="number"&&(o.column=r),i&&(o.source=i)}setId(e){this.id=e}};fe.Breakpoint=ou;var su=class{constructor(e,t){this.id=e,this.name=t}};fe.Module=su;var au=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};fe.CompletionItem=au;var cu=class extends Ut.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof r=="string"&&(this.body.text=r)}};fe.StoppedEvent=cu;var uu=class extends Ut.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};fe.ContinuedEvent=uu;var lu=class extends Ut.Event{constructor(){super("initialized")}};fe.InitializedEvent=lu;var du=class extends Ut.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};fe.TerminatedEvent=du;var fu=class extends Ut.Event{constructor(e){super("exited"),this.body={exitCode:e}}};fe.ExitedEvent=fu;var hu=class extends Ut.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},r!==void 0&&(this.body.data=r)}};fe.OutputEvent=hu;var pu=class extends Ut.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};fe.ThreadEvent=pu;var gu=class extends Ut.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};fe.BreakpointEvent=gu;var mu=class extends Ut.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};fe.ModuleEvent=mu;var yu=class extends Ut.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};fe.LoadedSourceEvent=yu;var vu=class extends Ut.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};fe.CapabilitiesEvent=vu;var bu=class extends Ut.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},typeof r=="string"&&(this.body.message=r)}};fe.ProgressStartEvent=bu;var wu=class extends Ut.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};fe.ProgressUpdateEvent=wu;var Cu=class extends Ut.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};fe.ProgressEndEvent=Cu;var Du=class extends Ut.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}};fe.InvalidatedEvent=Du;var Su=class extends Ut.Event{constructor(e,t,r){super("memory"),this.body={memoryReference:e,offset:t,count:r}}};fe.MemoryEvent=Su;var Zr;(function(n){n[n.User=1]="User",n[n.Telemetry=2]="Telemetry"})(Zr=fe.ErrorDestination||(fe.ErrorDestination={}));var ls=class n extends oT.ProtocolServer{constructor(e,t){super();let r=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",i=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,sT.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,r,i,o=Zr.User){let s;typeof t=="number"?(s={id:t,format:r},i&&(s.variables=i),o&Zr.User&&(s.showUser=!0),o&Zr.Telemetry&&(s.sendTelemetry=!0)):s=t,e.success=!1,e.message=n.formatPII(s.format,!0,s.variables),e.body||(e.body={}),e.body.error=s,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){let t=new Ut.Response(e);try{if(e.command==="initialize"){var r=e.arguments;if(typeof r.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=r.linesStartAt1),typeof r.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=r.columnsStartAt1),r.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,Zr.Telemetry);else{let i=t;i.body={},this.initializeRequest(i,r)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(i){this.sendErrorResponse(t,1104,"{_stack}",{_exception:i.message,_stack:i.stack},Zr.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,i){this.sendErrorResponse(t,1014,"unrecognized request",null,Zr.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?n.uri2path(e):n.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?n.uri2path(e):n.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new Bp.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new Bp.URL(e),r=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(n._formatPIIRegexp,function(i,o){return t&&o.length>0&&o[0]!=="_"?i:r[o]&&r.hasOwnProperty(o)?r[o]:i})}};fe.DebugSession=ls;ls._formatPIIRegexp=/{([^}]+)}/g});var Kp=$(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.InternalLogger=void 0;var Vp=require("fs"),Wp=require("path"),Sn=ps(),Tu=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=Sn.LogLevel.Warn,this.disposeCallback=(r,i)=>{this.dispose(),i=i||2,i+=128,process.exit(i)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!Wp.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,Sn.LogLevel.Error);else{let t=r=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${r.toString()}
`,Sn.LogLevel.Error);try{await Vp.promises.mkdir(Wp.dirname(e.logFilePath),{recursive:!0}),this.log(`Verbose logs are written to:
`,Sn.LogLevel.Warn),this.log(e.logFilePath+`
`,Sn.LogLevel.Warn),this._logFileStream=Vp.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",r=>{t(r)})}catch(r){t(r)}}}logDateTime(){let e=new Date,r=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+zp();this.log(r+`
`,Sn.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,r=!0){if(this._minLogLevel!==Sn.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let i=t===Sn.LogLevel.Error?console.error:t===Sn.LogLevel.Warn?console.warn:null;i&&i((0,Sn.trimLastNewline)(e))}t===Sn.LogLevel.Error&&(e=`[${Sn.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+zp()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let r=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",r&&(e=e+`
`)}if(this._logCallback){let r=new Sn.LogOutputEvent(e,t);this._logCallback(r)}}};hs.InternalLogger=Tu;function zp(){let n=new Date,e=fs(2,String(n.getUTCHours())),t=fs(2,String(n.getUTCMinutes())),r=fs(2,String(n.getUTCSeconds())),i=fs(3,String(n.getUTCMilliseconds()));return e+":"+t+":"+r+"."+i+" UTC"}function fs(n,e){return e.length>=n?e:String("0".repeat(n)+e).slice(-n)}});var ps=$(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.trimLastNewline=Tn.LogOutputEvent=Tn.logger=Tn.Logger=Tn.LogLevel=void 0;var aT=Kp(),cT=ds(),kr;(function(n){n[n.Verbose=0]="Verbose",n[n.Log=1]="Log",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Stop=4]="Stop"})(kr=Tn.LogLevel||(Tn.LogLevel={}));var gs=class{constructor(){this._pendingLogQ=[]}log(e,t=kr.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,kr.Verbose)}warn(e){this.log(e,kr.Warn)}error(e){this.log(e,kr.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=kr.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){let i=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let o={consoleMinLogLevel:e,logFilePath:i,prependTimestamp:r};this._currentLogger.setup(o).then(()=>{if(this._pendingLogQ){let s=this._pendingLogQ;this._pendingLogQ=null,s.forEach(a=>this._write(a.msg,a.level))}})}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new aT.InternalLogger(e,r),this._logFilePathFromInit=t}};Tn.Logger=gs;Tn.logger=new gs;var _u=class extends cT.OutputEvent{constructor(e,t){let r=t===kr.Error?"stderr":t===kr.Warn?"console":"stdout";super(e,r)}};Tn.LogOutputEvent=_u;function uT(n){return n.replace(/(\n|\r\n)$/,"")}Tn.trimLastNewline=uT});var Qp=$(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.LoggingDebugSession=void 0;var Gp=ps(),_i=Gp.logger,Xp=ds(),Ru=class extends Xp.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",i=>{_i.error(i.body)})}start(e,t){super.start(e,t),_i.init(r=>this.sendEvent(r),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof Gp.LogOutputEvent)){let t=e;e instanceof Xp.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),_i.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,i){_i.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,i)}sendResponse(e){_i.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){_i.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};ms.LoggingDebugSession=Ru});var Yp=$(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.Handles=void 0;var Pu=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};ys.Handles=Pu});var lo=$(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.Handles=ce.Response=ce.Event=ce.ErrorDestination=ce.CompletionItem=ce.Module=ce.Source=ce.Breakpoint=ce.Variable=ce.Scope=ce.StackFrame=ce.Thread=ce.MemoryEvent=ce.InvalidatedEvent=ce.ProgressEndEvent=ce.ProgressUpdateEvent=ce.ProgressStartEvent=ce.CapabilitiesEvent=ce.LoadedSourceEvent=ce.ModuleEvent=ce.BreakpointEvent=ce.ThreadEvent=ce.OutputEvent=ce.ContinuedEvent=ce.StoppedEvent=ce.ExitedEvent=ce.TerminatedEvent=ce.InitializedEvent=ce.logger=ce.Logger=ce.LoggingDebugSession=ce.DebugSession=void 0;var ot=ds();Object.defineProperty(ce,"DebugSession",{enumerable:!0,get:function(){return ot.DebugSession}});Object.defineProperty(ce,"InitializedEvent",{enumerable:!0,get:function(){return ot.InitializedEvent}});Object.defineProperty(ce,"TerminatedEvent",{enumerable:!0,get:function(){return ot.TerminatedEvent}});Object.defineProperty(ce,"ExitedEvent",{enumerable:!0,get:function(){return ot.ExitedEvent}});Object.defineProperty(ce,"StoppedEvent",{enumerable:!0,get:function(){return ot.StoppedEvent}});Object.defineProperty(ce,"ContinuedEvent",{enumerable:!0,get:function(){return ot.ContinuedEvent}});Object.defineProperty(ce,"OutputEvent",{enumerable:!0,get:function(){return ot.OutputEvent}});Object.defineProperty(ce,"ThreadEvent",{enumerable:!0,get:function(){return ot.ThreadEvent}});Object.defineProperty(ce,"BreakpointEvent",{enumerable:!0,get:function(){return ot.BreakpointEvent}});Object.defineProperty(ce,"ModuleEvent",{enumerable:!0,get:function(){return ot.ModuleEvent}});Object.defineProperty(ce,"LoadedSourceEvent",{enumerable:!0,get:function(){return ot.LoadedSourceEvent}});Object.defineProperty(ce,"CapabilitiesEvent",{enumerable:!0,get:function(){return ot.CapabilitiesEvent}});Object.defineProperty(ce,"ProgressStartEvent",{enumerable:!0,get:function(){return ot.ProgressStartEvent}});Object.defineProperty(ce,"ProgressUpdateEvent",{enumerable:!0,get:function(){return ot.ProgressUpdateEvent}});Object.defineProperty(ce,"ProgressEndEvent",{enumerable:!0,get:function(){return ot.ProgressEndEvent}});Object.defineProperty(ce,"InvalidatedEvent",{enumerable:!0,get:function(){return ot.InvalidatedEvent}});Object.defineProperty(ce,"MemoryEvent",{enumerable:!0,get:function(){return ot.MemoryEvent}});Object.defineProperty(ce,"Thread",{enumerable:!0,get:function(){return ot.Thread}});Object.defineProperty(ce,"StackFrame",{enumerable:!0,get:function(){return ot.StackFrame}});Object.defineProperty(ce,"Scope",{enumerable:!0,get:function(){return ot.Scope}});Object.defineProperty(ce,"Variable",{enumerable:!0,get:function(){return ot.Variable}});Object.defineProperty(ce,"Breakpoint",{enumerable:!0,get:function(){return ot.Breakpoint}});Object.defineProperty(ce,"Source",{enumerable:!0,get:function(){return ot.Source}});Object.defineProperty(ce,"Module",{enumerable:!0,get:function(){return ot.Module}});Object.defineProperty(ce,"CompletionItem",{enumerable:!0,get:function(){return ot.CompletionItem}});Object.defineProperty(ce,"ErrorDestination",{enumerable:!0,get:function(){return ot.ErrorDestination}});var lT=Qp();Object.defineProperty(ce,"LoggingDebugSession",{enumerable:!0,get:function(){return lT.LoggingDebugSession}});var Jp=ps();ce.Logger=Jp;var Zp=ss();Object.defineProperty(ce,"Event",{enumerable:!0,get:function(){return Zp.Event}});Object.defineProperty(ce,"Response",{enumerable:!0,get:function(){return Zp.Response}});var dT=Yp();Object.defineProperty(ce,"Handles",{enumerable:!0,get:function(){return dT.Handles}});var fT=Jp.logger;ce.logger=fT});var vs=$(Eu=>{(function(){Eu.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Eu)});var tr=$((eg,Or)=>{(function(){var n,e,t,r,i,o,s,a=[].slice,c={}.hasOwnProperty;n=function(){var u,l,g,d,p,h;if(h=arguments[0],p=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,g=p.length;u<g;u++)if(d=p[u],d!=null)for(l in d)c.call(d,l)&&(h[l]=d[l]);return h},i=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},o=function(u){var l;return!!u&&((l=typeof u)=="function"||l==="object")},t=function(u){return i(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},r=function(u){var l;if(t(u))return!u.length;for(l in u)if(c.call(u,l))return!1;return!0},s=function(u){var l,g;return o(u)&&(g=Object.getPrototypeOf(u))&&(l=g.constructor)&&typeof l=="function"&&l instanceof l&&Function.prototype.toString.call(l)===Function.prototype.toString.call(Object)},e=function(u){return i(u.valueOf)?u.valueOf():u},Or.exports.assign=n,Or.exports.isFunction=i,Or.exports.isObject=o,Or.exports.isArray=t,Or.exports.isEmpty=r,Or.exports.isPlainObject=s,Or.exports.getValue=e}).call(eg)});var xu=$((tg,ng)=>{(function(){var n;ng.exports=n=function(){function e(){}return e.prototype.hasFeature=function(t,r){return!0},e.prototype.createDocumentType=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,r,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(tg)});var og=$((rg,ig)=>{(function(){var n;ig.exports=n=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(rg)});var cg=$((sg,ag)=>{(function(){var n;ag.exports=n=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(sg)});var dg=$((ug,lg)=>{(function(){var n,e,t;e=og(),t=cg(),lg.exports=n=function(){function r(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(r.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),r.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},r.prototype.canSetParameter=function(i,o){return!0},r.prototype.setParameter=function(i,o){return o!=null?this.params[i]=o:delete this.params[i]},r}()}).call(ug)});var Pt=$((fg,hg)=>{(function(){hg.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(fg)});var Iu=$((pg,gg)=>{(function(){var n,e,t;n=Pt(),t=_n(),gg.exports=e=function(){function r(i,o,s){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(s),this.type=n.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},r.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},r}()}).call(pg)});var bs=$((mg,yg)=>{(function(){var n;yg.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var r;return r=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,r||null},e.prototype.removeNamedItem=function(t){var r;return r=this.nodes[t],delete this.nodes[t],r||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,r){throw new Error("This DOM method is not implemented.")},e}()}).call(mg)});var ws=$((vg,bg)=>{(function(){var n,e,t,r,i,o,s,a,c,u=function(g,d){for(var p in d)l.call(d,p)&&(g[p]=d[p]);function h(){this.constructor=g}return h.prototype=d.prototype,g.prototype=new h,g.__super__=d.prototype,g},l={}.hasOwnProperty;c=tr(),a=c.isObject,s=c.isFunction,o=c.getValue,i=_n(),n=Pt(),e=Iu(),r=bs(),bg.exports=t=function(g){u(d,g);function d(p,h,T){var I,O,E,C;if(d.__super__.constructor.call(this,p),h==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(h),this.type=n.Element,this.attribs={},this.schemaTypeInfo=null,T!=null&&this.attribute(T),p.type===n.Document&&(this.isRoot=!0,this.documentObject=p,p.rootObject=this,p.children)){for(C=p.children,O=0,E=C.length;O<E;O++)if(I=C[O],I.type===n.DocType){I.name=this.name;break}}}return Object.defineProperty(d.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(d.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(d.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(d.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(d.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new r(this.attribs)),this.attributeMap}}),d.prototype.clone=function(){var p,h,T,I;T=Object.create(this),T.isRoot&&(T.documentObject=null),T.attribs={},I=this.attribs;for(h in I)l.call(I,h)&&(p=I[h],T.attribs[h]=p.clone());return T.children=[],this.children.forEach(function(O){var E;return E=O.clone(),E.parent=T,T.children.push(E)}),T},d.prototype.attribute=function(p,h){var T,I;if(p!=null&&(p=o(p)),a(p))for(T in p)l.call(p,T)&&(I=p[T],this.attribute(T,I));else s(h)&&(h=h.apply()),this.options.keepNullAttributes&&h==null?this.attribs[p]=new e(this,p,""):h!=null&&(this.attribs[p]=new e(this,p,h));return this},d.prototype.removeAttribute=function(p){var h,T,I;if(p==null)throw new Error("Missing attribute name. "+this.debugInfo());if(p=o(p),Array.isArray(p))for(T=0,I=p.length;T<I;T++)h=p[T],delete this.attribs[h];else delete this.attribs[p];return this},d.prototype.toString=function(p){return this.options.writer.element(this,this.options.writer.filterOptions(p))},d.prototype.att=function(p,h){return this.attribute(p,h)},d.prototype.a=function(p,h){return this.attribute(p,h)},d.prototype.getAttribute=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p].value:null},d.prototype.setAttribute=function(p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNode=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p]:null},d.prototype.setAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.removeAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNS=function(p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setAttributeNS=function(p,h,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.removeAttributeNS=function(p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNodeNS=function(p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setAttributeNodeNS=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.hasAttribute=function(p){return this.attribs.hasOwnProperty(p)},d.prototype.hasAttributeNS=function(p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setIdAttribute=function(p,h){return this.attribs.hasOwnProperty(p)?this.attribs[p].isId:h},d.prototype.setIdAttributeNS=function(p,h,T){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setIdAttributeNode=function(p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByClassName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isEqualNode=function(p){var h,T,I;if(!d.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.namespaceURI!==this.namespaceURI||p.prefix!==this.prefix||p.localName!==this.localName||p.attribs.length!==this.attribs.length)return!1;for(h=T=0,I=this.attribs.length-1;0<=I?T<=I:T>=I;h=0<=I?++T:--T)if(!this.attribs[h].isEqualNode(p.attribs[h]))return!1;return!0},d}(i)}).call(vg)});var fo=$((wg,Cg)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=_n(),Cg.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(s,a,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},o}(e)}).call(wg)});var Cs=$((Dg,Sg)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=Pt(),t=fo(),Sg.exports=e=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=n.CData,this.value=this.stringify.cdata(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},s}(t)}).call(Dg)});var Ds=$((Tg,_g)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=Pt(),e=fo(),_g.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=n.Comment,this.value=this.stringify.comment(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},s}(e)}).call(Tg)});var Ss=$((Rg,Pg)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=tr().isObject,t=_n(),n=Pt(),Pg.exports=e=function(s){i(a,s);function a(c,u,l,g){var d;a.__super__.constructor.call(this,c),r(u)&&(d=u,u=d.version,l=d.encoding,g=d.standalone),u||(u="1.0"),this.type=n.Declaration,this.version=this.stringify.xmlVersion(u),l!=null&&(this.encoding=this.stringify.xmlEncoding(l)),g!=null&&(this.standalone=this.stringify.xmlStandalone(g))}return a.prototype.toString=function(c){return this.options.writer.declaration(this,this.options.writer.filterOptions(c))},a}(t)}).call(Rg)});var Ts=$((Eg,xg)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=_n(),n=Pt(),xg.exports=e=function(o){r(s,o);function s(a,c,u,l,g,d){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(c));if(!l)throw new Error("Missing DTD attribute type. "+this.debugInfo(c));if(!g)throw new Error("Missing DTD attribute default. "+this.debugInfo(c));if(g.indexOf("#")!==0&&(g="#"+g),!g.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(c));if(d&&!g.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(c));this.elementName=this.stringify.name(c),this.type=n.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(l),d&&(this.defaultValue=this.stringify.dtdAttDefault(d)),this.defaultValueType=g}return s.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},s}(t)}).call(Eg)});var _s=$((Ig,kg)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=tr().isObject,t=_n(),n=Pt(),kg.exports=e=function(s){i(a,s);function a(c,u,l,g){if(a.__super__.constructor.call(this,c),l==null)throw new Error("Missing DTD entity name. "+this.debugInfo(l));if(g==null)throw new Error("Missing DTD entity value. "+this.debugInfo(l));if(this.pe=!!u,this.name=this.stringify.name(l),this.type=n.EntityDeclaration,!r(g))this.value=this.stringify.dtdEntityValue(g),this.internal=!0;else{if(!g.pubID&&!g.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(l));if(g.pubID&&!g.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(l));if(this.internal=!1,g.pubID!=null&&(this.pubID=this.stringify.dtdPubID(g.pubID)),g.sysID!=null&&(this.sysID=this.stringify.dtdSysID(g.sysID)),g.nData!=null&&(this.nData=this.stringify.dtdNData(g.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(l))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(c){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(c))},a}(t)}).call(Ig)});var Rs=$((Og,qg)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=_n(),n=Pt(),qg.exports=e=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(c),this.type=n.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return s.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},s}(t)}).call(Og)});var Ps=$((Ng,Lg)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=_n(),n=Pt(),Lg.exports=e=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD notation name. "+this.debugInfo(c));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(c));this.name=this.stringify.name(c),this.type=n.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},s}(t)}).call(Ng)});var Es=$((Ag,Fg)=>{(function(){var n,e,t,r,i,o,s,a,c,u=function(g,d){for(var p in d)l.call(d,p)&&(g[p]=d[p]);function h(){this.constructor=g}return h.prototype=d.prototype,g.prototype=new h,g.__super__=d.prototype,g},l={}.hasOwnProperty;c=tr().isObject,a=_n(),n=Pt(),e=Ts(),r=_s(),t=Rs(),i=Ps(),s=bs(),Fg.exports=o=function(g){u(d,g);function d(p,h,T){var I,O,E,C,y,m;if(d.__super__.constructor.call(this,p),this.type=n.DocType,p.children){for(C=p.children,O=0,E=C.length;O<E;O++)if(I=C[O],I.type===n.Element){this.name=I.name;break}}this.documentObject=p,c(h)&&(y=h,h=y.pubID,T=y.sysID),T==null&&(m=[h,T],T=m[0],h=m[1]),h!=null&&(this.pubID=this.stringify.dtdPubID(h)),T!=null&&(this.sysID=this.stringify.dtdSysID(T))}return Object.defineProperty(d.prototype,"entities",{get:function(){var p,h,T,I,O;for(I={},O=this.children,h=0,T=O.length;h<T;h++)p=O[h],p.type===n.EntityDeclaration&&!p.pe&&(I[p.name]=p);return new s(I)}}),Object.defineProperty(d.prototype,"notations",{get:function(){var p,h,T,I,O;for(I={},O=this.children,h=0,T=O.length;h<T;h++)p=O[h],p.type===n.NotationDeclaration&&(I[p.name]=p);return new s(I)}}),Object.defineProperty(d.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(d.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(d.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),d.prototype.element=function(p,h){var T;return T=new t(this,p,h),this.children.push(T),this},d.prototype.attList=function(p,h,T,I,O){var E;return E=new e(this,p,h,T,I,O),this.children.push(E),this},d.prototype.entity=function(p,h){var T;return T=new r(this,!1,p,h),this.children.push(T),this},d.prototype.pEntity=function(p,h){var T;return T=new r(this,!0,p,h),this.children.push(T),this},d.prototype.notation=function(p,h){var T;return T=new i(this,p,h),this.children.push(T),this},d.prototype.toString=function(p){return this.options.writer.docType(this,this.options.writer.filterOptions(p))},d.prototype.ele=function(p,h){return this.element(p,h)},d.prototype.att=function(p,h,T,I,O){return this.attList(p,h,T,I,O)},d.prototype.ent=function(p,h){return this.entity(p,h)},d.prototype.pent=function(p,h){return this.pEntity(p,h)},d.prototype.not=function(p,h){return this.notation(p,h)},d.prototype.up=function(){return this.root()||this.documentObject},d.prototype.isEqualNode=function(p){return!(!d.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.name!==this.name||p.publicId!==this.publicId||p.systemId!==this.systemId)},d}(a)}).call(Ag)});var xs=$((Mg,jg)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=Pt(),e=_n(),jg.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=n.Raw,this.value=this.stringify.raw(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},s}(e)}).call(Mg)});var Is=$(($g,Hg)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=Pt(),e=fo(),Hg.exports=t=function(o){r(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=n.Text,this.value=this.stringify.text(c)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var a,c,u;for(u="",c=this.previousSibling;c;)u=c.data+u,c=c.previousSibling;for(u+=this.data,a=this.nextSibling;a;)u=u+a.data,a=a.nextSibling;return u}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},s.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(e)}).call($g)});var ks=$((Ug,Bg)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;n=Pt(),e=fo(),Bg.exports=t=function(o){r(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=n.ProcessingInstruction,this.target=this.stringify.insTarget(c),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},s.prototype.isEqualNode=function(a){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},s}(e)}).call(Ug)});var ku=$((Vg,Wg)=>{(function(){var n,e,t,r=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=_n(),n=Pt(),Wg.exports=e=function(o){r(s,o);function s(a){s.__super__.constructor.call(this,a),this.type=n.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return""},s}(t)}).call(Vg)});var Xg=$((zg,Kg)=>{(function(){var n;Kg.exports=n=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(zg)});var Yg=$((Gg,Qg)=>{(function(){Qg.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Gg)});var _n=$((Jg,Zg)=>{(function(){var n,e,t,r,i,o,s,a,c,u,l,g,d,p,h,T,I,O,E,C={}.hasOwnProperty;E=tr(),O=E.isObject,I=E.isFunction,T=E.isEmpty,h=E.getValue,a=null,t=null,r=null,i=null,o=null,d=null,p=null,g=null,s=null,e=null,l=null,c=null,n=null,Zg.exports=u=function(){function y(m){this.parent=m,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=ws(),t=Cs(),r=Ds(),i=Ss(),o=Es(),d=xs(),p=Is(),g=ks(),s=ku(),e=Pt(),l=Xg(),c=bs(),n=Yg())}return Object.defineProperty(y.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(y.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(y.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(y.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(y.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(y.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(y.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(y.prototype,"previousSibling",{get:function(){var m;return m=this.parent.children.indexOf(this),this.parent.children[m-1]||null}}),Object.defineProperty(y.prototype,"nextSibling",{get:function(){var m;return m=this.parent.children.indexOf(this),this.parent.children[m+1]||null}}),Object.defineProperty(y.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(y.prototype,"textContent",{get:function(){var m,P,A,S,U;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(U="",S=this.children,P=0,A=S.length;P<A;P++)m=S[P],m.textContent&&(U+=m.textContent);return U}else return null},set:function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),y.prototype.setParent=function(m){var P,A,S,U,k;for(this.parent=m,m&&(this.options=m.options,this.stringify=m.stringify),U=this.children,k=[],A=0,S=U.length;A<S;A++)P=U[A],k.push(P.setParent(this));return k},y.prototype.element=function(m,P,A){var S,U,k,H,X,Z,le,he,ne,qe,me;if(Z=null,P===null&&A==null&&(ne=[{},null],P=ne[0],A=ne[1]),P==null&&(P={}),P=h(P),O(P)||(qe=[P,A],A=qe[0],P=qe[1]),m!=null&&(m=h(m)),Array.isArray(m))for(k=0,le=m.length;k<le;k++)U=m[k],Z=this.element(U);else if(I(m))Z=this.element(m.apply());else if(O(m)){for(X in m)if(C.call(m,X))if(me=m[X],I(me)&&(me=me.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&X.indexOf(this.stringify.convertAttKey)===0)Z=this.attribute(X.substr(this.stringify.convertAttKey.length),me);else if(!this.options.separateArrayItems&&Array.isArray(me)&&T(me))Z=this.dummy();else if(O(me)&&T(me))Z=this.element(X);else if(!this.options.keepNullNodes&&me==null)Z=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(me))for(H=0,he=me.length;H<he;H++)U=me[H],S={},S[X]=U,Z=this.element(S);else O(me)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&X.indexOf(this.stringify.convertTextKey)===0?Z=this.element(me):(Z=this.element(X),Z.element(me)):Z=this.element(X,me)}else!this.options.keepNullNodes&&A===null?Z=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&m.indexOf(this.stringify.convertTextKey)===0?Z=this.text(A):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&m.indexOf(this.stringify.convertCDataKey)===0?Z=this.cdata(A):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&m.indexOf(this.stringify.convertCommentKey)===0?Z=this.comment(A):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&m.indexOf(this.stringify.convertRawKey)===0?Z=this.raw(A):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&m.indexOf(this.stringify.convertPIKey)===0?Z=this.instruction(m.substr(this.stringify.convertPIKey.length),A):Z=this.node(m,P,A);if(Z==null)throw new Error("Could not create any elements with: "+m+". "+this.debugInfo());return Z},y.prototype.insertBefore=function(m,P,A){var S,U,k,H,X;if(m?.type)return k=m,H=P,k.setParent(this),H?(U=children.indexOf(H),X=children.splice(U),children.push(k),Array.prototype.push.apply(children,X)):children.push(k),k;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return U=this.parent.children.indexOf(this),X=this.parent.children.splice(U),S=this.parent.element(m,P,A),Array.prototype.push.apply(this.parent.children,X),S},y.prototype.insertAfter=function(m,P,A){var S,U,k;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(m));return U=this.parent.children.indexOf(this),k=this.parent.children.splice(U+1),S=this.parent.element(m,P,A),Array.prototype.push.apply(this.parent.children,k),S},y.prototype.remove=function(){var m,P;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return m=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[m,m-m+1].concat(P=[])),this.parent},y.prototype.node=function(m,P,A){var S,U;return m!=null&&(m=h(m)),P||(P={}),P=h(P),O(P)||(U=[P,A],A=U[0],P=U[1]),S=new a(this,m,P),A!=null&&S.text(A),this.children.push(S),S},y.prototype.text=function(m){var P;return O(m)&&this.element(m),P=new p(this,m),this.children.push(P),this},y.prototype.cdata=function(m){var P;return P=new t(this,m),this.children.push(P),this},y.prototype.comment=function(m){var P;return P=new r(this,m),this.children.push(P),this},y.prototype.commentBefore=function(m){var P,A,S;return A=this.parent.children.indexOf(this),S=this.parent.children.splice(A),P=this.parent.comment(m),Array.prototype.push.apply(this.parent.children,S),this},y.prototype.commentAfter=function(m){var P,A,S;return A=this.parent.children.indexOf(this),S=this.parent.children.splice(A+1),P=this.parent.comment(m),Array.prototype.push.apply(this.parent.children,S),this},y.prototype.raw=function(m){var P;return P=new d(this,m),this.children.push(P),this},y.prototype.dummy=function(){var m;return m=new s(this),m},y.prototype.instruction=function(m,P){var A,S,U,k,H;if(m!=null&&(m=h(m)),P!=null&&(P=h(P)),Array.isArray(m))for(k=0,H=m.length;k<H;k++)A=m[k],this.instruction(A);else if(O(m))for(A in m)C.call(m,A)&&(S=m[A],this.instruction(A,S));else I(P)&&(P=P.apply()),U=new g(this,m,P),this.children.push(U);return this},y.prototype.instructionBefore=function(m,P){var A,S,U;return S=this.parent.children.indexOf(this),U=this.parent.children.splice(S),A=this.parent.instruction(m,P),Array.prototype.push.apply(this.parent.children,U),this},y.prototype.instructionAfter=function(m,P){var A,S,U;return S=this.parent.children.indexOf(this),U=this.parent.children.splice(S+1),A=this.parent.instruction(m,P),Array.prototype.push.apply(this.parent.children,U),this},y.prototype.declaration=function(m,P,A){var S,U;return S=this.document(),U=new i(S,m,P,A),S.children.length===0?S.children.unshift(U):S.children[0].type===e.Declaration?S.children[0]=U:S.children.unshift(U),S.root()||S},y.prototype.dtd=function(m,P){var A,S,U,k,H,X,Z,le,he,ne;for(S=this.document(),U=new o(S,m,P),he=S.children,k=H=0,Z=he.length;H<Z;k=++H)if(A=he[k],A.type===e.DocType)return S.children[k]=U,U;for(ne=S.children,k=X=0,le=ne.length;X<le;k=++X)if(A=ne[k],A.isRoot)return S.children.splice(k,0,U),U;return S.children.push(U),U},y.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},y.prototype.root=function(){var m;for(m=this;m;){if(m.type===e.Document)return m.rootObject;if(m.isRoot)return m;m=m.parent}},y.prototype.document=function(){var m;for(m=this;m;){if(m.type===e.Document)return m;m=m.parent}},y.prototype.end=function(m){return this.document().end(m)},y.prototype.prev=function(){var m;if(m=this.parent.children.indexOf(this),m<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[m-1]},y.prototype.next=function(){var m;if(m=this.parent.children.indexOf(this),m===-1||m===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[m+1]},y.prototype.importDocument=function(m){var P;return P=m.root().clone(),P.parent=this,P.isRoot=!1,this.children.push(P),this},y.prototype.debugInfo=function(m){var P,A;return m=m||this.name,m==null&&!((P=this.parent)!=null&&P.name)?"":m==null?"parent: <"+this.parent.name+">":(A=this.parent)!=null&&A.name?"node: <"+m+">, parent: <"+this.parent.name+">":"node: <"+m+">"},y.prototype.ele=function(m,P,A){return this.element(m,P,A)},y.prototype.nod=function(m,P,A){return this.node(m,P,A)},y.prototype.txt=function(m){return this.text(m)},y.prototype.dat=function(m){return this.cdata(m)},y.prototype.com=function(m){return this.comment(m)},y.prototype.ins=function(m,P){return this.instruction(m,P)},y.prototype.doc=function(){return this.document()},y.prototype.dec=function(m,P,A){return this.declaration(m,P,A)},y.prototype.e=function(m,P,A){return this.element(m,P,A)},y.prototype.n=function(m,P,A){return this.node(m,P,A)},y.prototype.t=function(m){return this.text(m)},y.prototype.d=function(m){return this.cdata(m)},y.prototype.c=function(m){return this.comment(m)},y.prototype.r=function(m){return this.raw(m)},y.prototype.i=function(m,P){return this.instruction(m,P)},y.prototype.u=function(){return this.up()},y.prototype.importXMLBuilder=function(m){return this.importDocument(m)},y.prototype.replaceChild=function(m,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.removeChild=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.appendChild=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.hasChildNodes=function(){return this.children.length!==0},y.prototype.cloneNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.isSupported=function(m,P){return!0},y.prototype.hasAttributes=function(){return this.attribs.length!==0},y.prototype.compareDocumentPosition=function(m){var P,A;return P=this,P===m?0:this.document()!==m.document()?(A=n.Disconnected|n.ImplementationSpecific,Math.random()<.5?A|=n.Preceding:A|=n.Following,A):P.isAncestor(m)?n.Contains|n.Preceding:P.isDescendant(m)?n.Contains|n.Following:P.isPreceding(m)?n.Preceding:n.Following},y.prototype.isSameNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.lookupPrefix=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.isDefaultNamespace=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.lookupNamespaceURI=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.isEqualNode=function(m){var P,A,S;if(m.nodeType!==this.nodeType||m.children.length!==this.children.length)return!1;for(P=A=0,S=this.children.length-1;0<=S?A<=S:A>=S;P=0<=S?++A:--A)if(!this.children[P].isEqualNode(m.children[P]))return!1;return!0},y.prototype.getFeature=function(m,P){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.setUserData=function(m,P,A){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getUserData=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.contains=function(m){return m?m===this||this.isDescendant(m):!1},y.prototype.isDescendant=function(m){var P,A,S,U,k;for(k=this.children,S=0,U=k.length;S<U;S++)if(P=k[S],m===P||(A=P.isDescendant(m),A))return!0;return!1},y.prototype.isAncestor=function(m){return m.isDescendant(this)},y.prototype.isPreceding=function(m){var P,A;return P=this.treePosition(m),A=this.treePosition(this),P===-1||A===-1?!1:P<A},y.prototype.isFollowing=function(m){var P,A;return P=this.treePosition(m),A=this.treePosition(this),P===-1||A===-1?!1:P>A},y.prototype.treePosition=function(m){var P,A;return A=0,P=!1,this.foreachTreeNode(this.document(),function(S){if(A++,!P&&S===m)return P=!0}),P?A:-1},y.prototype.foreachTreeNode=function(m,P){var A,S,U,k,H;for(m||(m=this.document()),k=m.children,S=0,U=k.length;S<U;S++){if(A=k[S],H=P(A))return H;if(H=this.foreachTreeNode(A,P),H)return H}},y}()}).call(Jg)});var Ou=$((em,tm)=>{(function(){var n,e=function(r,i){return function(){return r.apply(i,arguments)}},t={}.hasOwnProperty;tm.exports=n=function(){function r(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,s,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),s=i.stringify||{};for(o in s)t.call(s,o)&&(a=s[o],this[o]=a)}return r.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},r.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},r.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},r.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},r.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},r.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},r.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},r.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},r.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},r.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},r.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},r.prototype.convertAttKey="@",r.prototype.convertPIKey="?",r.prototype.convertTextKey="#text",r.prototype.convertCDataKey="#cdata",r.prototype.convertCommentKey="#comment",r.prototype.convertRawKey="#raw",r.prototype.assertLegalChar=function(i){var o,s;if(this.options.noValidation)return i;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o))throw new Error("Invalid character in string: "+i+" at index "+s.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o)))throw new Error("Invalid character in string: "+i+" at index "+s.index);return i},r.prototype.assertLegalName=function(i){var o;if(this.options.noValidation)return i;if(this.assertLegalChar(i),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(o))throw new Error("Invalid character in name");return i},r.prototype.textEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},r.prototype.attEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},r}()}).call(em)});var ho=$((nm,rm)=>{(function(){rm.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(nm)});var qu=$((im,om)=>{(function(){var n,e,t,r,i,o,s,a,c,u,l,g,d,p,h,T,I,O={}.hasOwnProperty;I=tr().assign,n=Pt(),c=Ss(),u=Es(),t=Cs(),r=Ds(),g=ws(),p=xs(),h=Is(),d=ks(),l=ku(),i=Ts(),o=Rs(),s=_s(),a=Ps(),e=ho(),om.exports=T=function(){function E(C){var y,m,P;C||(C={}),this.options=C,m=C.writer||{};for(y in m)O.call(m,y)&&(P=m[y],this["_"+y]=this[y],this[y]=P)}return E.prototype.filterOptions=function(C){var y,m,P,A,S,U,k,H;return C||(C={}),C=I({},this.options,C),y={writer:this},y.pretty=C.pretty||!1,y.allowEmpty=C.allowEmpty||!1,y.indent=(m=C.indent)!=null?m:"  ",y.newline=(P=C.newline)!=null?P:`
`,y.offset=(A=C.offset)!=null?A:0,y.dontPrettyTextNodes=(S=(U=C.dontPrettyTextNodes)!=null?U:C.dontprettytextnodes)!=null?S:0,y.spaceBeforeSlash=(k=(H=C.spaceBeforeSlash)!=null?H:C.spacebeforeslash)!=null?k:"",y.spaceBeforeSlash===!0&&(y.spaceBeforeSlash=" "),y.suppressPrettyCount=0,y.user={},y.state=e.None,y},E.prototype.indent=function(C,y,m){var P;return!y.pretty||y.suppressPrettyCount?"":y.pretty&&(P=(m||0)+y.offset+1,P>0)?new Array(P).join(y.indent):""},E.prototype.endline=function(C,y,m){return!y.pretty||y.suppressPrettyCount?"":y.newline},E.prototype.attribute=function(C,y,m){var P;return this.openAttribute(C,y,m),P=" "+C.name+'="'+C.value+'"',this.closeAttribute(C,y,m),P},E.prototype.cdata=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m)+"<![CDATA[",y.state=e.InsideTag,P+=C.value,y.state=e.CloseTag,P+="]]>"+this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.comment=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m)+"<!-- ",y.state=e.InsideTag,P+=C.value,y.state=e.CloseTag,P+=" -->"+this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.declaration=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m)+"<?xml",y.state=e.InsideTag,P+=' version="'+C.version+'"',C.encoding!=null&&(P+=' encoding="'+C.encoding+'"'),C.standalone!=null&&(P+=' standalone="'+C.standalone+'"'),y.state=e.CloseTag,P+=y.spaceBeforeSlash+"?>",P+=this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.docType=function(C,y,m){var P,A,S,U,k;if(m||(m=0),this.openNode(C,y,m),y.state=e.OpenTag,U=this.indent(C,y,m),U+="<!DOCTYPE "+C.root().name,C.pubID&&C.sysID?U+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(U+=' SYSTEM "'+C.sysID+'"'),C.children.length>0){for(U+=" [",U+=this.endline(C,y,m),y.state=e.InsideTag,k=C.children,A=0,S=k.length;A<S;A++)P=k[A],U+=this.writeChildNode(P,y,m+1);y.state=e.CloseTag,U+="]"}return y.state=e.CloseTag,U+=y.spaceBeforeSlash+">",U+=this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),U},E.prototype.element=function(C,y,m){var P,A,S,U,k,H,X,Z,le,he,ne,qe,me,Ee;m||(m=0),he=!1,ne="",this.openNode(C,y,m),y.state=e.OpenTag,ne+=this.indent(C,y,m)+"<"+C.name,qe=C.attribs;for(le in qe)O.call(qe,le)&&(P=qe[le],ne+=this.attribute(P,y,m));if(S=C.children.length,U=S===0?null:C.children[0],S===0||C.children.every(function(Xe){return(Xe.type===n.Text||Xe.type===n.Raw)&&Xe.value===""}))y.allowEmpty?(ne+=">",y.state=e.CloseTag,ne+="</"+C.name+">"+this.endline(C,y,m)):(y.state=e.CloseTag,ne+=y.spaceBeforeSlash+"/>"+this.endline(C,y,m));else if(y.pretty&&S===1&&(U.type===n.Text||U.type===n.Raw)&&U.value!=null)ne+=">",y.state=e.InsideTag,y.suppressPrettyCount++,he=!0,ne+=this.writeChildNode(U,y,m+1),y.suppressPrettyCount--,he=!1,y.state=e.CloseTag,ne+="</"+C.name+">"+this.endline(C,y,m);else{if(y.dontPrettyTextNodes){for(me=C.children,k=0,X=me.length;k<X;k++)if(A=me[k],(A.type===n.Text||A.type===n.Raw)&&A.value!=null){y.suppressPrettyCount++,he=!0;break}}for(ne+=">"+this.endline(C,y,m),y.state=e.InsideTag,Ee=C.children,H=0,Z=Ee.length;H<Z;H++)A=Ee[H],ne+=this.writeChildNode(A,y,m+1);y.state=e.CloseTag,ne+=this.indent(C,y,m)+"</"+C.name+">",he&&y.suppressPrettyCount--,ne+=this.endline(C,y,m),y.state=e.None}return this.closeNode(C,y,m),ne},E.prototype.writeChildNode=function(C,y,m){switch(C.type){case n.CData:return this.cdata(C,y,m);case n.Comment:return this.comment(C,y,m);case n.Element:return this.element(C,y,m);case n.Raw:return this.raw(C,y,m);case n.Text:return this.text(C,y,m);case n.ProcessingInstruction:return this.processingInstruction(C,y,m);case n.Dummy:return"";case n.Declaration:return this.declaration(C,y,m);case n.DocType:return this.docType(C,y,m);case n.AttributeDeclaration:return this.dtdAttList(C,y,m);case n.ElementDeclaration:return this.dtdElement(C,y,m);case n.EntityDeclaration:return this.dtdEntity(C,y,m);case n.NotationDeclaration:return this.dtdNotation(C,y,m);default:throw new Error("Unknown XML node type: "+C.constructor.name)}},E.prototype.processingInstruction=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m)+"<?",y.state=e.InsideTag,P+=C.target,C.value&&(P+=" "+C.value),y.state=e.CloseTag,P+=y.spaceBeforeSlash+"?>",P+=this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.raw=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m),y.state=e.InsideTag,P+=C.value,y.state=e.CloseTag,P+=this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.text=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m),y.state=e.InsideTag,P+=C.value,y.state=e.CloseTag,P+=this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.dtdAttList=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m)+"<!ATTLIST",y.state=e.InsideTag,P+=" "+C.elementName+" "+C.attributeName+" "+C.attributeType,C.defaultValueType!=="#DEFAULT"&&(P+=" "+C.defaultValueType),C.defaultValue&&(P+=' "'+C.defaultValue+'"'),y.state=e.CloseTag,P+=y.spaceBeforeSlash+">"+this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.dtdElement=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m)+"<!ELEMENT",y.state=e.InsideTag,P+=" "+C.name+" "+C.value,y.state=e.CloseTag,P+=y.spaceBeforeSlash+">"+this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.dtdEntity=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m)+"<!ENTITY",y.state=e.InsideTag,C.pe&&(P+=" %"),P+=" "+C.name,C.value?P+=' "'+C.value+'"':(C.pubID&&C.sysID?P+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(P+=' SYSTEM "'+C.sysID+'"'),C.nData&&(P+=" NDATA "+C.nData)),y.state=e.CloseTag,P+=y.spaceBeforeSlash+">"+this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.dtdNotation=function(C,y,m){var P;return this.openNode(C,y,m),y.state=e.OpenTag,P=this.indent(C,y,m)+"<!NOTATION",y.state=e.InsideTag,P+=" "+C.name,C.pubID&&C.sysID?P+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.pubID?P+=' PUBLIC "'+C.pubID+'"':C.sysID&&(P+=' SYSTEM "'+C.sysID+'"'),y.state=e.CloseTag,P+=y.spaceBeforeSlash+">"+this.endline(C,y,m),y.state=e.None,this.closeNode(C,y,m),P},E.prototype.openNode=function(C,y,m){},E.prototype.closeNode=function(C,y,m){},E.prototype.openAttribute=function(C,y,m){},E.prototype.closeAttribute=function(C,y,m){},E}()}).call(im)});var Os=$((sm,am)=>{(function(){var n,e,t=function(i,o){for(var s in o)r.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},r={}.hasOwnProperty;e=qu(),am.exports=n=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s)}return o.prototype.document=function(s,a){var c,u,l,g,d;for(a=this.filterOptions(a),g="",d=s.children,u=0,l=d.length;u<l;u++)c=d[u],g+=this.writeChildNode(c,a,0);return a.pretty&&g.slice(-a.newline.length)===a.newline&&(g=g.slice(0,-a.newline.length)),g},o}(e)}).call(sm)});var Nu=$((cm,um)=>{(function(){var n,e,t,r,i,o,s,a,c=function(l,g){for(var d in g)u.call(g,d)&&(l[d]=g[d]);function p(){this.constructor=l}return p.prototype=g.prototype,l.prototype=new p,l.__super__=g.prototype,l},u={}.hasOwnProperty;a=tr().isPlainObject,t=xu(),e=dg(),i=_n(),n=Pt(),s=Ou(),o=Os(),um.exports=r=function(l){c(g,l);function g(d){g.__super__.constructor.call(this,null),this.name="#document",this.type=n.Document,this.documentURI=null,this.domConfig=new e,d||(d={}),d.writer||(d.writer=new o),this.options=d,this.stringify=new s(d)}return Object.defineProperty(g.prototype,"implementation",{value:new t}),Object.defineProperty(g.prototype,"doctype",{get:function(){var d,p,h,T;for(T=this.children,p=0,h=T.length;p<h;p++)if(d=T[p],d.type===n.DocType)return d;return null}}),Object.defineProperty(g.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(g.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(g.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(g.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].encoding:null}}),Object.defineProperty(g.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(g.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===n.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(g.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(g.prototype,"origin",{get:function(){return null}}),Object.defineProperty(g.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(g.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(g.prototype,"contentType",{get:function(){return null}}),g.prototype.end=function(d){var p;return p={},d?a(d)&&(p=d,d=this.options.writer):d=this.options.writer,d.document(this,d.filterOptions(p))},g.prototype.toString=function(d){return this.options.writer.document(this,this.options.writer.filterOptions(d))},g.prototype.createElement=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createTextNode=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createComment=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createCDATASection=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createProcessingInstruction=function(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createAttribute=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createEntityReference=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.importNode=function(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createElementNS=function(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createAttributeNS=function(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(d,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementById=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.adoptNode=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.renameNode=function(d,p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByClassName=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createEvent=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createNodeIterator=function(d,p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.createTreeWalker=function(d,p,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g}(i)}).call(cm)});var fm=$((lm,dm)=>{(function(){var n,e,t,r,i,o,s,a,c,u,l,g,d,p,h,T,I,O,E,C,y,m,P,A,S={}.hasOwnProperty;A=tr(),m=A.isObject,y=A.isFunction,P=A.isPlainObject,C=A.getValue,n=Pt(),g=Nu(),p=ws(),r=Cs(),i=Ds(),T=xs(),E=Is(),h=ks(),u=Ss(),l=Es(),o=Ts(),a=_s(),s=Rs(),c=Ps(),t=Iu(),O=Ou(),I=Os(),e=ho(),dm.exports=d=function(){function U(k,H,X){var Z;this.name="?xml",this.type=n.Document,k||(k={}),Z={},k.writer?P(k.writer)&&(Z=k.writer,k.writer=new I):k.writer=new I,this.options=k,this.writer=k.writer,this.writerOptions=this.writer.filterOptions(Z),this.stringify=new O(k),this.onDataCallback=H||function(){},this.onEndCallback=X||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return U.prototype.createChildNode=function(k){var H,X,Z,le,he,ne,qe,me;switch(k.type){case n.CData:this.cdata(k.value);break;case n.Comment:this.comment(k.value);break;case n.Element:Z={},qe=k.attribs;for(X in qe)S.call(qe,X)&&(H=qe[X],Z[X]=H.value);this.node(k.name,Z);break;case n.Dummy:this.dummy();break;case n.Raw:this.raw(k.value);break;case n.Text:this.text(k.value);break;case n.ProcessingInstruction:this.instruction(k.target,k.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+k.constructor.name)}for(me=k.children,he=0,ne=me.length;he<ne;he++)le=me[he],this.createChildNode(le),le.type===n.Element&&this.up();return this},U.prototype.dummy=function(){return this},U.prototype.node=function(k,H,X){var Z;if(k==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(k));return this.openCurrent(),k=C(k),H==null&&(H={}),H=C(H),m(H)||(Z=[H,X],X=Z[0],H=Z[1]),this.currentNode=new p(this,k,H),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,X!=null&&this.text(X),this},U.prototype.element=function(k,H,X){var Z,le,he,ne,qe,me;if(this.currentNode&&this.currentNode.type===n.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(k)||m(k)||y(k))for(ne=this.options.noValidation,this.options.noValidation=!0,me=new g(this.options).element("TEMP_ROOT"),me.element(k),this.options.noValidation=ne,qe=me.children,le=0,he=qe.length;le<he;le++)Z=qe[le],this.createChildNode(Z),Z.type===n.Element&&this.up();else this.node(k,H,X);return this},U.prototype.attribute=function(k,H){var X,Z;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(k));if(k!=null&&(k=C(k)),m(k))for(X in k)S.call(k,X)&&(Z=k[X],this.attribute(X,Z));else y(H)&&(H=H.apply()),this.options.keepNullAttributes&&H==null?this.currentNode.attribs[k]=new t(this,k,""):H!=null&&(this.currentNode.attribs[k]=new t(this,k,H));return this},U.prototype.text=function(k){var H;return this.openCurrent(),H=new E(this,k),this.onData(this.writer.text(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.cdata=function(k){var H;return this.openCurrent(),H=new r(this,k),this.onData(this.writer.cdata(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.comment=function(k){var H;return this.openCurrent(),H=new i(this,k),this.onData(this.writer.comment(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.raw=function(k){var H;return this.openCurrent(),H=new T(this,k),this.onData(this.writer.raw(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.instruction=function(k,H){var X,Z,le,he,ne;if(this.openCurrent(),k!=null&&(k=C(k)),H!=null&&(H=C(H)),Array.isArray(k))for(X=0,he=k.length;X<he;X++)Z=k[X],this.instruction(Z);else if(m(k))for(Z in k)S.call(k,Z)&&(le=k[Z],this.instruction(Z,le));else y(H)&&(H=H.apply()),ne=new h(this,k,H),this.onData(this.writer.processingInstruction(ne,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},U.prototype.declaration=function(k,H,X){var Z;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return Z=new u(this,k,H,X),this.onData(this.writer.declaration(Z,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.doctype=function(k,H,X){if(this.openCurrent(),k==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new l(this,H,X),this.currentNode.rootNodeName=k,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},U.prototype.dtdElement=function(k,H){var X;return this.openCurrent(),X=new s(this,k,H),this.onData(this.writer.dtdElement(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.attList=function(k,H,X,Z,le){var he;return this.openCurrent(),he=new o(this,k,H,X,Z,le),this.onData(this.writer.dtdAttList(he,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.entity=function(k,H){var X;return this.openCurrent(),X=new a(this,!1,k,H),this.onData(this.writer.dtdEntity(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.pEntity=function(k,H){var X;return this.openCurrent(),X=new a(this,!0,k,H),this.onData(this.writer.dtdEntity(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.notation=function(k,H){var X;return this.openCurrent(),X=new c(this,k,H),this.onData(this.writer.dtdNotation(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},U.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},U.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},U.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},U.prototype.openNode=function(k){var H,X,Z,le;if(!k.isOpen){if(!this.root&&this.currentLevel===0&&k.type===n.Element&&(this.root=k),X="",k.type===n.Element){this.writerOptions.state=e.OpenTag,X=this.writer.indent(k,this.writerOptions,this.currentLevel)+"<"+k.name,le=k.attribs;for(Z in le)S.call(le,Z)&&(H=le[Z],X+=this.writer.attribute(H,this.writerOptions,this.currentLevel));X+=(k.children?">":"/>")+this.writer.endline(k,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,X=this.writer.indent(k,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+k.rootNodeName,k.pubID&&k.sysID?X+=' PUBLIC "'+k.pubID+'" "'+k.sysID+'"':k.sysID&&(X+=' SYSTEM "'+k.sysID+'"'),k.children?(X+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,X+=">"),X+=this.writer.endline(k,this.writerOptions,this.currentLevel);return this.onData(X,this.currentLevel),k.isOpen=!0}},U.prototype.closeNode=function(k){var H;if(!k.isClosed)return H="",this.writerOptions.state=e.CloseTag,k.type===n.Element?H=this.writer.indent(k,this.writerOptions,this.currentLevel)+"</"+k.name+">"+this.writer.endline(k,this.writerOptions,this.currentLevel):H=this.writer.indent(k,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(k,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(H,this.currentLevel),k.isClosed=!0},U.prototype.onData=function(k,H){return this.documentStarted=!0,this.onDataCallback(k,H+1)},U.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},U.prototype.debugInfo=function(k){return k==null?"":"node: <"+k+">"},U.prototype.ele=function(){return this.element.apply(this,arguments)},U.prototype.nod=function(k,H,X){return this.node(k,H,X)},U.prototype.txt=function(k){return this.text(k)},U.prototype.dat=function(k){return this.cdata(k)},U.prototype.com=function(k){return this.comment(k)},U.prototype.ins=function(k,H){return this.instruction(k,H)},U.prototype.dec=function(k,H,X){return this.declaration(k,H,X)},U.prototype.dtd=function(k,H,X){return this.doctype(k,H,X)},U.prototype.e=function(k,H,X){return this.element(k,H,X)},U.prototype.n=function(k,H,X){return this.node(k,H,X)},U.prototype.t=function(k){return this.text(k)},U.prototype.d=function(k){return this.cdata(k)},U.prototype.c=function(k){return this.comment(k)},U.prototype.r=function(k){return this.raw(k)},U.prototype.i=function(k,H){return this.instruction(k,H)},U.prototype.att=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},U.prototype.a=function(){return this.currentNode&&this.currentNode.type===n.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},U.prototype.ent=function(k,H){return this.entity(k,H)},U.prototype.pent=function(k,H){return this.pEntity(k,H)},U.prototype.not=function(k,H){return this.notation(k,H)},U}()}).call(lm)});var gm=$((hm,pm)=>{(function(){var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;n=Pt(),r=qu(),e=ho(),pm.exports=t=function(s){i(a,s);function a(c,u){this.stream=c,a.__super__.constructor.call(this,u)}return a.prototype.endline=function(c,u,l){return c.isLastRootNode&&u.state===e.CloseTag?"":a.__super__.endline.call(this,c,u,l)},a.prototype.document=function(c,u){var l,g,d,p,h,T,I,O,E;for(I=c.children,g=d=0,h=I.length;d<h;g=++d)l=I[g],l.isLastRootNode=g===c.children.length-1;for(u=this.filterOptions(u),O=c.children,E=[],p=0,T=O.length;p<T;p++)l=O[p],E.push(this.writeChildNode(l,u,0));return E},a.prototype.attribute=function(c,u,l){return this.stream.write(a.__super__.attribute.call(this,c,u,l))},a.prototype.cdata=function(c,u,l){return this.stream.write(a.__super__.cdata.call(this,c,u,l))},a.prototype.comment=function(c,u,l){return this.stream.write(a.__super__.comment.call(this,c,u,l))},a.prototype.declaration=function(c,u,l){return this.stream.write(a.__super__.declaration.call(this,c,u,l))},a.prototype.docType=function(c,u,l){var g,d,p,h;if(l||(l=0),this.openNode(c,u,l),u.state=e.OpenTag,this.stream.write(this.indent(c,u,l)),this.stream.write("<!DOCTYPE "+c.root().name),c.pubID&&c.sysID?this.stream.write(' PUBLIC "'+c.pubID+'" "'+c.sysID+'"'):c.sysID&&this.stream.write(' SYSTEM "'+c.sysID+'"'),c.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(c,u,l)),u.state=e.InsideTag,h=c.children,d=0,p=h.length;d<p;d++)g=h[d],this.writeChildNode(g,u,l+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(c,u,l)),u.state=e.None,this.closeNode(c,u,l)},a.prototype.element=function(c,u,l){var g,d,p,h,T,I,O,E,C,y;l||(l=0),this.openNode(c,u,l),u.state=e.OpenTag,this.stream.write(this.indent(c,u,l)+"<"+c.name),C=c.attribs;for(O in C)o.call(C,O)&&(g=C[O],this.attribute(g,u,l));if(p=c.children.length,h=p===0?null:c.children[0],p===0||c.children.every(function(m){return(m.type===n.Text||m.type===n.Raw)&&m.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+c.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&p===1&&(h.type===n.Text||h.type===n.Raw)&&h.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,E=!0,this.writeChildNode(h,u,l+1),u.suppressPrettyCount--,E=!1,u.state=e.CloseTag,this.stream.write("</"+c.name+">");else{for(this.stream.write(">"+this.endline(c,u,l)),u.state=e.InsideTag,y=c.children,T=0,I=y.length;T<I;T++)d=y[T],this.writeChildNode(d,u,l+1);u.state=e.CloseTag,this.stream.write(this.indent(c,u,l)+"</"+c.name+">")}return this.stream.write(this.endline(c,u,l)),u.state=e.None,this.closeNode(c,u,l)},a.prototype.processingInstruction=function(c,u,l){return this.stream.write(a.__super__.processingInstruction.call(this,c,u,l))},a.prototype.raw=function(c,u,l){return this.stream.write(a.__super__.raw.call(this,c,u,l))},a.prototype.text=function(c,u,l){return this.stream.write(a.__super__.text.call(this,c,u,l))},a.prototype.dtdAttList=function(c,u,l){return this.stream.write(a.__super__.dtdAttList.call(this,c,u,l))},a.prototype.dtdElement=function(c,u,l){return this.stream.write(a.__super__.dtdElement.call(this,c,u,l))},a.prototype.dtdEntity=function(c,u,l){return this.stream.write(a.__super__.dtdEntity.call(this,c,u,l))},a.prototype.dtdNotation=function(c,u,l){return this.stream.write(a.__super__.dtdNotation.call(this,c,u,l))},a}(r)}).call(hm)});var ym=$((mm,qr)=>{(function(){var n,e,t,r,i,o,s,a,c,u;u=tr(),a=u.assign,c=u.isFunction,t=xu(),r=Nu(),i=fm(),s=Os(),o=gm(),n=Pt(),e=ho(),qr.exports.create=function(l,g,d,p){var h,T;if(l==null)throw new Error("Root element needs a name.");return p=a({},g,d,p),h=new r(p),T=h.element(l),p.headless||(h.declaration(p),(p.pubID!=null||p.sysID!=null)&&h.dtd(p)),T},qr.exports.begin=function(l,g,d){var p;return c(l)&&(p=[l,g],g=p[0],d=p[1],l={}),g?new i(l,g,d):new r(l)},qr.exports.stringWriter=function(l){return new s(l)},qr.exports.streamWriter=function(l,g){return new o(l,g)},qr.exports.implementation=new t,qr.exports.nodeType=n,qr.exports.writerState=e}).call(mm)});var vm=$(Lu=>{(function(){"use strict";var n,e,t,r,i,o={}.hasOwnProperty;n=ym(),e=vs().defaults,r=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},i=function(s){return"<![CDATA["+t(s)+"]]>"},t=function(s){return s.replace("]]>","]]]]><![CDATA[>")},Lu.Builder=function(){function s(a){var c,u,l;this.options={},u=e["0.2"];for(c in u)o.call(u,c)&&(l=u[c],this.options[c]=l);for(c in a)o.call(a,c)&&(l=a[c],this.options[c]=l)}return s.prototype.buildObject=function(a){var c,u,l,g,d;return c=this.options.attrkey,u=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(d=Object.keys(a)[0],a=a[d]):d=this.options.rootName,l=function(p){return function(h,T){var I,O,E,C,y,m;if(typeof T!="object")p.options.cdata&&r(T)?h.raw(i(T)):h.txt(T);else if(Array.isArray(T)){for(C in T)if(o.call(T,C)){O=T[C];for(y in O)E=O[y],h=l(h.ele(y),E).up()}}else for(y in T)if(o.call(T,y))if(O=T[y],y===c){if(typeof O=="object")for(I in O)m=O[I],h=h.att(I,m)}else if(y===u)p.options.cdata&&r(O)?h=h.raw(i(O)):h=h.txt(O);else if(Array.isArray(O))for(C in O)o.call(O,C)&&(E=O[C],typeof E=="string"?p.options.cdata&&r(E)?h=h.ele(y).raw(i(E)).up():h=h.ele(y,E).up():h=l(h.ele(y),E).up());else typeof O=="object"?h=l(h.ele(y),O).up():typeof O=="string"&&p.options.cdata&&r(O)?h=h.ele(y).raw(i(O)).up():(O==null&&(O=""),h=h.ele(y,O.toString()).up());return h}}(this),g=n.create(d,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(g,a).end(this.options.renderOpts)},s}()}).call(Lu)});var bm=$(qs=>{(function(n){n.parser=function(_,D){return new t(_,D)},n.SAXParser=t,n.SAXStream=u,n.createStream=c,n.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(_,D){if(!(this instanceof t))return new t(_,D);var V=this;i(V),V.q=V.c="",V.bufferCheckPosition=n.MAX_BUFFER_LENGTH,V.opt=D||{},V.opt.lowercase=V.opt.lowercase||V.opt.lowercasetags,V.looseCase=V.opt.lowercase?"toLowerCase":"toUpperCase",V.tags=[],V.closed=V.closedRoot=V.sawRoot=!1,V.tag=V.error=null,V.strict=!!_,V.noscript=!!(_||V.opt.noscript),V.state=S.BEGIN,V.strictEntities=V.opt.strictEntities,V.ENTITIES=V.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),V.attribList=[],V.opt.xmlns&&(V.ns=Object.create(h)),V.trackPosition=V.opt.position!==!1,V.trackPosition&&(V.position=V.line=V.column=0),k(V,"onready")}Object.create||(Object.create=function(_){function D(){}D.prototype=_;var V=new D;return V}),Object.keys||(Object.keys=function(_){var D=[];for(var V in _)_.hasOwnProperty(V)&&D.push(V);return D});function r(_){for(var D=Math.max(n.MAX_BUFFER_LENGTH,10),V=0,j=0,ye=e.length;j<ye;j++){var Ne=_[e[j]].length;if(Ne>D)switch(e[j]){case"textNode":X(_);break;case"cdata":H(_,"oncdata",_.cdata),_.cdata="";break;case"script":H(_,"onscript",_.script),_.script="";break;default:le(_,"Max buffer length exceeded: "+e[j])}V=Math.max(V,Ne)}var ve=n.MAX_BUFFER_LENGTH-V;_.bufferCheckPosition=ve+_.position}function i(_){for(var D=0,V=e.length;D<V;D++)_[e[D]]=""}function o(_){X(_),_.cdata!==""&&(H(_,"oncdata",_.cdata),_.cdata=""),_.script!==""&&(H(_,"onscript",_.script),_.script="")}t.prototype={end:function(){he(this)},write:wt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}var a=n.EVENTS.filter(function(_){return _!=="error"&&_!=="end"});function c(_,D){return new u(_,D)}function u(_,D){if(!(this instanceof u))return new u(_,D);s.apply(this),this._parser=new t(_,D),this.writable=!0,this.readable=!0;var V=this;this._parser.onend=function(){V.emit("end")},this._parser.onerror=function(j){V.emit("error",j),V._parser.error=null},this._decoder=null,a.forEach(function(j){Object.defineProperty(V,"on"+j,{get:function(){return V._parser["on"+j]},set:function(ye){if(!ye)return V.removeAllListeners(j),V._parser["on"+j]=ye,ye;V.on(j,ye)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(s.prototype,{constructor:{value:u}}),u.prototype.write=function(_){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(_)){if(!this._decoder){var D=require("string_decoder").StringDecoder;this._decoder=new D("utf8")}_=this._decoder.write(_)}return this._parser.write(_.toString()),this.emit("data",_),!0},u.prototype.end=function(_){return _&&_.length&&this.write(_),this._parser.end(),!0},u.prototype.on=function(_,D){var V=this;return!V._parser["on"+_]&&a.indexOf(_)!==-1&&(V._parser["on"+_]=function(){var j=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);j.splice(0,0,_),V.emit.apply(V,j)}),s.prototype.on.call(V,_,D)};var l="[CDATA[",g="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",h={xml:d,xmlns:p},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function C(_){return _===" "||_===`
`||_==="\r"||_==="	"}function y(_){return _==='"'||_==="'"}function m(_){return _===">"||C(_)}function P(_,D){return _.test(D)}function A(_,D){return!P(_,D)}var S=0;n.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(_){var D=n.ENTITIES[_],V=typeof D=="number"?String.fromCharCode(D):D;n.ENTITIES[_]=V});for(var U in n.STATE)n.STATE[n.STATE[U]]=U;S=n.STATE;function k(_,D,V){_[D]&&_[D](V)}function H(_,D,V){_.textNode&&X(_),k(_,D,V)}function X(_){_.textNode=Z(_.opt,_.textNode),_.textNode&&k(_,"ontext",_.textNode),_.textNode=""}function Z(_,D){return _.trim&&(D=D.trim()),_.normalize&&(D=D.replace(/\s+/g," ")),D}function le(_,D){return X(_),_.trackPosition&&(D+=`
Line: `+_.line+`
Column: `+_.column+`
Char: `+_.c),D=new Error(D),_.error=D,k(_,"onerror",D),_}function he(_){return _.sawRoot&&!_.closedRoot&&ne(_,"Unclosed root tag"),_.state!==S.BEGIN&&_.state!==S.BEGIN_WHITESPACE&&_.state!==S.TEXT&&le(_,"Unexpected end"),X(_),_.c="",_.closed=!0,k(_,"onend"),t.call(_,_.strict,_.opt),_}function ne(_,D){if(typeof _!="object"||!(_ instanceof t))throw new Error("bad call to strictFail");_.strict&&le(_,D)}function qe(_){_.strict||(_.tagName=_.tagName[_.looseCase]());var D=_.tags[_.tags.length-1]||_,V=_.tag={name:_.tagName,attributes:{}};_.opt.xmlns&&(V.ns=D.ns),_.attribList.length=0,H(_,"onopentagstart",V)}function me(_,D){var V=_.indexOf(":"),j=V<0?["",_]:_.split(":"),ye=j[0],Ne=j[1];return D&&_==="xmlns"&&(ye="xmlns",Ne=""),{prefix:ye,local:Ne}}function Ee(_){if(_.strict||(_.attribName=_.attribName[_.looseCase]()),_.attribList.indexOf(_.attribName)!==-1||_.tag.attributes.hasOwnProperty(_.attribName)){_.attribName=_.attribValue="";return}if(_.opt.xmlns){var D=me(_.attribName,!0),V=D.prefix,j=D.local;if(V==="xmlns")if(j==="xml"&&_.attribValue!==d)ne(_,"xml: prefix must be bound to "+d+`
Actual: `+_.attribValue);else if(j==="xmlns"&&_.attribValue!==p)ne(_,"xmlns: prefix must be bound to "+p+`
Actual: `+_.attribValue);else{var ye=_.tag,Ne=_.tags[_.tags.length-1]||_;ye.ns===Ne.ns&&(ye.ns=Object.create(Ne.ns)),ye.ns[j]=_.attribValue}_.attribList.push([_.attribName,_.attribValue])}else _.tag.attributes[_.attribName]=_.attribValue,H(_,"onattribute",{name:_.attribName,value:_.attribValue});_.attribName=_.attribValue=""}function Xe(_,D){if(_.opt.xmlns){var V=_.tag,j=me(_.tagName);V.prefix=j.prefix,V.local=j.local,V.uri=V.ns[j.prefix]||"",V.prefix&&!V.uri&&(ne(_,"Unbound namespace prefix: "+JSON.stringify(_.tagName)),V.uri=j.prefix);var ye=_.tags[_.tags.length-1]||_;V.ns&&ye.ns!==V.ns&&Object.keys(V.ns).forEach(function(xt){H(_,"onopennamespace",{prefix:xt,uri:V.ns[xt]})});for(var Ne=0,ve=_.attribList.length;Ne<ve;Ne++){var Ue=_.attribList[Ne],Le=Ue[0],et=Ue[1],rt=me(Le,!0),Ct=rt.prefix,qn=rt.local,ut=Ct===""?"":V.ns[Ct]||"",Et={name:Le,value:et,prefix:Ct,local:qn,uri:ut};Ct&&Ct!=="xmlns"&&!ut&&(ne(_,"Unbound namespace prefix: "+JSON.stringify(Ct)),Et.uri=Ct),_.tag.attributes[Le]=Et,H(_,"onattribute",Et)}_.attribList.length=0}_.tag.isSelfClosing=!!D,_.sawRoot=!0,_.tags.push(_.tag),H(_,"onopentag",_.tag),D||(!_.noscript&&_.tagName.toLowerCase()==="script"?_.state=S.SCRIPT:_.state=S.TEXT,_.tag=null,_.tagName=""),_.attribName=_.attribValue="",_.attribList.length=0}function vt(_){if(!_.tagName){ne(_,"Weird empty close tag."),_.textNode+="</>",_.state=S.TEXT;return}if(_.script){if(_.tagName!=="script"){_.script+="</"+_.tagName+">",_.tagName="",_.state=S.SCRIPT;return}H(_,"onscript",_.script),_.script=""}var D=_.tags.length,V=_.tagName;_.strict||(V=V[_.looseCase]());for(var j=V;D--;){var ye=_.tags[D];if(ye.name!==j)ne(_,"Unexpected close tag");else break}if(D<0){ne(_,"Unmatched closing tag: "+_.tagName),_.textNode+="</"+_.tagName+">",_.state=S.TEXT;return}_.tagName=V;for(var Ne=_.tags.length;Ne-- >D;){var ve=_.tag=_.tags.pop();_.tagName=_.tag.name,H(_,"onclosetag",_.tagName);var Ue={};for(var Le in ve.ns)Ue[Le]=ve.ns[Le];var et=_.tags[_.tags.length-1]||_;_.opt.xmlns&&ve.ns!==et.ns&&Object.keys(ve.ns).forEach(function(rt){var Ct=ve.ns[rt];H(_,"onclosenamespace",{prefix:rt,uri:Ct})})}D===0&&(_.closedRoot=!0),_.tagName=_.attribValue=_.attribName="",_.attribList.length=0,_.state=S.TEXT}function bt(_){var D=_.entity,V=D.toLowerCase(),j,ye="";return _.ENTITIES[D]?_.ENTITIES[D]:_.ENTITIES[V]?_.ENTITIES[V]:(D=V,D.charAt(0)==="#"&&(D.charAt(1)==="x"?(D=D.slice(2),j=parseInt(D,16),ye=j.toString(16)):(D=D.slice(1),j=parseInt(D,10),ye=j.toString(10))),D=D.replace(/^0+/,""),isNaN(j)||ye.toLowerCase()!==D?(ne(_,"Invalid character entity"),"&"+_.entity+";"):String.fromCodePoint(j))}function on(_,D){D==="<"?(_.state=S.OPEN_WAKA,_.startTagPosition=_.position):C(D)||(ne(_,"Non-whitespace before first tag."),_.textNode=D,_.state=S.TEXT)}function Wt(_,D){var V="";return D<_.length&&(V=_.charAt(D)),V}function wt(_){var D=this;if(this.error)throw this.error;if(D.closed)return le(D,"Cannot write after close. Assign an onready handler.");if(_===null)return he(D);typeof _=="object"&&(_=_.toString());for(var V=0,j="";j=Wt(_,V++),D.c=j,!!j;)switch(D.trackPosition&&(D.position++,j===`
`?(D.line++,D.column=0):D.column++),D.state){case S.BEGIN:if(D.state=S.BEGIN_WHITESPACE,j==="\uFEFF")continue;on(D,j);continue;case S.BEGIN_WHITESPACE:on(D,j);continue;case S.TEXT:if(D.sawRoot&&!D.closedRoot){for(var ye=V-1;j&&j!=="<"&&j!=="&";)j=Wt(_,V++),j&&D.trackPosition&&(D.position++,j===`
`?(D.line++,D.column=0):D.column++);D.textNode+=_.substring(ye,V-1)}j==="<"&&!(D.sawRoot&&D.closedRoot&&!D.strict)?(D.state=S.OPEN_WAKA,D.startTagPosition=D.position):(!C(j)&&(!D.sawRoot||D.closedRoot)&&ne(D,"Text data outside of root node."),j==="&"?D.state=S.TEXT_ENTITY:D.textNode+=j);continue;case S.SCRIPT:j==="<"?D.state=S.SCRIPT_ENDING:D.script+=j;continue;case S.SCRIPT_ENDING:j==="/"?D.state=S.CLOSE_TAG:(D.script+="<"+j,D.state=S.SCRIPT);continue;case S.OPEN_WAKA:if(j==="!")D.state=S.SGML_DECL,D.sgmlDecl="";else if(!C(j))if(P(T,j))D.state=S.OPEN_TAG,D.tagName=j;else if(j==="/")D.state=S.CLOSE_TAG,D.tagName="";else if(j==="?")D.state=S.PROC_INST,D.procInstName=D.procInstBody="";else{if(ne(D,"Unencoded <"),D.startTagPosition+1<D.position){var Ne=D.position-D.startTagPosition;j=new Array(Ne).join(" ")+j}D.textNode+="<"+j,D.state=S.TEXT}continue;case S.SGML_DECL:(D.sgmlDecl+j).toUpperCase()===l?(H(D,"onopencdata"),D.state=S.CDATA,D.sgmlDecl="",D.cdata=""):D.sgmlDecl+j==="--"?(D.state=S.COMMENT,D.comment="",D.sgmlDecl=""):(D.sgmlDecl+j).toUpperCase()===g?(D.state=S.DOCTYPE,(D.doctype||D.sawRoot)&&ne(D,"Inappropriately located doctype declaration"),D.doctype="",D.sgmlDecl=""):j===">"?(H(D,"onsgmldeclaration",D.sgmlDecl),D.sgmlDecl="",D.state=S.TEXT):(y(j)&&(D.state=S.SGML_DECL_QUOTED),D.sgmlDecl+=j);continue;case S.SGML_DECL_QUOTED:j===D.q&&(D.state=S.SGML_DECL,D.q=""),D.sgmlDecl+=j;continue;case S.DOCTYPE:j===">"?(D.state=S.TEXT,H(D,"ondoctype",D.doctype),D.doctype=!0):(D.doctype+=j,j==="["?D.state=S.DOCTYPE_DTD:y(j)&&(D.state=S.DOCTYPE_QUOTED,D.q=j));continue;case S.DOCTYPE_QUOTED:D.doctype+=j,j===D.q&&(D.q="",D.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:D.doctype+=j,j==="]"?D.state=S.DOCTYPE:y(j)&&(D.state=S.DOCTYPE_DTD_QUOTED,D.q=j);continue;case S.DOCTYPE_DTD_QUOTED:D.doctype+=j,j===D.q&&(D.state=S.DOCTYPE_DTD,D.q="");continue;case S.COMMENT:j==="-"?D.state=S.COMMENT_ENDING:D.comment+=j;continue;case S.COMMENT_ENDING:j==="-"?(D.state=S.COMMENT_ENDED,D.comment=Z(D.opt,D.comment),D.comment&&H(D,"oncomment",D.comment),D.comment=""):(D.comment+="-"+j,D.state=S.COMMENT);continue;case S.COMMENT_ENDED:j!==">"?(ne(D,"Malformed comment"),D.comment+="--"+j,D.state=S.COMMENT):D.state=S.TEXT;continue;case S.CDATA:j==="]"?D.state=S.CDATA_ENDING:D.cdata+=j;continue;case S.CDATA_ENDING:j==="]"?D.state=S.CDATA_ENDING_2:(D.cdata+="]"+j,D.state=S.CDATA);continue;case S.CDATA_ENDING_2:j===">"?(D.cdata&&H(D,"oncdata",D.cdata),H(D,"onclosecdata"),D.cdata="",D.state=S.TEXT):j==="]"?D.cdata+="]":(D.cdata+="]]"+j,D.state=S.CDATA);continue;case S.PROC_INST:j==="?"?D.state=S.PROC_INST_ENDING:C(j)?D.state=S.PROC_INST_BODY:D.procInstName+=j;continue;case S.PROC_INST_BODY:if(!D.procInstBody&&C(j))continue;j==="?"?D.state=S.PROC_INST_ENDING:D.procInstBody+=j;continue;case S.PROC_INST_ENDING:j===">"?(H(D,"onprocessinginstruction",{name:D.procInstName,body:D.procInstBody}),D.procInstName=D.procInstBody="",D.state=S.TEXT):(D.procInstBody+="?"+j,D.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:P(I,j)?D.tagName+=j:(qe(D),j===">"?Xe(D):j==="/"?D.state=S.OPEN_TAG_SLASH:(C(j)||ne(D,"Invalid character in tag name"),D.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:j===">"?(Xe(D,!0),vt(D)):(ne(D,"Forward-slash in opening tag not followed by >"),D.state=S.ATTRIB);continue;case S.ATTRIB:if(C(j))continue;j===">"?Xe(D):j==="/"?D.state=S.OPEN_TAG_SLASH:P(T,j)?(D.attribName=j,D.attribValue="",D.state=S.ATTRIB_NAME):ne(D,"Invalid attribute name");continue;case S.ATTRIB_NAME:j==="="?D.state=S.ATTRIB_VALUE:j===">"?(ne(D,"Attribute without value"),D.attribValue=D.attribName,Ee(D),Xe(D)):C(j)?D.state=S.ATTRIB_NAME_SAW_WHITE:P(I,j)?D.attribName+=j:ne(D,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if(j==="=")D.state=S.ATTRIB_VALUE;else{if(C(j))continue;ne(D,"Attribute without value"),D.tag.attributes[D.attribName]="",D.attribValue="",H(D,"onattribute",{name:D.attribName,value:""}),D.attribName="",j===">"?Xe(D):P(T,j)?(D.attribName=j,D.state=S.ATTRIB_NAME):(ne(D,"Invalid attribute name"),D.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(C(j))continue;y(j)?(D.q=j,D.state=S.ATTRIB_VALUE_QUOTED):(ne(D,"Unquoted attribute value"),D.state=S.ATTRIB_VALUE_UNQUOTED,D.attribValue=j);continue;case S.ATTRIB_VALUE_QUOTED:if(j!==D.q){j==="&"?D.state=S.ATTRIB_VALUE_ENTITY_Q:D.attribValue+=j;continue}Ee(D),D.q="",D.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:C(j)?D.state=S.ATTRIB:j===">"?Xe(D):j==="/"?D.state=S.OPEN_TAG_SLASH:P(T,j)?(ne(D,"No whitespace between attributes"),D.attribName=j,D.attribValue="",D.state=S.ATTRIB_NAME):ne(D,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!m(j)){j==="&"?D.state=S.ATTRIB_VALUE_ENTITY_U:D.attribValue+=j;continue}Ee(D),j===">"?Xe(D):D.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(D.tagName)j===">"?vt(D):P(I,j)?D.tagName+=j:D.script?(D.script+="</"+D.tagName,D.tagName="",D.state=S.SCRIPT):(C(j)||ne(D,"Invalid tagname in closing tag"),D.state=S.CLOSE_TAG_SAW_WHITE);else{if(C(j))continue;A(T,j)?D.script?(D.script+="</"+j,D.state=S.SCRIPT):ne(D,"Invalid tagname in closing tag."):D.tagName=j}continue;case S.CLOSE_TAG_SAW_WHITE:if(C(j))continue;j===">"?vt(D):ne(D,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var ve,Ue;switch(D.state){case S.TEXT_ENTITY:ve=S.TEXT,Ue="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:ve=S.ATTRIB_VALUE_QUOTED,Ue="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:ve=S.ATTRIB_VALUE_UNQUOTED,Ue="attribValue";break}j===";"?(D[Ue]+=bt(D),D.entity="",D.state=ve):P(D.entity.length?E:O,j)?D.entity+=j:(ne(D,"Invalid character in entity name"),D[Ue]+="&"+D.entity+j,D.entity="",D.state=ve);continue;default:throw new Error(D,"Unknown state: "+D.state)}return D.position>=D.bufferCheckPosition&&r(D),D}String.fromCodePoint||function(){var _=String.fromCharCode,D=Math.floor,V=function(){var j=16384,ye=[],Ne,ve,Ue=-1,Le=arguments.length;if(!Le)return"";for(var et="";++Ue<Le;){var rt=Number(arguments[Ue]);if(!isFinite(rt)||rt<0||rt>1114111||D(rt)!==rt)throw RangeError("Invalid code point: "+rt);rt<=65535?ye.push(rt):(rt-=65536,Ne=(rt>>10)+55296,ve=rt%1024+56320,ye.push(Ne,ve)),(Ue+1===Le||ye.length>j)&&(et+=_.apply(null,ye),ye.length=0)}return et};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:V,configurable:!0,writable:!0}):String.fromCodePoint=V}()})(typeof qs>"u"?qs.sax={}:qs)});var wm=$(Au=>{(function(){"use strict";Au.stripBOM=function(n){return n[0]==="\uFEFF"?n.substring(1):n}}).call(Au)});var Fu=$(ei=>{(function(){"use strict";var n;n=new RegExp(/(?!xmlns)^.*:/),ei.normalize=function(e){return e.toLowerCase()},ei.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ei.stripPrefix=function(e){return e.replace(n,"")},ei.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},ei.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(ei)});var Cm=$(gr=>{(function(){"use strict";var n,e,t,r,i,o,s,a,c,u=function(d,p){return function(){return d.apply(p,arguments)}},l=function(d,p){for(var h in p)g.call(p,h)&&(d[h]=p[h]);function T(){this.constructor=d}return T.prototype=p.prototype,d.prototype=new T,d.__super__=p.prototype,d},g={}.hasOwnProperty;a=bm(),r=require("events"),n=wm(),s=Fu(),c=require("timers").setImmediate,e=vs().defaults,i=function(d){return typeof d=="object"&&d!=null&&Object.keys(d).length===0},o=function(d,p,h){var T,I,O;for(T=0,I=d.length;T<I;T++)O=d[T],p=O(p,h);return p},t=function(d,p,h){var T;return T=Object.create(null),T.value=h,T.writable=!0,T.enumerable=!0,T.configurable=!0,Object.defineProperty(d,p,T)},gr.Parser=function(d){l(p,d);function p(h){this.parseStringPromise=u(this.parseStringPromise,this),this.parseString=u(this.parseString,this),this.reset=u(this.reset,this),this.assignOrPush=u(this.assignOrPush,this),this.processAsync=u(this.processAsync,this);var T,I,O;if(!(this instanceof gr.Parser))return new gr.Parser(h);this.options={},I=e["0.2"];for(T in I)g.call(I,T)&&(O=I[T],this.options[T]=O);for(T in h)g.call(h,T)&&(O=h[T],this.options[T]=O);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return p.prototype.processAsync=function(){var h,T;try{return this.remaining.length<=this.options.chunkSize?(h=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(h),this.saxParser.close()):(h=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(h),c(this.processAsync))}catch(I){if(T=I,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(T)}},p.prototype.assignOrPush=function(h,T,I){return T in h?(h[T]instanceof Array||t(h,T,[h[T]]),h[T].push(I)):this.options.explicitArray?t(h,T,[I]):t(h,T,I)},p.prototype.reset=function(){var h,T,I,O;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(E){return function(C){if(E.saxParser.resume(),!E.saxParser.errThrown)return E.saxParser.errThrown=!0,E.emit("error",C)}}(this),this.saxParser.onend=function(E){return function(){if(!E.saxParser.ended)return E.saxParser.ended=!0,E.emit("end",E.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,O=[],h=this.options.attrkey,T=this.options.charkey,this.saxParser.onopentag=function(E){return function(C){var y,m,P,A,S;if(P={},P[T]="",!E.options.ignoreAttrs){S=C.attributes;for(y in S)g.call(S,y)&&(!(h in P)&&!E.options.mergeAttrs&&(P[h]={}),m=E.options.attrValueProcessors?o(E.options.attrValueProcessors,C.attributes[y],y):C.attributes[y],A=E.options.attrNameProcessors?o(E.options.attrNameProcessors,y):y,E.options.mergeAttrs?E.assignOrPush(P,A,m):t(P[h],A,m))}return P["#name"]=E.options.tagNameProcessors?o(E.options.tagNameProcessors,C.name):C.name,E.options.xmlns&&(P[E.options.xmlnskey]={uri:C.uri,local:C.local}),O.push(P)}}(this),this.saxParser.onclosetag=function(E){return function(){var C,y,m,P,A,S,U,k,H,X;if(S=O.pop(),A=S["#name"],(!E.options.explicitChildren||!E.options.preserveChildrenOrder)&&delete S["#name"],S.cdata===!0&&(C=S.cdata,delete S.cdata),H=O[O.length-1],S[T].match(/^\s*$/)&&!C?(y=S[T],delete S[T]):(E.options.trim&&(S[T]=S[T].trim()),E.options.normalize&&(S[T]=S[T].replace(/\s{2,}/g," ").trim()),S[T]=E.options.valueProcessors?o(E.options.valueProcessors,S[T],A):S[T],Object.keys(S).length===1&&T in S&&!E.EXPLICIT_CHARKEY&&(S=S[T])),i(S)&&(typeof E.options.emptyTag=="function"?S=E.options.emptyTag():S=E.options.emptyTag!==""?E.options.emptyTag:y),E.options.validator!=null&&(X="/"+function(){var Z,le,he;for(he=[],Z=0,le=O.length;Z<le;Z++)P=O[Z],he.push(P["#name"]);return he}().concat(A).join("/"),function(){var Z;try{return S=E.options.validator(X,H&&H[A],S)}catch(le){return Z=le,E.emit("error",Z)}}()),E.options.explicitChildren&&!E.options.mergeAttrs&&typeof S=="object"){if(!E.options.preserveChildrenOrder)P={},E.options.attrkey in S&&(P[E.options.attrkey]=S[E.options.attrkey],delete S[E.options.attrkey]),!E.options.charsAsChildren&&E.options.charkey in S&&(P[E.options.charkey]=S[E.options.charkey],delete S[E.options.charkey]),Object.getOwnPropertyNames(S).length>0&&(P[E.options.childkey]=S),S=P;else if(H){H[E.options.childkey]=H[E.options.childkey]||[],U={};for(m in S)g.call(S,m)&&t(U,m,S[m]);H[E.options.childkey].push(U),delete S["#name"],Object.keys(S).length===1&&T in S&&!E.EXPLICIT_CHARKEY&&(S=S[T])}}return O.length>0?E.assignOrPush(H,A,S):(E.options.explicitRoot&&(k=S,S={},t(S,A,k)),E.resultObject=S,E.saxParser.ended=!0,E.emit("end",E.resultObject))}}(this),I=function(E){return function(C){var y,m;if(m=O[O.length-1],m)return m[T]+=C,E.options.explicitChildren&&E.options.preserveChildrenOrder&&E.options.charsAsChildren&&(E.options.includeWhiteChars||C.replace(/\\n/g,"").trim()!=="")&&(m[E.options.childkey]=m[E.options.childkey]||[],y={"#name":"__text__"},y[T]=C,E.options.normalize&&(y[T]=y[T].replace(/\s{2,}/g," ").trim()),m[E.options.childkey].push(y)),m}}(this),this.saxParser.ontext=I,this.saxParser.oncdata=function(E){return function(C){var y;if(y=I(C),y)return y.cdata=!0}}(this)},p.prototype.parseString=function(h,T){var I;T!=null&&typeof T=="function"&&(this.on("end",function(O){return this.reset(),T(null,O)}),this.on("error",function(O){return this.reset(),T(O)}));try{return h=h.toString(),h.trim()===""?(this.emit("end",null),!0):(h=n.stripBOM(h),this.options.async?(this.remaining=h,c(this.processAsync),this.saxParser):this.saxParser.write(h).close())}catch(O){if(I=O,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw I}else return this.emit("error",I),this.saxParser.errThrown=!0}},p.prototype.parseStringPromise=function(h){return new Promise(function(T){return function(I,O){return T.parseString(h,function(E,C){return E?O(E):I(C)})}}(this))},p}(r),gr.parseString=function(d,p,h){var T,I,O;return h!=null?(typeof h=="function"&&(T=h),typeof p=="object"&&(I=p)):(typeof p=="function"&&(T=p),I={}),O=new gr.Parser(I),O.parseString(d,T)},gr.parseStringPromise=function(d,p){var h,T;return typeof p=="object"&&(h=p),T=new gr.Parser(h),T.parseStringPromise(d)}}).call(gr)});var Dm=$(mr=>{(function(){"use strict";var n,e,t,r,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;e=vs(),n=vm(),t=Cm(),r=Fu(),mr.defaults=e.defaults,mr.processors=r,mr.ValidationError=function(s){i(a,s);function a(c){this.message=c}return a}(Error),mr.Builder=n.Builder,mr.Parser=t.Parser,mr.parseString=t.parseString,mr.parseStringPromise=t.parseStringPromise}).call(mr)});var xm=$((zI,Mu)=>{"use strict";var pT=require("net"),Bs=class extends Error{constructor(e){super(`${e} is locked`)}},Ri={old:new Set,young:new Set},gT=1e3*15,Us,Em=n=>new Promise((e,t)=>{let r=pT.createServer();r.unref(),r.on("error",t),r.listen(n,()=>{let{port:i}=r.address();r.close(()=>{e(i)})})}),mT=function*(n){n&&(yield*n),yield 0};Mu.exports=async n=>{let e;n&&(e=typeof n.port=="number"?[n.port]:n.port),Us===void 0&&(Us=setInterval(()=>{Ri.old=Ri.young,Ri.young=new Set},gT),Us.unref&&Us.unref());for(let t of mT(e))try{let r=await Em({...n,port:t});for(;Ri.old.has(r)||Ri.young.has(r);){if(t!==0)throw new Bs(t);r=await Em({...n,port:t})}return Ri.young.add(r),r}catch(r){if(!["EADDRINUSE","EACCES"].includes(r.code)&&!(r instanceof Bs))throw r}throw new Error("No available ports found")};Mu.exports.makeRange=(n,e)=>{if(!Number.isInteger(n)||!Number.isInteger(e))throw new TypeError("`from` and `to` must be integer numbers");if(n<1024||n>65535)throw new RangeError("`from` must be between 1024 and 65535");if(e<1024||e>65536)throw new RangeError("`to` must be between 1024 and 65536");if(e<n)throw new RangeError("`to` must be greater than or equal to `from`");return function*(r,i){for(let o=r;o<=i;o++)yield o}(n,e)}});var Nn=$(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.asPromise=St.thenable=St.typedArray=St.stringArray=St.array=St.func=St.error=St.number=St.string=St.boolean=void 0;function FT(n){return n===!0||n===!1}St.boolean=FT;function Xm(n){return typeof n=="string"||n instanceof String}St.string=Xm;function MT(n){return typeof n=="number"||n instanceof Number}St.number=MT;function jT(n){return n instanceof Error}St.error=jT;function Gm(n){return typeof n=="function"}St.func=Gm;function Qm(n){return Array.isArray(n)}St.array=Qm;function $T(n){return Qm(n)&&n.every(e=>Xm(e))}St.stringArray=$T;function HT(n,e){return Array.isArray(n)&&n.every(e)}St.typedArray=HT;function Ym(n){return n&&Gm(n.then)}St.thenable=Ym;function UT(n){return n instanceof Promise?n:Ym(n)?new Promise((e,t)=>{n.then(r=>e(r),r=>t(r))}):Promise.resolve(n)}St.asPromise=UT});var Ei=$(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.stringArray=zt.array=zt.func=zt.error=zt.number=zt.string=zt.boolean=void 0;function BT(n){return n===!0||n===!1}zt.boolean=BT;function Jm(n){return typeof n=="string"||n instanceof String}zt.string=Jm;function VT(n){return typeof n=="number"||n instanceof Number}zt.number=VT;function WT(n){return n instanceof Error}zt.error=WT;function zT(n){return typeof n=="function"}zt.func=zT;function Zm(n){return Array.isArray(n)}zt.array=Zm;function KT(n){return Zm(n)&&n.every(e=>Jm(e))}zt.stringArray=KT});var pl=$(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.Message=de.NotificationType9=de.NotificationType8=de.NotificationType7=de.NotificationType6=de.NotificationType5=de.NotificationType4=de.NotificationType3=de.NotificationType2=de.NotificationType1=de.NotificationType0=de.NotificationType=de.RequestType9=de.RequestType8=de.RequestType7=de.RequestType6=de.RequestType5=de.RequestType4=de.RequestType3=de.RequestType2=de.RequestType1=de.RequestType=de.RequestType0=de.AbstractMessageSignature=de.ParameterStructures=de.ResponseError=de.ErrorCodes=void 0;var ni=Ei(),Vu;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(Vu||(de.ErrorCodes=Vu={}));var Wu=class n extends Error{constructor(e,t,r){super(t),this.code=ni.number(e)?e:Vu.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,n.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};de.ResponseError=Wu;var dn=class n{constructor(e){this.kind=e}static is(e){return e===n.auto||e===n.byName||e===n.byPosition}toString(){return this.kind}};de.ParameterStructures=dn;dn.auto=new dn("auto");dn.byPosition=new dn("byPosition");dn.byName=new dn("byName");var at=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return dn.auto}};de.AbstractMessageSignature=at;var zu=class extends at{constructor(e){super(e,0)}};de.RequestType0=zu;var Ku=class extends at{constructor(e,t=dn.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};de.RequestType=Ku;var Xu=class extends at{constructor(e,t=dn.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};de.RequestType1=Xu;var Gu=class extends at{constructor(e){super(e,2)}};de.RequestType2=Gu;var Qu=class extends at{constructor(e){super(e,3)}};de.RequestType3=Qu;var Yu=class extends at{constructor(e){super(e,4)}};de.RequestType4=Yu;var Ju=class extends at{constructor(e){super(e,5)}};de.RequestType5=Ju;var Zu=class extends at{constructor(e){super(e,6)}};de.RequestType6=Zu;var el=class extends at{constructor(e){super(e,7)}};de.RequestType7=el;var tl=class extends at{constructor(e){super(e,8)}};de.RequestType8=tl;var nl=class extends at{constructor(e){super(e,9)}};de.RequestType9=nl;var rl=class extends at{constructor(e,t=dn.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};de.NotificationType=rl;var il=class extends at{constructor(e){super(e,0)}};de.NotificationType0=il;var ol=class extends at{constructor(e,t=dn.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};de.NotificationType1=ol;var sl=class extends at{constructor(e){super(e,2)}};de.NotificationType2=sl;var al=class extends at{constructor(e){super(e,3)}};de.NotificationType3=al;var cl=class extends at{constructor(e){super(e,4)}};de.NotificationType4=cl;var ul=class extends at{constructor(e){super(e,5)}};de.NotificationType5=ul;var ll=class extends at{constructor(e){super(e,6)}};de.NotificationType6=ll;var dl=class extends at{constructor(e){super(e,7)}};de.NotificationType7=dl;var fl=class extends at{constructor(e){super(e,8)}};de.NotificationType8=fl;var hl=class extends at{constructor(e){super(e,9)}};de.NotificationType9=hl;var ey;(function(n){function e(i){let o=i;return o&&ni.string(o.method)&&(ni.string(o.id)||ni.number(o.id))}n.isRequest=e;function t(i){let o=i;return o&&ni.string(o.method)&&i.id===void 0}n.isNotification=t;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(ni.string(o.id)||ni.number(o.id)||o.id===null)}n.isResponse=r})(ey||(de.Message=ey={}))});var ml=$(Lr=>{"use strict";var ty;Object.defineProperty(Lr,"__esModule",{value:!0});Lr.LRUCache=Lr.LinkedMap=Lr.Touch=void 0;var Kt;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(Kt||(Lr.Touch=Kt={}));var sa=class{constructor(){this[ty]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=Kt.None){let r=this._map.get(e);if(r)return t!==Kt.None&&this.touch(r,t),r.value}set(e,t,r=Kt.None){let i=this._map.get(e);if(i)i.value=t,r!==Kt.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case Kt.None:this.addItemLast(i);break;case Kt.First:this.addItemFirst(i);break;case Kt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}[(ty=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Kt.First&&t!==Kt.Last)){if(t===Kt.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Kt.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};Lr.LinkedMap=sa;var gl=class extends sa{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Kt.AsNew){return super.get(e,t)}peek(e){return super.get(e,Kt.None)}set(e,t){return super.set(e,t,Kt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Lr.LRUCache=gl});var ry=$(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.Disposable=void 0;var ny;(function(n){function e(t){return{dispose:t}}n.create=e})(ny||(aa.Disposable=ny={}))});var Ar=$(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});var yl;function vl(){if(yl===void 0)throw new Error("No runtime abstraction layer installed");return yl}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");yl=t}n.install=e})(vl||(vl={}));bl.default=vl});var Ii=$(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.Emitter=xi.Event=void 0;var XT=Ar(),iy;(function(n){let e={dispose(){}};n.None=function(){return e}})(iy||(xi.Event=iy={}));var wl=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{t.push(r[o].apply(i[o],e))}catch(a){(0,XT.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},ca=class n{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new wl),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};xi.Emitter=ca;ca._noop=function(){}});var da=$(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.CancellationTokenSource=ki.CancellationToken=void 0;var GT=Ar(),QT=Ei(),Cl=Ii(),ua;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Cl.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Cl.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||QT.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(ua||(ki.CancellationToken=ua={}));var YT=Object.freeze(function(n,e){let t=(0,GT.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),la=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?YT:(this._emitter||(this._emitter=new Cl.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Dl=class{get token(){return this._token||(this._token=new la),this._token}cancel(){this._token?this._token.cancel():this._token=ua.Cancelled}dispose(){this._token?this._token instanceof la&&this._token.dispose():this._token=ua.None}};ki.CancellationTokenSource=Dl});var oy=$(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.SharedArrayReceiverStrategy=Oi.SharedArraySenderStrategy=void 0;var JT=da(),go;(function(n){n.Continue=0,n.Cancelled=1})(go||(go={}));var Sl=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=go.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,go.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Oi.SharedArraySenderStrategy=Sl;var Tl=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===go.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},_l=class{constructor(e){this.token=new Tl(e)}cancel(){}dispose(){}},Rl=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new JT.CancellationTokenSource:new _l(t)}};Oi.SharedArrayReceiverStrategy=Rl});var El=$(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.Semaphore=void 0;var ZT=Ar(),Pl=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,ZT.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};fa.Semaphore=Pl});var ay=$(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.ReadableStreamMessageReader=Fr.AbstractMessageReader=Fr.MessageReader=void 0;var Il=Ar(),qi=Ei(),xl=Ii(),e_=El(),sy;(function(n){function e(t){let r=t;return r&&qi.func(r.listen)&&qi.func(r.dispose)&&qi.func(r.onError)&&qi.func(r.onClose)&&qi.func(r.onPartialMessage)}n.is=e})(sy||(Fr.MessageReader=sy={}));var ha=class{constructor(){this.errorEmitter=new xl.Emitter,this.closeEmitter=new xl.Emitter,this.partialMessageEmitter=new xl.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${qi.string(e.message)?e.message:"unknown"}`)}};Fr.AbstractMessageReader=ha;var kl;(function(n){function e(t){let r,i,o,s=new Map,a,c=new Map;if(t===void 0||typeof t=="string")r=t??"utf-8";else{if(r=t.charset??"utf-8",t.contentDecoder!==void 0&&(o=t.contentDecoder,s.set(o.name,o)),t.contentDecoders!==void 0)for(let u of t.contentDecoders)s.set(u.name,u);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,c.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let u of t.contentTypeDecoders)c.set(u.name,u)}return a===void 0&&(a=(0,Il.default)().applicationJson.decoder,c.set(a.name,a)),{charset:r,contentDecoder:o,contentDecoders:s,contentTypeDecoder:a,contentTypeDecoders:c}}n.fromOptions=e})(kl||(kl={}));var Ol=class extends ha{constructor(e,t){super(),this.readable=e,this.options=kl.fromOptions(t),this.buffer=(0,Il.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new e_.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(t){this.fireError(t)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Il.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Fr.ReadableStreamMessageReader=Ol});var fy=$(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.WriteableStreamMessageWriter=Mr.AbstractMessageWriter=Mr.MessageWriter=void 0;var cy=Ar(),mo=Ei(),t_=El(),uy=Ii(),n_="Content-Length: ",ly=`\r
`,dy;(function(n){function e(t){let r=t;return r&&mo.func(r.dispose)&&mo.func(r.onClose)&&mo.func(r.onError)&&mo.func(r.write)}n.is=e})(dy||(Mr.MessageWriter=dy={}));var pa=class{constructor(){this.errorEmitter=new uy.Emitter,this.closeEmitter=new uy.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${mo.string(e.message)?e.message:"unknown"}`)}};Mr.AbstractMessageWriter=pa;var ql;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,cy.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,cy.default)().applicationJson.encoder}}n.fromOptions=e})(ql||(ql={}));var Nl=class extends pa{constructor(e,t){super(),this.writable=e,this.options=ql.fromOptions(t),this.errorCount=0,this.writeSemaphore=new t_.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(n_,r.byteLength.toString(),ly),i.push(ly),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};Mr.WriteableStreamMessageWriter=Nl});var hy=$(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.AbstractMessageBuffer=void 0;var r_=13,i_=10,o_=`\r
`,Ll=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let u=this._chunks[r];for(i=0;i<u.length;){switch(u[i]){case r_:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case i_:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}o+=u.byteLength,r++}if(t!==4)return;let s=this._read(o+i),a=new Map,c=this.toString(s,"ascii").split(o_);if(c.length<2)return a;for(let u=0;u<c.length-2;u++){let l=c[u],g=l.indexOf(":");if(g===-1)throw new Error(`Message header must separate key and value using ':'
${l}`);let d=l.substr(0,g),p=l.substr(g+1).trim();a.set(e?d.toLowerCase():d,p)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],s=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,s}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let s=o.slice(0,e);t.set(s,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else t.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return t}};ga.AbstractMessageBuffer=Ll});var vy=$(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.createMessageConnection=De.ConnectionOptions=De.MessageStrategy=De.CancellationStrategy=De.CancellationSenderStrategy=De.CancellationReceiverStrategy=De.RequestCancellationReceiverStrategy=De.IdCancellationReceiverStrategy=De.ConnectionStrategy=De.ConnectionError=De.ConnectionErrors=De.LogTraceNotification=De.SetTraceNotification=De.TraceFormat=De.TraceValues=De.Trace=De.NullLogger=De.ProgressType=De.ProgressToken=void 0;var py=Ar(),pt=Ei(),pe=pl(),gy=ml(),yo=Ii(),Al=da(),wo;(function(n){n.type=new pe.NotificationType("$/cancelRequest")})(wo||(wo={}));var Fl;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(Fl||(De.ProgressToken=Fl={}));var vo;(function(n){n.type=new pe.NotificationType("$/progress")})(vo||(vo={}));var Ml=class{constructor(){}};De.ProgressType=Ml;var jl;(function(n){function e(t){return pt.func(t)}n.is=e})(jl||(jl={}));De.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Ve;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(Ve||(De.Trace=Ve={}));var my;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(my||(De.TraceValues=my={}));(function(n){function e(r){if(!pt.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(Ve||(De.Trace=Ve={}));var Pn;(function(n){n.Text="text",n.JSON="json"})(Pn||(De.TraceFormat=Pn={}));(function(n){function e(t){return pt.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(Pn||(De.TraceFormat=Pn={}));var $l;(function(n){n.type=new pe.NotificationType("$/setTrace")})($l||(De.SetTraceNotification=$l={}));var ma;(function(n){n.type=new pe.NotificationType("$/logTrace")})(ma||(De.LogTraceNotification=ma={}));var bo;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(bo||(De.ConnectionErrors=bo={}));var Ni=class n extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,n.prototype)}};De.ConnectionError=Ni;var Hl;(function(n){function e(t){let r=t;return r&&pt.func(r.cancelUndispatched)}n.is=e})(Hl||(De.ConnectionStrategy=Hl={}));var ya;(function(n){function e(t){let r=t;return r&&(r.kind===void 0||r.kind==="id")&&pt.func(r.createCancellationTokenSource)&&(r.dispose===void 0||pt.func(r.dispose))}n.is=e})(ya||(De.IdCancellationReceiverStrategy=ya={}));var Ul;(function(n){function e(t){let r=t;return r&&r.kind==="request"&&pt.func(r.createCancellationTokenSource)&&(r.dispose===void 0||pt.func(r.dispose))}n.is=e})(Ul||(De.RequestCancellationReceiverStrategy=Ul={}));var va;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new Al.CancellationTokenSource}});function e(t){return ya.is(t)||Ul.is(t)}n.is=e})(va||(De.CancellationReceiverStrategy=va={}));var ba;(function(n){n.Message=Object.freeze({sendCancellation(t,r){return t.sendNotification(wo.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&pt.func(r.sendCancellation)&&pt.func(r.cleanup)}n.is=e})(ba||(De.CancellationSenderStrategy=ba={}));var wa;(function(n){n.Message=Object.freeze({receiver:va.Message,sender:ba.Message});function e(t){let r=t;return r&&va.is(r.receiver)&&ba.is(r.sender)}n.is=e})(wa||(De.CancellationStrategy=wa={}));var Ca;(function(n){function e(t){let r=t;return r&&pt.func(r.handleMessage)}n.is=e})(Ca||(De.MessageStrategy=Ca={}));var yy;(function(n){function e(t){let r=t;return r&&(wa.is(r.cancellationStrategy)||Hl.is(r.connectionStrategy)||Ca.is(r.messageStrategy))}n.is=e})(yy||(De.ConnectionOptions=yy={}));var Vn;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(Vn||(Vn={}));function s_(n,e,t,r){let i=t!==void 0?t:De.NullLogger,o=0,s=0,a=0,c="2.0",u,l=new Map,g,d=new Map,p=new Map,h,T=new gy.LinkedMap,I=new Map,O=new Set,E=new Map,C=Ve.Off,y=Pn.Text,m,P=Vn.New,A=new yo.Emitter,S=new yo.Emitter,U=new yo.Emitter,k=new yo.Emitter,H=new yo.Emitter,X=r&&r.cancellationStrategy?r.cancellationStrategy:wa.Message;function Z(q){if(q===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+q.toString()}function le(q){return q===null?"res-unknown-"+(++a).toString():"res-"+q.toString()}function he(){return"not-"+(++s).toString()}function ne(q,K){pe.Message.isRequest(K)?q.set(Z(K.id),K):pe.Message.isResponse(K)?q.set(le(K.id),K):q.set(he(),K)}function qe(q){}function me(){return P===Vn.Listening}function Ee(){return P===Vn.Closed}function Xe(){return P===Vn.Disposed}function vt(){(P===Vn.New||P===Vn.Listening)&&(P=Vn.Closed,S.fire(void 0))}function bt(q){A.fire([q,void 0,void 0])}function on(q){A.fire(q)}n.onClose(vt),n.onError(bt),e.onClose(vt),e.onError(on);function Wt(){h||T.size===0||(h=(0,py.default)().timer.setImmediate(()=>{h=void 0,_()}))}function wt(q){pe.Message.isRequest(q)?V(q):pe.Message.isNotification(q)?ye(q):pe.Message.isResponse(q)?j(q):Ne(q)}function _(){if(T.size===0)return;let q=T.shift();try{let K=r?.messageStrategy;Ca.is(K)?K.handleMessage(q,wt):wt(q)}finally{Wt()}}let D=q=>{try{if(pe.Message.isNotification(q)&&q.method===wo.type.method){let K=q.params.id,te=Z(K),ie=T.get(te);if(pe.Message.isRequest(ie)){let Ae=r?.connectionStrategy,ze=Ae&&Ae.cancelUndispatched?Ae.cancelUndispatched(ie,qe):void 0;if(ze&&(ze.error!==void 0||ze.result!==void 0)){T.delete(te),E.delete(K),ze.id=ie.id,et(ze,q.method,Date.now()),e.write(ze).catch(()=>i.error("Sending response for canceled message failed."));return}}let Me=E.get(K);if(Me!==void 0){Me.cancel(),Ct(q);return}else O.add(K)}ne(T,q)}finally{Wt()}};function V(q){if(Xe())return;function K(_e,$e,xe){let Je={jsonrpc:c,id:q.id};_e instanceof pe.ResponseError?Je.error=_e.toJson():Je.result=_e===void 0?null:_e,et(Je,$e,xe),e.write(Je).catch(()=>i.error("Sending response failed."))}function te(_e,$e,xe){let Je={jsonrpc:c,id:q.id,error:_e.toJson()};et(Je,$e,xe),e.write(Je).catch(()=>i.error("Sending response failed."))}function ie(_e,$e,xe){_e===void 0&&(_e=null);let Je={jsonrpc:c,id:q.id,result:_e};et(Je,$e,xe),e.write(Je).catch(()=>i.error("Sending response failed."))}rt(q);let Me=l.get(q.method),Ae,ze;Me&&(Ae=Me.type,ze=Me.handler);let Ye=Date.now();if(ze||u){let _e=q.id??String(Date.now()),$e=ya.is(X.receiver)?X.receiver.createCancellationTokenSource(_e):X.receiver.createCancellationTokenSource(q);q.id!==null&&O.has(q.id)&&$e.cancel(),q.id!==null&&E.set(_e,$e);try{let xe;if(ze)if(q.params===void 0){if(Ae!==void 0&&Ae.numberOfParams!==0){te(new pe.ResponseError(pe.ErrorCodes.InvalidParams,`Request ${q.method} defines ${Ae.numberOfParams} params but received none.`),q.method,Ye);return}xe=ze($e.token)}else if(Array.isArray(q.params)){if(Ae!==void 0&&Ae.parameterStructures===pe.ParameterStructures.byName){te(new pe.ResponseError(pe.ErrorCodes.InvalidParams,`Request ${q.method} defines parameters by name but received parameters by position`),q.method,Ye);return}xe=ze(...q.params,$e.token)}else{if(Ae!==void 0&&Ae.parameterStructures===pe.ParameterStructures.byPosition){te(new pe.ResponseError(pe.ErrorCodes.InvalidParams,`Request ${q.method} defines parameters by position but received parameters by name`),q.method,Ye);return}xe=ze(q.params,$e.token)}else u&&(xe=u(q.method,q.params,$e.token));let Je=xe;xe?Je.then?Je.then(Dt=>{E.delete(_e),K(Dt,q.method,Ye)},Dt=>{E.delete(_e),Dt instanceof pe.ResponseError?te(Dt,q.method,Ye):Dt&&pt.string(Dt.message)?te(new pe.ResponseError(pe.ErrorCodes.InternalError,`Request ${q.method} failed with message: ${Dt.message}`),q.method,Ye):te(new pe.ResponseError(pe.ErrorCodes.InternalError,`Request ${q.method} failed unexpectedly without providing any details.`),q.method,Ye)}):(E.delete(_e),K(xe,q.method,Ye)):(E.delete(_e),ie(xe,q.method,Ye))}catch(xe){E.delete(_e),xe instanceof pe.ResponseError?K(xe,q.method,Ye):xe&&pt.string(xe.message)?te(new pe.ResponseError(pe.ErrorCodes.InternalError,`Request ${q.method} failed with message: ${xe.message}`),q.method,Ye):te(new pe.ResponseError(pe.ErrorCodes.InternalError,`Request ${q.method} failed unexpectedly without providing any details.`),q.method,Ye)}}else te(new pe.ResponseError(pe.ErrorCodes.MethodNotFound,`Unhandled method ${q.method}`),q.method,Ye)}function j(q){if(!Xe())if(q.id===null)q.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(q.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let K=q.id,te=I.get(K);if(qn(q,te),te!==void 0){I.delete(K);try{if(q.error){let ie=q.error;te.reject(new pe.ResponseError(ie.code,ie.message,ie.data))}else if(q.result!==void 0)te.resolve(q.result);else throw new Error("Should never happen.")}catch(ie){ie.message?i.error(`Response handler '${te.method}' failed with message: ${ie.message}`):i.error(`Response handler '${te.method}' failed unexpectedly.`)}}}}function ye(q){if(Xe())return;let K,te;if(q.method===wo.type.method){let ie=q.params.id;O.delete(ie),Ct(q);return}else{let ie=d.get(q.method);ie&&(te=ie.handler,K=ie.type)}if(te||g)try{if(Ct(q),te)if(q.params===void 0)K!==void 0&&K.numberOfParams!==0&&K.parameterStructures!==pe.ParameterStructures.byName&&i.error(`Notification ${q.method} defines ${K.numberOfParams} params but received none.`),te();else if(Array.isArray(q.params)){let ie=q.params;q.method===vo.type.method&&ie.length===2&&Fl.is(ie[0])?te({token:ie[0],value:ie[1]}):(K!==void 0&&(K.parameterStructures===pe.ParameterStructures.byName&&i.error(`Notification ${q.method} defines parameters by name but received parameters by position`),K.numberOfParams!==q.params.length&&i.error(`Notification ${q.method} defines ${K.numberOfParams} params but received ${ie.length} arguments`)),te(...ie))}else K!==void 0&&K.parameterStructures===pe.ParameterStructures.byPosition&&i.error(`Notification ${q.method} defines parameters by position but received parameters by name`),te(q.params);else g&&g(q.method,q.params)}catch(ie){ie.message?i.error(`Notification handler '${q.method}' failed with message: ${ie.message}`):i.error(`Notification handler '${q.method}' failed unexpectedly.`)}else U.fire(q)}function Ne(q){if(!q){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(q,null,4)}`);let K=q;if(pt.string(K.id)||pt.number(K.id)){let te=K.id,ie=I.get(te);ie&&ie.reject(new Error("The received response has neither a result nor an error property."))}}function ve(q){if(q!=null)switch(C){case Ve.Verbose:return JSON.stringify(q,null,4);case Ve.Compact:return JSON.stringify(q);default:return}}function Ue(q){if(!(C===Ve.Off||!m))if(y===Pn.Text){let K;(C===Ve.Verbose||C===Ve.Compact)&&q.params&&(K=`Params: ${ve(q.params)}

`),m.log(`Sending request '${q.method} - (${q.id})'.`,K)}else ut("send-request",q)}function Le(q){if(!(C===Ve.Off||!m))if(y===Pn.Text){let K;(C===Ve.Verbose||C===Ve.Compact)&&(q.params?K=`Params: ${ve(q.params)}

`:K=`No parameters provided.

`),m.log(`Sending notification '${q.method}'.`,K)}else ut("send-notification",q)}function et(q,K,te){if(!(C===Ve.Off||!m))if(y===Pn.Text){let ie;(C===Ve.Verbose||C===Ve.Compact)&&(q.error&&q.error.data?ie=`Error data: ${ve(q.error.data)}

`:q.result?ie=`Result: ${ve(q.result)}

`:q.error===void 0&&(ie=`No result returned.

`)),m.log(`Sending response '${K} - (${q.id})'. Processing request took ${Date.now()-te}ms`,ie)}else ut("send-response",q)}function rt(q){if(!(C===Ve.Off||!m))if(y===Pn.Text){let K;(C===Ve.Verbose||C===Ve.Compact)&&q.params&&(K=`Params: ${ve(q.params)}

`),m.log(`Received request '${q.method} - (${q.id})'.`,K)}else ut("receive-request",q)}function Ct(q){if(!(C===Ve.Off||!m||q.method===ma.type.method))if(y===Pn.Text){let K;(C===Ve.Verbose||C===Ve.Compact)&&(q.params?K=`Params: ${ve(q.params)}

`:K=`No parameters provided.

`),m.log(`Received notification '${q.method}'.`,K)}else ut("receive-notification",q)}function qn(q,K){if(!(C===Ve.Off||!m))if(y===Pn.Text){let te;if((C===Ve.Verbose||C===Ve.Compact)&&(q.error&&q.error.data?te=`Error data: ${ve(q.error.data)}

`:q.result?te=`Result: ${ve(q.result)}

`:q.error===void 0&&(te=`No result returned.

`)),K){let ie=q.error?` Request failed: ${q.error.message} (${q.error.code}).`:"";m.log(`Received response '${K.method} - (${q.id})' in ${Date.now()-K.timerStart}ms.${ie}`,te)}else m.log(`Received response ${q.id} without active response promise.`,te)}else ut("receive-response",q)}function ut(q,K){if(!m||C===Ve.Off)return;let te={isLSPMessage:!0,type:q,message:K,timestamp:Date.now()};m.log(te)}function Et(){if(Ee())throw new Ni(bo.Closed,"Connection is closed.");if(Xe())throw new Ni(bo.Disposed,"Connection is disposed.")}function xt(){if(me())throw new Ni(bo.AlreadyListening,"Connection is already listening")}function wn(){if(!me())throw new Error("Call listen() first.")}function sn(q){return q===void 0?null:q}function Yn(q){if(q!==null)return q}function dr(q){return q!=null&&!Array.isArray(q)&&typeof q=="object"}function Hn(q,K){switch(q){case pe.ParameterStructures.auto:return dr(K)?Yn(K):[sn(K)];case pe.ParameterStructures.byName:if(!dr(K))throw new Error("Received parameters by name but param is not an object literal.");return Yn(K);case pe.ParameterStructures.byPosition:return[sn(K)];default:throw new Error(`Unknown parameter structure ${q.toString()}`)}}function fr(q,K){let te,ie=q.numberOfParams;switch(ie){case 0:te=void 0;break;case 1:te=Hn(q.parameterStructures,K[0]);break;default:te=[];for(let Me=0;Me<K.length&&Me<ie;Me++)te.push(sn(K[Me]));if(K.length<ie)for(let Me=K.length;Me<ie;Me++)te.push(null);break}return te}let Zt={sendNotification:(q,...K)=>{Et();let te,ie;if(pt.string(q)){te=q;let Ae=K[0],ze=0,Ye=pe.ParameterStructures.auto;pe.ParameterStructures.is(Ae)&&(ze=1,Ye=Ae);let _e=K.length,$e=_e-ze;switch($e){case 0:ie=void 0;break;case 1:ie=Hn(Ye,K[ze]);break;default:if(Ye===pe.ParameterStructures.byName)throw new Error(`Received ${$e} parameters for 'by Name' notification parameter structure.`);ie=K.slice(ze,_e).map(xe=>sn(xe));break}}else{let Ae=K;te=q.method,ie=fr(q,Ae)}let Me={jsonrpc:c,method:te,params:ie};return Le(Me),e.write(Me).catch(Ae=>{throw i.error("Sending notification failed."),Ae})},onNotification:(q,K)=>{Et();let te;return pt.func(q)?g=q:K&&(pt.string(q)?(te=q,d.set(q,{type:void 0,handler:K})):(te=q.method,d.set(q.method,{type:q,handler:K}))),{dispose:()=>{te!==void 0?d.delete(te):g=void 0}}},onProgress:(q,K,te)=>{if(p.has(K))throw new Error(`Progress handler for token ${K} already registered`);return p.set(K,te),{dispose:()=>{p.delete(K)}}},sendProgress:(q,K,te)=>Zt.sendNotification(vo.type,{token:K,value:te}),onUnhandledProgress:k.event,sendRequest:(q,...K)=>{Et(),wn();let te,ie,Me;if(pt.string(q)){te=q;let _e=K[0],$e=K[K.length-1],xe=0,Je=pe.ParameterStructures.auto;pe.ParameterStructures.is(_e)&&(xe=1,Je=_e);let Dt=K.length;Al.CancellationToken.is($e)&&(Dt=Dt-1,Me=$e);let Nt=Dt-xe;switch(Nt){case 0:ie=void 0;break;case 1:ie=Hn(Je,K[xe]);break;default:if(Je===pe.ParameterStructures.byName)throw new Error(`Received ${Nt} parameters for 'by Name' request parameter structure.`);ie=K.slice(xe,Dt).map(Pr=>sn(Pr));break}}else{let _e=K;te=q.method,ie=fr(q,_e);let $e=q.numberOfParams;Me=Al.CancellationToken.is(_e[$e])?_e[$e]:void 0}let Ae=o++,ze;Me&&(ze=Me.onCancellationRequested(()=>{let _e=X.sender.sendCancellation(Zt,Ae);return _e===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Ae}`),Promise.resolve()):_e.catch(()=>{i.log(`Sending cancellation messages for id ${Ae} failed`)})}));let Ye={jsonrpc:c,id:Ae,method:te,params:ie};return Ue(Ye),typeof X.sender.enableCancellation=="function"&&X.sender.enableCancellation(Ye),new Promise(async(_e,$e)=>{let xe=Nt=>{_e(Nt),X.sender.cleanup(Ae),ze?.dispose()},Je=Nt=>{$e(Nt),X.sender.cleanup(Ae),ze?.dispose()},Dt={method:te,timerStart:Date.now(),resolve:xe,reject:Je};try{await e.write(Ye),I.set(Ae,Dt)}catch(Nt){throw i.error("Sending request failed."),Dt.reject(new pe.ResponseError(pe.ErrorCodes.MessageWriteError,Nt.message?Nt.message:"Unknown reason")),Nt}})},onRequest:(q,K)=>{Et();let te=null;return jl.is(q)?(te=void 0,u=q):pt.string(q)?(te=null,K!==void 0&&(te=q,l.set(q,{handler:K,type:void 0}))):K!==void 0&&(te=q.method,l.set(q.method,{type:q,handler:K})),{dispose:()=>{te!==null&&(te!==void 0?l.delete(te):u=void 0)}}},hasPendingResponse:()=>I.size>0,trace:async(q,K,te)=>{let ie=!1,Me=Pn.Text;te!==void 0&&(pt.boolean(te)?ie=te:(ie=te.sendNotification||!1,Me=te.traceFormat||Pn.Text)),C=q,y=Me,C===Ve.Off?m=void 0:m=K,ie&&!Ee()&&!Xe()&&await Zt.sendNotification($l.type,{value:Ve.toString(q)})},onError:A.event,onClose:S.event,onUnhandledNotification:U.event,onDispose:H.event,end:()=>{e.end()},dispose:()=>{if(Xe())return;P=Vn.Disposed,H.fire(void 0);let q=new pe.ResponseError(pe.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let K of I.values())K.reject(q);I=new Map,E=new Map,O=new Set,T=new gy.LinkedMap,pt.func(e.dispose)&&e.dispose(),pt.func(n.dispose)&&n.dispose()},listen:()=>{Et(),xt(),P=Vn.Listening,n.listen(D)},inspect:()=>{(0,py.default)().console.log("inspect")}};return Zt.onNotification(ma.type,q=>{if(C===Ve.Off||!m)return;let K=C===Ve.Verbose||C===Ve.Compact;m.log(q.message,K?q.verbose:void 0)}),Zt.onNotification(vo.type,q=>{let K=p.get(q.token);K?K(q.value):k.fire(q)}),Zt}De.createMessageConnection=s_});var Da=$(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.ProgressType=z.ProgressToken=z.createMessageConnection=z.NullLogger=z.ConnectionOptions=z.ConnectionStrategy=z.AbstractMessageBuffer=z.WriteableStreamMessageWriter=z.AbstractMessageWriter=z.MessageWriter=z.ReadableStreamMessageReader=z.AbstractMessageReader=z.MessageReader=z.SharedArrayReceiverStrategy=z.SharedArraySenderStrategy=z.CancellationToken=z.CancellationTokenSource=z.Emitter=z.Event=z.Disposable=z.LRUCache=z.Touch=z.LinkedMap=z.ParameterStructures=z.NotificationType9=z.NotificationType8=z.NotificationType7=z.NotificationType6=z.NotificationType5=z.NotificationType4=z.NotificationType3=z.NotificationType2=z.NotificationType1=z.NotificationType0=z.NotificationType=z.ErrorCodes=z.ResponseError=z.RequestType9=z.RequestType8=z.RequestType7=z.RequestType6=z.RequestType5=z.RequestType4=z.RequestType3=z.RequestType2=z.RequestType1=z.RequestType0=z.RequestType=z.Message=z.RAL=void 0;z.MessageStrategy=z.CancellationStrategy=z.CancellationSenderStrategy=z.CancellationReceiverStrategy=z.ConnectionError=z.ConnectionErrors=z.LogTraceNotification=z.SetTraceNotification=z.TraceFormat=z.TraceValues=z.Trace=void 0;var st=pl();Object.defineProperty(z,"Message",{enumerable:!0,get:function(){return st.Message}});Object.defineProperty(z,"RequestType",{enumerable:!0,get:function(){return st.RequestType}});Object.defineProperty(z,"RequestType0",{enumerable:!0,get:function(){return st.RequestType0}});Object.defineProperty(z,"RequestType1",{enumerable:!0,get:function(){return st.RequestType1}});Object.defineProperty(z,"RequestType2",{enumerable:!0,get:function(){return st.RequestType2}});Object.defineProperty(z,"RequestType3",{enumerable:!0,get:function(){return st.RequestType3}});Object.defineProperty(z,"RequestType4",{enumerable:!0,get:function(){return st.RequestType4}});Object.defineProperty(z,"RequestType5",{enumerable:!0,get:function(){return st.RequestType5}});Object.defineProperty(z,"RequestType6",{enumerable:!0,get:function(){return st.RequestType6}});Object.defineProperty(z,"RequestType7",{enumerable:!0,get:function(){return st.RequestType7}});Object.defineProperty(z,"RequestType8",{enumerable:!0,get:function(){return st.RequestType8}});Object.defineProperty(z,"RequestType9",{enumerable:!0,get:function(){return st.RequestType9}});Object.defineProperty(z,"ResponseError",{enumerable:!0,get:function(){return st.ResponseError}});Object.defineProperty(z,"ErrorCodes",{enumerable:!0,get:function(){return st.ErrorCodes}});Object.defineProperty(z,"NotificationType",{enumerable:!0,get:function(){return st.NotificationType}});Object.defineProperty(z,"NotificationType0",{enumerable:!0,get:function(){return st.NotificationType0}});Object.defineProperty(z,"NotificationType1",{enumerable:!0,get:function(){return st.NotificationType1}});Object.defineProperty(z,"NotificationType2",{enumerable:!0,get:function(){return st.NotificationType2}});Object.defineProperty(z,"NotificationType3",{enumerable:!0,get:function(){return st.NotificationType3}});Object.defineProperty(z,"NotificationType4",{enumerable:!0,get:function(){return st.NotificationType4}});Object.defineProperty(z,"NotificationType5",{enumerable:!0,get:function(){return st.NotificationType5}});Object.defineProperty(z,"NotificationType6",{enumerable:!0,get:function(){return st.NotificationType6}});Object.defineProperty(z,"NotificationType7",{enumerable:!0,get:function(){return st.NotificationType7}});Object.defineProperty(z,"NotificationType8",{enumerable:!0,get:function(){return st.NotificationType8}});Object.defineProperty(z,"NotificationType9",{enumerable:!0,get:function(){return st.NotificationType9}});Object.defineProperty(z,"ParameterStructures",{enumerable:!0,get:function(){return st.ParameterStructures}});var Bl=ml();Object.defineProperty(z,"LinkedMap",{enumerable:!0,get:function(){return Bl.LinkedMap}});Object.defineProperty(z,"LRUCache",{enumerable:!0,get:function(){return Bl.LRUCache}});Object.defineProperty(z,"Touch",{enumerable:!0,get:function(){return Bl.Touch}});var a_=ry();Object.defineProperty(z,"Disposable",{enumerable:!0,get:function(){return a_.Disposable}});var by=Ii();Object.defineProperty(z,"Event",{enumerable:!0,get:function(){return by.Event}});Object.defineProperty(z,"Emitter",{enumerable:!0,get:function(){return by.Emitter}});var wy=da();Object.defineProperty(z,"CancellationTokenSource",{enumerable:!0,get:function(){return wy.CancellationTokenSource}});Object.defineProperty(z,"CancellationToken",{enumerable:!0,get:function(){return wy.CancellationToken}});var Cy=oy();Object.defineProperty(z,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Cy.SharedArraySenderStrategy}});Object.defineProperty(z,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Cy.SharedArrayReceiverStrategy}});var Vl=ay();Object.defineProperty(z,"MessageReader",{enumerable:!0,get:function(){return Vl.MessageReader}});Object.defineProperty(z,"AbstractMessageReader",{enumerable:!0,get:function(){return Vl.AbstractMessageReader}});Object.defineProperty(z,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Vl.ReadableStreamMessageReader}});var Wl=fy();Object.defineProperty(z,"MessageWriter",{enumerable:!0,get:function(){return Wl.MessageWriter}});Object.defineProperty(z,"AbstractMessageWriter",{enumerable:!0,get:function(){return Wl.AbstractMessageWriter}});Object.defineProperty(z,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Wl.WriteableStreamMessageWriter}});var c_=hy();Object.defineProperty(z,"AbstractMessageBuffer",{enumerable:!0,get:function(){return c_.AbstractMessageBuffer}});var Bt=vy();Object.defineProperty(z,"ConnectionStrategy",{enumerable:!0,get:function(){return Bt.ConnectionStrategy}});Object.defineProperty(z,"ConnectionOptions",{enumerable:!0,get:function(){return Bt.ConnectionOptions}});Object.defineProperty(z,"NullLogger",{enumerable:!0,get:function(){return Bt.NullLogger}});Object.defineProperty(z,"createMessageConnection",{enumerable:!0,get:function(){return Bt.createMessageConnection}});Object.defineProperty(z,"ProgressToken",{enumerable:!0,get:function(){return Bt.ProgressToken}});Object.defineProperty(z,"ProgressType",{enumerable:!0,get:function(){return Bt.ProgressType}});Object.defineProperty(z,"Trace",{enumerable:!0,get:function(){return Bt.Trace}});Object.defineProperty(z,"TraceValues",{enumerable:!0,get:function(){return Bt.TraceValues}});Object.defineProperty(z,"TraceFormat",{enumerable:!0,get:function(){return Bt.TraceFormat}});Object.defineProperty(z,"SetTraceNotification",{enumerable:!0,get:function(){return Bt.SetTraceNotification}});Object.defineProperty(z,"LogTraceNotification",{enumerable:!0,get:function(){return Bt.LogTraceNotification}});Object.defineProperty(z,"ConnectionErrors",{enumerable:!0,get:function(){return Bt.ConnectionErrors}});Object.defineProperty(z,"ConnectionError",{enumerable:!0,get:function(){return Bt.ConnectionError}});Object.defineProperty(z,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Bt.CancellationReceiverStrategy}});Object.defineProperty(z,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Bt.CancellationSenderStrategy}});Object.defineProperty(z,"CancellationStrategy",{enumerable:!0,get:function(){return Bt.CancellationStrategy}});Object.defineProperty(z,"MessageStrategy",{enumerable:!0,get:function(){return Bt.MessageStrategy}});var u_=Ar();z.RAL=u_.default});var Ty=$(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});var Dy=require("util"),vr=Da(),Sa=class n extends vr.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return n.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Dy.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};Sa.emptyBuffer=Buffer.allocUnsafe(0);var zl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),vr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),vr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),vr.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),vr.Disposable.create(()=>this.stream.off("data",e))}},Kl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),vr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),vr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),vr.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let o=s=>{s==null?r():i(s)};typeof e=="string"?this.stream.write(e,t,o):this.stream.write(e,o)})}end(){this.stream.end()}},Sy=Object.freeze({messageBuffer:Object.freeze({create:n=>new Sa(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Dy.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new zl(n),asWritableStream:n=>new Kl(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let r=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(r)}},setImmediate(n,...e){let t=setImmediate(n,...e);return{dispose:()=>clearImmediate(t)}},setInterval(n,e,...t){let r=setInterval(n,e,...t);return{dispose:()=>clearInterval(r)}}})});function Xl(){return Sy}(function(n){function e(){vr.RAL.install(Sy)}n.install=e})(Xl||(Xl={}));Gl.default=Xl});var oi=$(Oe=>{"use strict";var l_=Oe&&Oe.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),d_=Oe&&Oe.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&l_(e,n,t)};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createMessageConnection=Oe.createServerSocketTransport=Oe.createClientSocketTransport=Oe.createServerPipeTransport=Oe.createClientPipeTransport=Oe.generateRandomPipeName=Oe.StreamMessageWriter=Oe.StreamMessageReader=Oe.SocketMessageWriter=Oe.SocketMessageReader=Oe.PortMessageWriter=Oe.PortMessageReader=Oe.IPCMessageWriter=Oe.IPCMessageReader=void 0;var Li=Ty();Li.default.install();var _y=require("path"),f_=require("os"),h_=require("crypto"),Ra=require("net"),En=Da();d_(Da(),Oe);var Ql=class extends En.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),En.Disposable.create(()=>this.process.off("message",e))}};Oe.IPCMessageReader=Ql;var Yl=class extends En.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Oe.IPCMessageWriter=Yl;var Jl=class extends En.AbstractMessageReader{constructor(e){super(),this.onData=new En.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};Oe.PortMessageReader=Jl;var Zl=class extends En.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Oe.PortMessageWriter=Zl;var ri=class extends En.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,Li.default)().stream.asReadableStream(e),t)}};Oe.SocketMessageReader=ri;var ii=class extends En.WriteableStreamMessageWriter{constructor(e,t){super((0,Li.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Oe.SocketMessageWriter=ii;var Ta=class extends En.ReadableStreamMessageReader{constructor(e,t){super((0,Li.default)().stream.asReadableStream(e),t)}};Oe.StreamMessageReader=Ta;var _a=class extends En.WriteableStreamMessageWriter{constructor(e,t){super((0,Li.default)().stream.asWritableStream(e),t)}};Oe.StreamMessageWriter=_a;var Ry=process.env.XDG_RUNTIME_DIR,p_=new Map([["linux",107],["darwin",103]]);function g_(){let n=(0,h_.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;Ry?e=_y.join(Ry,`vscode-ipc-${n}.sock`):e=_y.join(f_.tmpdir(),`vscode-${n}.sock`);let t=p_.get(process.platform);return t!==void 0&&e.length>t&&(0,Li.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}Oe.generateRandomPipeName=g_;function m_(n,e="utf-8"){let t,r=new Promise((i,o)=>{t=i});return new Promise((i,o)=>{let s=(0,Ra.createServer)(a=>{s.close(),t([new ri(a,e),new ii(a,e)])});s.on("error",o),s.listen(n,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}Oe.createClientPipeTransport=m_;function y_(n,e="utf-8"){let t=(0,Ra.createConnection)(n);return[new ri(t,e),new ii(t,e)]}Oe.createServerPipeTransport=y_;function v_(n,e="utf-8"){let t,r=new Promise((i,o)=>{t=i});return new Promise((i,o)=>{let s=(0,Ra.createServer)(a=>{s.close(),t([new ri(a,e),new ii(a,e)])});s.on("error",o),s.listen(n,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}Oe.createClientSocketTransport=v_;function b_(n,e="utf-8"){let t=(0,Ra.createConnection)(n,"127.0.0.1");return[new ri(t,e),new ii(t,e)]}Oe.createServerSocketTransport=b_;function w_(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function C_(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function D_(n,e,t,r){t||(t=En.NullLogger);let i=w_(n)?new Ta(n):n,o=C_(e)?new _a(e):e;return En.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,En.createMessageConnection)(i,o,t,r)}Oe.createMessageConnection=D_});var ed=$((a0,Py)=>{"use strict";Py.exports=oi()});var Ea=$((Ey,Pa)=>{(function(n){if(typeof Pa=="object"&&typeof Pa.exports=="object"){var e=n(require,Ey);e!==void 0&&(Pa.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var t;(function(w){function N(L){return typeof L=="string"}w.is=N})(t||(e.DocumentUri=t={}));var r;(function(w){function N(L){return typeof L=="string"}w.is=N})(r||(e.URI=r={}));var i;(function(w){w.MIN_VALUE=-2147483648,w.MAX_VALUE=2147483647;function N(L){return typeof L=="number"&&w.MIN_VALUE<=L&&L<=w.MAX_VALUE}w.is=N})(i||(e.integer=i={}));var o;(function(w){w.MIN_VALUE=0,w.MAX_VALUE=2147483647;function N(L){return typeof L=="number"&&w.MIN_VALUE<=L&&L<=w.MAX_VALUE}w.is=N})(o||(e.uinteger=o={}));var s;(function(w){function N(R,v){return R===Number.MAX_VALUE&&(R=o.MAX_VALUE),v===Number.MAX_VALUE&&(v=o.MAX_VALUE),{line:R,character:v}}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&M.uinteger(v.line)&&M.uinteger(v.character)}w.is=L})(s||(e.Position=s={}));var a;(function(w){function N(R,v,B,G){if(M.uinteger(R)&&M.uinteger(v)&&M.uinteger(B)&&M.uinteger(G))return{start:s.create(R,v),end:s.create(B,G)};if(s.is(R)&&s.is(v))return{start:R,end:v};throw new Error("Range#create called with invalid arguments[".concat(R,", ").concat(v,", ").concat(B,", ").concat(G,"]"))}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&s.is(v.start)&&s.is(v.end)}w.is=L})(a||(e.Range=a={}));var c;(function(w){function N(R,v){return{uri:R,range:v}}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&a.is(v.range)&&(M.string(v.uri)||M.undefined(v.uri))}w.is=L})(c||(e.Location=c={}));var u;(function(w){function N(R,v,B,G){return{targetUri:R,targetRange:v,targetSelectionRange:B,originSelectionRange:G}}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&a.is(v.targetRange)&&M.string(v.targetUri)&&a.is(v.targetSelectionRange)&&(a.is(v.originSelectionRange)||M.undefined(v.originSelectionRange))}w.is=L})(u||(e.LocationLink=u={}));var l;(function(w){function N(R,v,B,G){return{red:R,green:v,blue:B,alpha:G}}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&M.numberRange(v.red,0,1)&&M.numberRange(v.green,0,1)&&M.numberRange(v.blue,0,1)&&M.numberRange(v.alpha,0,1)}w.is=L})(l||(e.Color=l={}));var g;(function(w){function N(R,v){return{range:R,color:v}}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&a.is(v.range)&&l.is(v.color)}w.is=L})(g||(e.ColorInformation=g={}));var d;(function(w){function N(R,v,B){return{label:R,textEdit:v,additionalTextEdits:B}}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&M.string(v.label)&&(M.undefined(v.textEdit)||m.is(v))&&(M.undefined(v.additionalTextEdits)||M.typedArray(v.additionalTextEdits,m.is))}w.is=L})(d||(e.ColorPresentation=d={}));var p;(function(w){w.Comment="comment",w.Imports="imports",w.Region="region"})(p||(e.FoldingRangeKind=p={}));var h;(function(w){function N(R,v,B,G,be,lt){var Ze={startLine:R,endLine:v};return M.defined(B)&&(Ze.startCharacter=B),M.defined(G)&&(Ze.endCharacter=G),M.defined(be)&&(Ze.kind=be),M.defined(lt)&&(Ze.collapsedText=lt),Ze}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&M.uinteger(v.startLine)&&M.uinteger(v.startLine)&&(M.undefined(v.startCharacter)||M.uinteger(v.startCharacter))&&(M.undefined(v.endCharacter)||M.uinteger(v.endCharacter))&&(M.undefined(v.kind)||M.string(v.kind))}w.is=L})(h||(e.FoldingRange=h={}));var T;(function(w){function N(R,v){return{location:R,message:v}}w.create=N;function L(R){var v=R;return M.defined(v)&&c.is(v.location)&&M.string(v.message)}w.is=L})(T||(e.DiagnosticRelatedInformation=T={}));var I;(function(w){w.Error=1,w.Warning=2,w.Information=3,w.Hint=4})(I||(e.DiagnosticSeverity=I={}));var O;(function(w){w.Unnecessary=1,w.Deprecated=2})(O||(e.DiagnosticTag=O={}));var E;(function(w){function N(L){var R=L;return M.objectLiteral(R)&&M.string(R.href)}w.is=N})(E||(e.CodeDescription=E={}));var C;(function(w){function N(R,v,B,G,be,lt){var Ze={range:R,message:v};return M.defined(B)&&(Ze.severity=B),M.defined(G)&&(Ze.code=G),M.defined(be)&&(Ze.source=be),M.defined(lt)&&(Ze.relatedInformation=lt),Ze}w.create=N;function L(R){var v,B=R;return M.defined(B)&&a.is(B.range)&&M.string(B.message)&&(M.number(B.severity)||M.undefined(B.severity))&&(M.integer(B.code)||M.string(B.code)||M.undefined(B.code))&&(M.undefined(B.codeDescription)||M.string((v=B.codeDescription)===null||v===void 0?void 0:v.href))&&(M.string(B.source)||M.undefined(B.source))&&(M.undefined(B.relatedInformation)||M.typedArray(B.relatedInformation,T.is))}w.is=L})(C||(e.Diagnostic=C={}));var y;(function(w){function N(R,v){for(var B=[],G=2;G<arguments.length;G++)B[G-2]=arguments[G];var be={title:R,command:v};return M.defined(B)&&B.length>0&&(be.arguments=B),be}w.create=N;function L(R){var v=R;return M.defined(v)&&M.string(v.title)&&M.string(v.command)}w.is=L})(y||(e.Command=y={}));var m;(function(w){function N(B,G){return{range:B,newText:G}}w.replace=N;function L(B,G){return{range:{start:B,end:B},newText:G}}w.insert=L;function R(B){return{range:B,newText:""}}w.del=R;function v(B){var G=B;return M.objectLiteral(G)&&M.string(G.newText)&&a.is(G.range)}w.is=v})(m||(e.TextEdit=m={}));var P;(function(w){function N(R,v,B){var G={label:R};return v!==void 0&&(G.needsConfirmation=v),B!==void 0&&(G.description=B),G}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&M.string(v.label)&&(M.boolean(v.needsConfirmation)||v.needsConfirmation===void 0)&&(M.string(v.description)||v.description===void 0)}w.is=L})(P||(e.ChangeAnnotation=P={}));var A;(function(w){function N(L){var R=L;return M.string(R)}w.is=N})(A||(e.ChangeAnnotationIdentifier=A={}));var S;(function(w){function N(B,G,be){return{range:B,newText:G,annotationId:be}}w.replace=N;function L(B,G,be){return{range:{start:B,end:B},newText:G,annotationId:be}}w.insert=L;function R(B,G){return{range:B,newText:"",annotationId:G}}w.del=R;function v(B){var G=B;return m.is(G)&&(P.is(G.annotationId)||A.is(G.annotationId))}w.is=v})(S||(e.AnnotatedTextEdit=S={}));var U;(function(w){function N(R,v){return{textDocument:R,edits:v}}w.create=N;function L(R){var v=R;return M.defined(v)&&Ee.is(v.textDocument)&&Array.isArray(v.edits)}w.is=L})(U||(e.TextDocumentEdit=U={}));var k;(function(w){function N(R,v,B){var G={kind:"create",uri:R};return v!==void 0&&(v.overwrite!==void 0||v.ignoreIfExists!==void 0)&&(G.options=v),B!==void 0&&(G.annotationId=B),G}w.create=N;function L(R){var v=R;return v&&v.kind==="create"&&M.string(v.uri)&&(v.options===void 0||(v.options.overwrite===void 0||M.boolean(v.options.overwrite))&&(v.options.ignoreIfExists===void 0||M.boolean(v.options.ignoreIfExists)))&&(v.annotationId===void 0||A.is(v.annotationId))}w.is=L})(k||(e.CreateFile=k={}));var H;(function(w){function N(R,v,B,G){var be={kind:"rename",oldUri:R,newUri:v};return B!==void 0&&(B.overwrite!==void 0||B.ignoreIfExists!==void 0)&&(be.options=B),G!==void 0&&(be.annotationId=G),be}w.create=N;function L(R){var v=R;return v&&v.kind==="rename"&&M.string(v.oldUri)&&M.string(v.newUri)&&(v.options===void 0||(v.options.overwrite===void 0||M.boolean(v.options.overwrite))&&(v.options.ignoreIfExists===void 0||M.boolean(v.options.ignoreIfExists)))&&(v.annotationId===void 0||A.is(v.annotationId))}w.is=L})(H||(e.RenameFile=H={}));var X;(function(w){function N(R,v,B){var G={kind:"delete",uri:R};return v!==void 0&&(v.recursive!==void 0||v.ignoreIfNotExists!==void 0)&&(G.options=v),B!==void 0&&(G.annotationId=B),G}w.create=N;function L(R){var v=R;return v&&v.kind==="delete"&&M.string(v.uri)&&(v.options===void 0||(v.options.recursive===void 0||M.boolean(v.options.recursive))&&(v.options.ignoreIfNotExists===void 0||M.boolean(v.options.ignoreIfNotExists)))&&(v.annotationId===void 0||A.is(v.annotationId))}w.is=L})(X||(e.DeleteFile=X={}));var Z;(function(w){function N(L){var R=L;return R&&(R.changes!==void 0||R.documentChanges!==void 0)&&(R.documentChanges===void 0||R.documentChanges.every(function(v){return M.string(v.kind)?k.is(v)||H.is(v)||X.is(v):U.is(v)}))}w.is=N})(Z||(e.WorkspaceEdit=Z={}));var le=function(){function w(N,L){this.edits=N,this.changeAnnotations=L}return w.prototype.insert=function(N,L,R){var v,B;if(R===void 0?v=m.insert(N,L):A.is(R)?(B=R,v=S.insert(N,L,R)):(this.assertChangeAnnotations(this.changeAnnotations),B=this.changeAnnotations.manage(R),v=S.insert(N,L,B)),this.edits.push(v),B!==void 0)return B},w.prototype.replace=function(N,L,R){var v,B;if(R===void 0?v=m.replace(N,L):A.is(R)?(B=R,v=S.replace(N,L,R)):(this.assertChangeAnnotations(this.changeAnnotations),B=this.changeAnnotations.manage(R),v=S.replace(N,L,B)),this.edits.push(v),B!==void 0)return B},w.prototype.delete=function(N,L){var R,v;if(L===void 0?R=m.del(N):A.is(L)?(v=L,R=S.del(N,L)):(this.assertChangeAnnotations(this.changeAnnotations),v=this.changeAnnotations.manage(L),R=S.del(N,v)),this.edits.push(R),v!==void 0)return v},w.prototype.add=function(N){this.edits.push(N)},w.prototype.all=function(){return this.edits},w.prototype.clear=function(){this.edits.splice(0,this.edits.length)},w.prototype.assertChangeAnnotations=function(N){if(N===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},w}(),he=function(){function w(N){this._annotations=N===void 0?Object.create(null):N,this._counter=0,this._size=0}return w.prototype.all=function(){return this._annotations},Object.defineProperty(w.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),w.prototype.manage=function(N,L){var R;if(A.is(N)?R=N:(R=this.nextId(),L=N),this._annotations[R]!==void 0)throw new Error("Id ".concat(R," is already in use."));if(L===void 0)throw new Error("No annotation provided for id ".concat(R));return this._annotations[R]=L,this._size++,R},w.prototype.nextId=function(){return this._counter++,this._counter.toString()},w}(),ne=function(){function w(N){var L=this;this._textEditChanges=Object.create(null),N!==void 0?(this._workspaceEdit=N,N.documentChanges?(this._changeAnnotations=new he(N.changeAnnotations),N.changeAnnotations=this._changeAnnotations.all(),N.documentChanges.forEach(function(R){if(U.is(R)){var v=new le(R.edits,L._changeAnnotations);L._textEditChanges[R.textDocument.uri]=v}})):N.changes&&Object.keys(N.changes).forEach(function(R){var v=new le(N.changes[R]);L._textEditChanges[R]=v})):this._workspaceEdit={}}return Object.defineProperty(w.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),w.prototype.getTextEditChange=function(N){if(Ee.is(N)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var L={uri:N.uri,version:N.version},R=this._textEditChanges[L.uri];if(!R){var v=[],B={textDocument:L,edits:v};this._workspaceEdit.documentChanges.push(B),R=new le(v,this._changeAnnotations),this._textEditChanges[L.uri]=R}return R}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var R=this._textEditChanges[N];if(!R){var v=[];this._workspaceEdit.changes[N]=v,R=new le(v),this._textEditChanges[N]=R}return R}},w.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new he,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},w.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},w.prototype.createFile=function(N,L,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var v;P.is(L)||A.is(L)?v=L:R=L;var B,G;if(v===void 0?B=k.create(N,R):(G=A.is(v)?v:this._changeAnnotations.manage(v),B=k.create(N,R,G)),this._workspaceEdit.documentChanges.push(B),G!==void 0)return G},w.prototype.renameFile=function(N,L,R,v){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var B;P.is(R)||A.is(R)?B=R:v=R;var G,be;if(B===void 0?G=H.create(N,L,v):(be=A.is(B)?B:this._changeAnnotations.manage(B),G=H.create(N,L,v,be)),this._workspaceEdit.documentChanges.push(G),be!==void 0)return be},w.prototype.deleteFile=function(N,L,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var v;P.is(L)||A.is(L)?v=L:R=L;var B,G;if(v===void 0?B=X.create(N,R):(G=A.is(v)?v:this._changeAnnotations.manage(v),B=X.create(N,R,G)),this._workspaceEdit.documentChanges.push(B),G!==void 0)return G},w}();e.WorkspaceChange=ne;var qe;(function(w){function N(R){return{uri:R}}w.create=N;function L(R){var v=R;return M.defined(v)&&M.string(v.uri)}w.is=L})(qe||(e.TextDocumentIdentifier=qe={}));var me;(function(w){function N(R,v){return{uri:R,version:v}}w.create=N;function L(R){var v=R;return M.defined(v)&&M.string(v.uri)&&M.integer(v.version)}w.is=L})(me||(e.VersionedTextDocumentIdentifier=me={}));var Ee;(function(w){function N(R,v){return{uri:R,version:v}}w.create=N;function L(R){var v=R;return M.defined(v)&&M.string(v.uri)&&(v.version===null||M.integer(v.version))}w.is=L})(Ee||(e.OptionalVersionedTextDocumentIdentifier=Ee={}));var Xe;(function(w){function N(R,v,B,G){return{uri:R,languageId:v,version:B,text:G}}w.create=N;function L(R){var v=R;return M.defined(v)&&M.string(v.uri)&&M.string(v.languageId)&&M.integer(v.version)&&M.string(v.text)}w.is=L})(Xe||(e.TextDocumentItem=Xe={}));var vt;(function(w){w.PlainText="plaintext",w.Markdown="markdown";function N(L){var R=L;return R===w.PlainText||R===w.Markdown}w.is=N})(vt||(e.MarkupKind=vt={}));var bt;(function(w){function N(L){var R=L;return M.objectLiteral(L)&&vt.is(R.kind)&&M.string(R.value)}w.is=N})(bt||(e.MarkupContent=bt={}));var on;(function(w){w.Text=1,w.Method=2,w.Function=3,w.Constructor=4,w.Field=5,w.Variable=6,w.Class=7,w.Interface=8,w.Module=9,w.Property=10,w.Unit=11,w.Value=12,w.Enum=13,w.Keyword=14,w.Snippet=15,w.Color=16,w.File=17,w.Reference=18,w.Folder=19,w.EnumMember=20,w.Constant=21,w.Struct=22,w.Event=23,w.Operator=24,w.TypeParameter=25})(on||(e.CompletionItemKind=on={}));var Wt;(function(w){w.PlainText=1,w.Snippet=2})(Wt||(e.InsertTextFormat=Wt={}));var wt;(function(w){w.Deprecated=1})(wt||(e.CompletionItemTag=wt={}));var _;(function(w){function N(R,v,B){return{newText:R,insert:v,replace:B}}w.create=N;function L(R){var v=R;return v&&M.string(v.newText)&&a.is(v.insert)&&a.is(v.replace)}w.is=L})(_||(e.InsertReplaceEdit=_={}));var D;(function(w){w.asIs=1,w.adjustIndentation=2})(D||(e.InsertTextMode=D={}));var V;(function(w){function N(L){var R=L;return R&&(M.string(R.detail)||R.detail===void 0)&&(M.string(R.description)||R.description===void 0)}w.is=N})(V||(e.CompletionItemLabelDetails=V={}));var j;(function(w){function N(L){return{label:L}}w.create=N})(j||(e.CompletionItem=j={}));var ye;(function(w){function N(L,R){return{items:L||[],isIncomplete:!!R}}w.create=N})(ye||(e.CompletionList=ye={}));var Ne;(function(w){function N(R){return R.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}w.fromPlainText=N;function L(R){var v=R;return M.string(v)||M.objectLiteral(v)&&M.string(v.language)&&M.string(v.value)}w.is=L})(Ne||(e.MarkedString=Ne={}));var ve;(function(w){function N(L){var R=L;return!!R&&M.objectLiteral(R)&&(bt.is(R.contents)||Ne.is(R.contents)||M.typedArray(R.contents,Ne.is))&&(L.range===void 0||a.is(L.range))}w.is=N})(ve||(e.Hover=ve={}));var Ue;(function(w){function N(L,R){return R?{label:L,documentation:R}:{label:L}}w.create=N})(Ue||(e.ParameterInformation=Ue={}));var Le;(function(w){function N(L,R){for(var v=[],B=2;B<arguments.length;B++)v[B-2]=arguments[B];var G={label:L};return M.defined(R)&&(G.documentation=R),M.defined(v)?G.parameters=v:G.parameters=[],G}w.create=N})(Le||(e.SignatureInformation=Le={}));var et;(function(w){w.Text=1,w.Read=2,w.Write=3})(et||(e.DocumentHighlightKind=et={}));var rt;(function(w){function N(L,R){var v={range:L};return M.number(R)&&(v.kind=R),v}w.create=N})(rt||(e.DocumentHighlight=rt={}));var Ct;(function(w){w.File=1,w.Module=2,w.Namespace=3,w.Package=4,w.Class=5,w.Method=6,w.Property=7,w.Field=8,w.Constructor=9,w.Enum=10,w.Interface=11,w.Function=12,w.Variable=13,w.Constant=14,w.String=15,w.Number=16,w.Boolean=17,w.Array=18,w.Object=19,w.Key=20,w.Null=21,w.EnumMember=22,w.Struct=23,w.Event=24,w.Operator=25,w.TypeParameter=26})(Ct||(e.SymbolKind=Ct={}));var qn;(function(w){w.Deprecated=1})(qn||(e.SymbolTag=qn={}));var ut;(function(w){function N(L,R,v,B,G){var be={name:L,kind:R,location:{uri:B,range:v}};return G&&(be.containerName=G),be}w.create=N})(ut||(e.SymbolInformation=ut={}));var Et;(function(w){function N(L,R,v,B){return B!==void 0?{name:L,kind:R,location:{uri:v,range:B}}:{name:L,kind:R,location:{uri:v}}}w.create=N})(Et||(e.WorkspaceSymbol=Et={}));var xt;(function(w){function N(R,v,B,G,be,lt){var Ze={name:R,detail:v,kind:B,range:G,selectionRange:be};return lt!==void 0&&(Ze.children=lt),Ze}w.create=N;function L(R){var v=R;return v&&M.string(v.name)&&M.number(v.kind)&&a.is(v.range)&&a.is(v.selectionRange)&&(v.detail===void 0||M.string(v.detail))&&(v.deprecated===void 0||M.boolean(v.deprecated))&&(v.children===void 0||Array.isArray(v.children))&&(v.tags===void 0||Array.isArray(v.tags))}w.is=L})(xt||(e.DocumentSymbol=xt={}));var wn;(function(w){w.Empty="",w.QuickFix="quickfix",w.Refactor="refactor",w.RefactorExtract="refactor.extract",w.RefactorInline="refactor.inline",w.RefactorRewrite="refactor.rewrite",w.Source="source",w.SourceOrganizeImports="source.organizeImports",w.SourceFixAll="source.fixAll"})(wn||(e.CodeActionKind=wn={}));var sn;(function(w){w.Invoked=1,w.Automatic=2})(sn||(e.CodeActionTriggerKind=sn={}));var Yn;(function(w){function N(R,v,B){var G={diagnostics:R};return v!=null&&(G.only=v),B!=null&&(G.triggerKind=B),G}w.create=N;function L(R){var v=R;return M.defined(v)&&M.typedArray(v.diagnostics,C.is)&&(v.only===void 0||M.typedArray(v.only,M.string))&&(v.triggerKind===void 0||v.triggerKind===sn.Invoked||v.triggerKind===sn.Automatic)}w.is=L})(Yn||(e.CodeActionContext=Yn={}));var dr;(function(w){function N(R,v,B){var G={title:R},be=!0;return typeof v=="string"?(be=!1,G.kind=v):y.is(v)?G.command=v:G.edit=v,be&&B!==void 0&&(G.kind=B),G}w.create=N;function L(R){var v=R;return v&&M.string(v.title)&&(v.diagnostics===void 0||M.typedArray(v.diagnostics,C.is))&&(v.kind===void 0||M.string(v.kind))&&(v.edit!==void 0||v.command!==void 0)&&(v.command===void 0||y.is(v.command))&&(v.isPreferred===void 0||M.boolean(v.isPreferred))&&(v.edit===void 0||Z.is(v.edit))}w.is=L})(dr||(e.CodeAction=dr={}));var Hn;(function(w){function N(R,v){var B={range:R};return M.defined(v)&&(B.data=v),B}w.create=N;function L(R){var v=R;return M.defined(v)&&a.is(v.range)&&(M.undefined(v.command)||y.is(v.command))}w.is=L})(Hn||(e.CodeLens=Hn={}));var fr;(function(w){function N(R,v){return{tabSize:R,insertSpaces:v}}w.create=N;function L(R){var v=R;return M.defined(v)&&M.uinteger(v.tabSize)&&M.boolean(v.insertSpaces)}w.is=L})(fr||(e.FormattingOptions=fr={}));var Zt;(function(w){function N(R,v,B){return{range:R,target:v,data:B}}w.create=N;function L(R){var v=R;return M.defined(v)&&a.is(v.range)&&(M.undefined(v.target)||M.string(v.target))}w.is=L})(Zt||(e.DocumentLink=Zt={}));var q;(function(w){function N(R,v){return{range:R,parent:v}}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&a.is(v.range)&&(v.parent===void 0||w.is(v.parent))}w.is=L})(q||(e.SelectionRange=q={}));var K;(function(w){w.namespace="namespace",w.type="type",w.class="class",w.enum="enum",w.interface="interface",w.struct="struct",w.typeParameter="typeParameter",w.parameter="parameter",w.variable="variable",w.property="property",w.enumMember="enumMember",w.event="event",w.function="function",w.method="method",w.macro="macro",w.keyword="keyword",w.modifier="modifier",w.comment="comment",w.string="string",w.number="number",w.regexp="regexp",w.operator="operator",w.decorator="decorator"})(K||(e.SemanticTokenTypes=K={}));var te;(function(w){w.declaration="declaration",w.definition="definition",w.readonly="readonly",w.static="static",w.deprecated="deprecated",w.abstract="abstract",w.async="async",w.modification="modification",w.documentation="documentation",w.defaultLibrary="defaultLibrary"})(te||(e.SemanticTokenModifiers=te={}));var ie;(function(w){function N(L){var R=L;return M.objectLiteral(R)&&(R.resultId===void 0||typeof R.resultId=="string")&&Array.isArray(R.data)&&(R.data.length===0||typeof R.data[0]=="number")}w.is=N})(ie||(e.SemanticTokens=ie={}));var Me;(function(w){function N(R,v){return{range:R,text:v}}w.create=N;function L(R){var v=R;return v!=null&&a.is(v.range)&&M.string(v.text)}w.is=L})(Me||(e.InlineValueText=Me={}));var Ae;(function(w){function N(R,v,B){return{range:R,variableName:v,caseSensitiveLookup:B}}w.create=N;function L(R){var v=R;return v!=null&&a.is(v.range)&&M.boolean(v.caseSensitiveLookup)&&(M.string(v.variableName)||v.variableName===void 0)}w.is=L})(Ae||(e.InlineValueVariableLookup=Ae={}));var ze;(function(w){function N(R,v){return{range:R,expression:v}}w.create=N;function L(R){var v=R;return v!=null&&a.is(v.range)&&(M.string(v.expression)||v.expression===void 0)}w.is=L})(ze||(e.InlineValueEvaluatableExpression=ze={}));var Ye;(function(w){function N(R,v){return{frameId:R,stoppedLocation:v}}w.create=N;function L(R){var v=R;return M.defined(v)&&a.is(R.stoppedLocation)}w.is=L})(Ye||(e.InlineValueContext=Ye={}));var _e;(function(w){w.Type=1,w.Parameter=2;function N(L){return L===1||L===2}w.is=N})(_e||(e.InlayHintKind=_e={}));var $e;(function(w){function N(R){return{value:R}}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&(v.tooltip===void 0||M.string(v.tooltip)||bt.is(v.tooltip))&&(v.location===void 0||c.is(v.location))&&(v.command===void 0||y.is(v.command))}w.is=L})($e||(e.InlayHintLabelPart=$e={}));var xe;(function(w){function N(R,v,B){var G={position:R,label:v};return B!==void 0&&(G.kind=B),G}w.create=N;function L(R){var v=R;return M.objectLiteral(v)&&s.is(v.position)&&(M.string(v.label)||M.typedArray(v.label,$e.is))&&(v.kind===void 0||_e.is(v.kind))&&v.textEdits===void 0||M.typedArray(v.textEdits,m.is)&&(v.tooltip===void 0||M.string(v.tooltip)||bt.is(v.tooltip))&&(v.paddingLeft===void 0||M.boolean(v.paddingLeft))&&(v.paddingRight===void 0||M.boolean(v.paddingRight))}w.is=L})(xe||(e.InlayHint=xe={}));var Je;(function(w){function N(L){return{kind:"snippet",value:L}}w.createSnippet=N})(Je||(e.StringValue=Je={}));var Dt;(function(w){function N(L,R,v,B){return{insertText:L,filterText:R,range:v,command:B}}w.create=N})(Dt||(e.InlineCompletionItem=Dt={}));var Nt;(function(w){function N(L){return{items:L}}w.create=N})(Nt||(e.InlineCompletionList=Nt={}));var Pr;(function(w){w.Invoked=0,w.Automatic=1})(Pr||(e.InlineCompletionTriggerKind=Pr={}));var Er;(function(w){function N(L,R){return{range:L,text:R}}w.create=N})(Er||(e.SelectedCompletionInfo=Er={}));var b;(function(w){function N(L,R){return{triggerKind:L,selectedCompletionInfo:R}}w.create=N})(b||(e.InlineCompletionContext=b={}));var W;(function(w){function N(L){var R=L;return M.objectLiteral(R)&&r.is(R.uri)&&M.string(R.name)}w.is=N})(W||(e.WorkspaceFolder=W={})),e.EOL=[`
`,`\r
`,"\r"];var ae;(function(w){function N(B,G,be,lt){return new He(B,G,be,lt)}w.create=N;function L(B){var G=B;return!!(M.defined(G)&&M.string(G.uri)&&(M.undefined(G.languageId)||M.string(G.languageId))&&M.uinteger(G.lineCount)&&M.func(G.getText)&&M.func(G.positionAt)&&M.func(G.offsetAt))}w.is=L;function R(B,G){for(var be=B.getText(),lt=v(G,function(Jn,f){var F=Jn.range.start.line-f.range.start.line;return F===0?Jn.range.start.character-f.range.start.character:F}),Ze=be.length,an=lt.length-1;an>=0;an--){var Cn=lt[an],Un=B.offsetAt(Cn.range.start),Pe=B.offsetAt(Cn.range.end);if(Pe<=Ze)be=be.substring(0,Un)+Cn.newText+be.substring(Pe,be.length);else throw new Error("Overlapping edit");Ze=Un}return be}w.applyEdits=R;function v(B,G){if(B.length<=1)return B;var be=B.length/2|0,lt=B.slice(0,be),Ze=B.slice(be);v(lt,G),v(Ze,G);for(var an=0,Cn=0,Un=0;an<lt.length&&Cn<Ze.length;){var Pe=G(lt[an],Ze[Cn]);Pe<=0?B[Un++]=lt[an++]:B[Un++]=Ze[Cn++]}for(;an<lt.length;)B[Un++]=lt[an++];for(;Cn<Ze.length;)B[Un++]=Ze[Cn++];return B}})(ae||(e.TextDocument=ae={}));var He=function(){function w(N,L,R,v){this._uri=N,this._languageId=L,this._version=R,this._content=v,this._lineOffsets=void 0}return Object.defineProperty(w.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),w.prototype.getText=function(N){if(N){var L=this.offsetAt(N.start),R=this.offsetAt(N.end);return this._content.substring(L,R)}return this._content},w.prototype.update=function(N,L){this._content=N.text,this._version=L,this._lineOffsets=void 0},w.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var N=[],L=this._content,R=!0,v=0;v<L.length;v++){R&&(N.push(v),R=!1);var B=L.charAt(v);R=B==="\r"||B===`
`,B==="\r"&&v+1<L.length&&L.charAt(v+1)===`
`&&v++}R&&L.length>0&&N.push(L.length),this._lineOffsets=N}return this._lineOffsets},w.prototype.positionAt=function(N){N=Math.max(Math.min(N,this._content.length),0);var L=this.getLineOffsets(),R=0,v=L.length;if(v===0)return s.create(0,N);for(;R<v;){var B=Math.floor((R+v)/2);L[B]>N?v=B:R=B+1}var G=R-1;return s.create(G,N-L[G])},w.prototype.offsetAt=function(N){var L=this.getLineOffsets();if(N.line>=L.length)return this._content.length;if(N.line<0)return 0;var R=L[N.line],v=N.line+1<L.length?L[N.line+1]:this._content.length;return Math.max(Math.min(R+N.character,v),R)},Object.defineProperty(w.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),w}(),M;(function(w){var N=Object.prototype.toString;function L(Pe){return typeof Pe<"u"}w.defined=L;function R(Pe){return typeof Pe>"u"}w.undefined=R;function v(Pe){return Pe===!0||Pe===!1}w.boolean=v;function B(Pe){return N.call(Pe)==="[object String]"}w.string=B;function G(Pe){return N.call(Pe)==="[object Number]"}w.number=G;function be(Pe,Jn,f){return N.call(Pe)==="[object Number]"&&Jn<=Pe&&Pe<=f}w.numberRange=be;function lt(Pe){return N.call(Pe)==="[object Number]"&&-2147483648<=Pe&&Pe<=2147483647}w.integer=lt;function Ze(Pe){return N.call(Pe)==="[object Number]"&&0<=Pe&&Pe<=2147483647}w.uinteger=Ze;function an(Pe){return N.call(Pe)==="[object Function]"}w.func=an;function Cn(Pe){return Pe!==null&&typeof Pe=="object"}w.objectLiteral=Cn;function Un(Pe,Jn){return Array.isArray(Pe)&&Pe.every(Jn)}w.typedArray=Un})(M||(M={}))})});var dt=$(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.ProtocolNotificationType=fn.ProtocolNotificationType0=fn.ProtocolRequestType=fn.ProtocolRequestType0=fn.RegistrationType=fn.MessageDirection=void 0;var Ai=oi(),xy;(function(n){n.clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both"})(xy||(fn.MessageDirection=xy={}));var td=class{constructor(e){this.method=e}};fn.RegistrationType=td;var nd=class extends Ai.RequestType0{constructor(e){super(e)}};fn.ProtocolRequestType0=nd;var rd=class extends Ai.RequestType{constructor(e){super(e,Ai.ParameterStructures.byName)}};fn.ProtocolRequestType=rd;var id=class extends Ai.NotificationType0{constructor(e){super(e)}};fn.ProtocolNotificationType0=id;var od=class extends Ai.NotificationType{constructor(e){super(e,Ai.ParameterStructures.byName)}};fn.ProtocolNotificationType=od});var xa=$(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.objectLiteral=It.typedArray=It.stringArray=It.array=It.func=It.error=It.number=It.string=It.boolean=void 0;function S_(n){return n===!0||n===!1}It.boolean=S_;function Iy(n){return typeof n=="string"||n instanceof String}It.string=Iy;function T_(n){return typeof n=="number"||n instanceof Number}It.number=T_;function __(n){return n instanceof Error}It.error=__;function R_(n){return typeof n=="function"}It.func=R_;function ky(n){return Array.isArray(n)}It.array=ky;function P_(n){return ky(n)&&n.every(e=>Iy(e))}It.stringArray=P_;function E_(n,e){return Array.isArray(n)&&n.every(e)}It.typedArray=E_;function x_(n){return n!==null&&typeof n=="object"}It.objectLiteral=x_});var Ny=$(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.ImplementationRequest=void 0;var Oy=dt(),qy;(function(n){n.method="textDocument/implementation",n.messageDirection=Oy.MessageDirection.clientToServer,n.type=new Oy.ProtocolRequestType(n.method)})(qy||(Ia.ImplementationRequest=qy={}))});var Fy=$(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.TypeDefinitionRequest=void 0;var Ly=dt(),Ay;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=Ly.MessageDirection.clientToServer,n.type=new Ly.ProtocolRequestType(n.method)})(Ay||(ka.TypeDefinitionRequest=Ay={}))});var $y=$(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.DidChangeWorkspaceFoldersNotification=Fi.WorkspaceFoldersRequest=void 0;var Oa=dt(),My;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=Oa.MessageDirection.serverToClient,n.type=new Oa.ProtocolRequestType0(n.method)})(My||(Fi.WorkspaceFoldersRequest=My={}));var jy;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=Oa.MessageDirection.clientToServer,n.type=new Oa.ProtocolNotificationType(n.method)})(jy||(Fi.DidChangeWorkspaceFoldersNotification=jy={}))});var By=$(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.ConfigurationRequest=void 0;var Hy=dt(),Uy;(function(n){n.method="workspace/configuration",n.messageDirection=Hy.MessageDirection.serverToClient,n.type=new Hy.ProtocolRequestType(n.method)})(Uy||(qa.ConfigurationRequest=Uy={}))});var zy=$(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.ColorPresentationRequest=Mi.DocumentColorRequest=void 0;var Na=dt(),Vy;(function(n){n.method="textDocument/documentColor",n.messageDirection=Na.MessageDirection.clientToServer,n.type=new Na.ProtocolRequestType(n.method)})(Vy||(Mi.DocumentColorRequest=Vy={}));var Wy;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=Na.MessageDirection.clientToServer,n.type=new Na.ProtocolRequestType(n.method)})(Wy||(Mi.ColorPresentationRequest=Wy={}))});var Gy=$(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.FoldingRangeRefreshRequest=ji.FoldingRangeRequest=void 0;var La=dt(),Ky;(function(n){n.method="textDocument/foldingRange",n.messageDirection=La.MessageDirection.clientToServer,n.type=new La.ProtocolRequestType(n.method)})(Ky||(ji.FoldingRangeRequest=Ky={}));var Xy;(function(n){n.method="workspace/foldingRange/refresh",n.messageDirection=La.MessageDirection.serverToClient,n.type=new La.ProtocolRequestType0(n.method)})(Xy||(ji.FoldingRangeRefreshRequest=Xy={}))});var Jy=$(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.DeclarationRequest=void 0;var Qy=dt(),Yy;(function(n){n.method="textDocument/declaration",n.messageDirection=Qy.MessageDirection.clientToServer,n.type=new Qy.ProtocolRequestType(n.method)})(Yy||(Aa.DeclarationRequest=Yy={}))});var tv=$(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.SelectionRangeRequest=void 0;var Zy=dt(),ev;(function(n){n.method="textDocument/selectionRange",n.messageDirection=Zy.MessageDirection.clientToServer,n.type=new Zy.ProtocolRequestType(n.method)})(ev||(Fa.SelectionRangeRequest=ev={}))});var ov=$(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.WorkDoneProgressCancelNotification=jr.WorkDoneProgressCreateRequest=jr.WorkDoneProgress=void 0;var I_=oi(),Ma=dt(),nv;(function(n){n.type=new I_.ProgressType;function e(t){return t===n.type}n.is=e})(nv||(jr.WorkDoneProgress=nv={}));var rv;(function(n){n.method="window/workDoneProgress/create",n.messageDirection=Ma.MessageDirection.serverToClient,n.type=new Ma.ProtocolRequestType(n.method)})(rv||(jr.WorkDoneProgressCreateRequest=rv={}));var iv;(function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=Ma.MessageDirection.clientToServer,n.type=new Ma.ProtocolNotificationType(n.method)})(iv||(jr.WorkDoneProgressCancelNotification=iv={}))});var uv=$($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.CallHierarchyOutgoingCallsRequest=$r.CallHierarchyIncomingCallsRequest=$r.CallHierarchyPrepareRequest=void 0;var $i=dt(),sv;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=$i.MessageDirection.clientToServer,n.type=new $i.ProtocolRequestType(n.method)})(sv||($r.CallHierarchyPrepareRequest=sv={}));var av;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=$i.MessageDirection.clientToServer,n.type=new $i.ProtocolRequestType(n.method)})(av||($r.CallHierarchyIncomingCallsRequest=av={}));var cv;(function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=$i.MessageDirection.clientToServer,n.type=new $i.ProtocolRequestType(n.method)})(cv||($r.CallHierarchyOutgoingCallsRequest=cv={}))});var gv=$(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.SemanticTokensRefreshRequest=hn.SemanticTokensRangeRequest=hn.SemanticTokensDeltaRequest=hn.SemanticTokensRequest=hn.SemanticTokensRegistrationType=hn.TokenFormat=void 0;var br=dt(),lv;(function(n){n.Relative="relative"})(lv||(hn.TokenFormat=lv={}));var Co;(function(n){n.method="textDocument/semanticTokens",n.type=new br.RegistrationType(n.method)})(Co||(hn.SemanticTokensRegistrationType=Co={}));var dv;(function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=br.MessageDirection.clientToServer,n.type=new br.ProtocolRequestType(n.method),n.registrationMethod=Co.method})(dv||(hn.SemanticTokensRequest=dv={}));var fv;(function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=br.MessageDirection.clientToServer,n.type=new br.ProtocolRequestType(n.method),n.registrationMethod=Co.method})(fv||(hn.SemanticTokensDeltaRequest=fv={}));var hv;(function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=br.MessageDirection.clientToServer,n.type=new br.ProtocolRequestType(n.method),n.registrationMethod=Co.method})(hv||(hn.SemanticTokensRangeRequest=hv={}));var pv;(function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=br.MessageDirection.serverToClient,n.type=new br.ProtocolRequestType0(n.method)})(pv||(hn.SemanticTokensRefreshRequest=pv={}))});var vv=$(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.ShowDocumentRequest=void 0;var mv=dt(),yv;(function(n){n.method="window/showDocument",n.messageDirection=mv.MessageDirection.serverToClient,n.type=new mv.ProtocolRequestType(n.method)})(yv||(ja.ShowDocumentRequest=yv={}))});var Cv=$($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.LinkedEditingRangeRequest=void 0;var bv=dt(),wv;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=bv.MessageDirection.clientToServer,n.type=new bv.ProtocolRequestType(n.method)})(wv||($a.LinkedEditingRangeRequest=wv={}))});var xv=$(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.WillDeleteFilesRequest=Xt.DidDeleteFilesNotification=Xt.DidRenameFilesNotification=Xt.WillRenameFilesRequest=Xt.DidCreateFilesNotification=Xt.WillCreateFilesRequest=Xt.FileOperationPatternKind=void 0;var Ln=dt(),Dv;(function(n){n.file="file",n.folder="folder"})(Dv||(Xt.FileOperationPatternKind=Dv={}));var Sv;(function(n){n.method="workspace/willCreateFiles",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolRequestType(n.method)})(Sv||(Xt.WillCreateFilesRequest=Sv={}));var Tv;(function(n){n.method="workspace/didCreateFiles",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolNotificationType(n.method)})(Tv||(Xt.DidCreateFilesNotification=Tv={}));var _v;(function(n){n.method="workspace/willRenameFiles",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolRequestType(n.method)})(_v||(Xt.WillRenameFilesRequest=_v={}));var Rv;(function(n){n.method="workspace/didRenameFiles",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolNotificationType(n.method)})(Rv||(Xt.DidRenameFilesNotification=Rv={}));var Pv;(function(n){n.method="workspace/didDeleteFiles",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolNotificationType(n.method)})(Pv||(Xt.DidDeleteFilesNotification=Pv={}));var Ev;(function(n){n.method="workspace/willDeleteFiles",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolRequestType(n.method)})(Ev||(Xt.WillDeleteFilesRequest=Ev={}))});var Nv=$(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.MonikerRequest=Hr.MonikerKind=Hr.UniquenessLevel=void 0;var Iv=dt(),kv;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(kv||(Hr.UniquenessLevel=kv={}));var Ov;(function(n){n.$import="import",n.$export="export",n.local="local"})(Ov||(Hr.MonikerKind=Ov={}));var qv;(function(n){n.method="textDocument/moniker",n.messageDirection=Iv.MessageDirection.clientToServer,n.type=new Iv.ProtocolRequestType(n.method)})(qv||(Hr.MonikerRequest=qv={}))});var Mv=$(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.TypeHierarchySubtypesRequest=Ur.TypeHierarchySupertypesRequest=Ur.TypeHierarchyPrepareRequest=void 0;var Hi=dt(),Lv;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=Hi.MessageDirection.clientToServer,n.type=new Hi.ProtocolRequestType(n.method)})(Lv||(Ur.TypeHierarchyPrepareRequest=Lv={}));var Av;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=Hi.MessageDirection.clientToServer,n.type=new Hi.ProtocolRequestType(n.method)})(Av||(Ur.TypeHierarchySupertypesRequest=Av={}));var Fv;(function(n){n.method="typeHierarchy/subtypes",n.messageDirection=Hi.MessageDirection.clientToServer,n.type=new Hi.ProtocolRequestType(n.method)})(Fv||(Ur.TypeHierarchySubtypesRequest=Fv={}))});var Hv=$(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.InlineValueRefreshRequest=Ui.InlineValueRequest=void 0;var Ha=dt(),jv;(function(n){n.method="textDocument/inlineValue",n.messageDirection=Ha.MessageDirection.clientToServer,n.type=new Ha.ProtocolRequestType(n.method)})(jv||(Ui.InlineValueRequest=jv={}));var $v;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=Ha.MessageDirection.serverToClient,n.type=new Ha.ProtocolRequestType0(n.method)})($v||(Ui.InlineValueRefreshRequest=$v={}))});var Wv=$(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.InlayHintRefreshRequest=Br.InlayHintResolveRequest=Br.InlayHintRequest=void 0;var Bi=dt(),Uv;(function(n){n.method="textDocument/inlayHint",n.messageDirection=Bi.MessageDirection.clientToServer,n.type=new Bi.ProtocolRequestType(n.method)})(Uv||(Br.InlayHintRequest=Uv={}));var Bv;(function(n){n.method="inlayHint/resolve",n.messageDirection=Bi.MessageDirection.clientToServer,n.type=new Bi.ProtocolRequestType(n.method)})(Bv||(Br.InlayHintResolveRequest=Bv={}));var Vv;(function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=Bi.MessageDirection.serverToClient,n.type=new Bi.ProtocolRequestType0(n.method)})(Vv||(Br.InlayHintRefreshRequest=Vv={}))});var Jv=$(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.DiagnosticRefreshRequest=An.WorkspaceDiagnosticRequest=An.DocumentDiagnosticRequest=An.DocumentDiagnosticReportKind=An.DiagnosticServerCancellationData=void 0;var Yv=oi(),k_=xa(),Vi=dt(),zv;(function(n){function e(t){let r=t;return r&&k_.boolean(r.retriggerRequest)}n.is=e})(zv||(An.DiagnosticServerCancellationData=zv={}));var Kv;(function(n){n.Full="full",n.Unchanged="unchanged"})(Kv||(An.DocumentDiagnosticReportKind=Kv={}));var Xv;(function(n){n.method="textDocument/diagnostic",n.messageDirection=Vi.MessageDirection.clientToServer,n.type=new Vi.ProtocolRequestType(n.method),n.partialResult=new Yv.ProgressType})(Xv||(An.DocumentDiagnosticRequest=Xv={}));var Gv;(function(n){n.method="workspace/diagnostic",n.messageDirection=Vi.MessageDirection.clientToServer,n.type=new Vi.ProtocolRequestType(n.method),n.partialResult=new Yv.ProgressType})(Gv||(An.WorkspaceDiagnosticRequest=Gv={}));var Qv;(function(n){n.method="workspace/diagnostic/refresh",n.messageDirection=Vi.MessageDirection.serverToClient,n.type=new Vi.ProtocolRequestType0(n.method)})(Qv||(An.DiagnosticRefreshRequest=Qv={}))});var ob=$(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.DidCloseNotebookDocumentNotification=Tt.DidSaveNotebookDocumentNotification=Tt.DidChangeNotebookDocumentNotification=Tt.NotebookCellArrayChange=Tt.DidOpenNotebookDocumentNotification=Tt.NotebookDocumentSyncRegistrationType=Tt.NotebookDocument=Tt.NotebookCell=Tt.ExecutionSummary=Tt.NotebookCellKind=void 0;var Do=Ea(),Wn=xa(),ir=dt(),sd;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(sd||(Tt.NotebookCellKind=sd={}));var ad;(function(n){function e(i,o){let s={executionOrder:i};return(o===!0||o===!1)&&(s.success=o),s}n.create=e;function t(i){let o=i;return Wn.objectLiteral(o)&&Do.uinteger.is(o.executionOrder)&&(o.success===void 0||Wn.boolean(o.success))}n.is=t;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}n.equals=r})(ad||(Tt.ExecutionSummary=ad={}));var Ua;(function(n){function e(o,s){return{kind:o,document:s}}n.create=e;function t(o){let s=o;return Wn.objectLiteral(s)&&sd.is(s.kind)&&Do.DocumentUri.is(s.document)&&(s.metadata===void 0||Wn.objectLiteral(s.metadata))}n.is=t;function r(o,s){let a=new Set;return o.document!==s.document&&a.add("document"),o.kind!==s.kind&&a.add("kind"),o.executionSummary!==s.executionSummary&&a.add("executionSummary"),(o.metadata!==void 0||s.metadata!==void 0)&&!i(o.metadata,s.metadata)&&a.add("metadata"),(o.executionSummary!==void 0||s.executionSummary!==void 0)&&!ad.equals(o.executionSummary,s.executionSummary)&&a.add("executionSummary"),a}n.diff=r;function i(o,s){if(o===s)return!0;if(o==null||s===null||s===void 0||typeof o!=typeof s||typeof o!="object")return!1;let a=Array.isArray(o),c=Array.isArray(s);if(a!==c)return!1;if(a&&c){if(o.length!==s.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],s[u]))return!1}if(Wn.objectLiteral(o)&&Wn.objectLiteral(s)){let u=Object.keys(o),l=Object.keys(s);if(u.length!==l.length||(u.sort(),l.sort(),!i(u,l)))return!1;for(let g=0;g<u.length;g++){let d=u[g];if(!i(o[d],s[d]))return!1}}return!0}})(Ua||(Tt.NotebookCell=Ua={}));var Zv;(function(n){function e(r,i,o,s){return{uri:r,notebookType:i,version:o,cells:s}}n.create=e;function t(r){let i=r;return Wn.objectLiteral(i)&&Wn.string(i.uri)&&Do.integer.is(i.version)&&Wn.typedArray(i.cells,Ua.is)}n.is=t})(Zv||(Tt.NotebookDocument=Zv={}));var Wi;(function(n){n.method="notebookDocument/sync",n.messageDirection=ir.MessageDirection.clientToServer,n.type=new ir.RegistrationType(n.method)})(Wi||(Tt.NotebookDocumentSyncRegistrationType=Wi={}));var eb;(function(n){n.method="notebookDocument/didOpen",n.messageDirection=ir.MessageDirection.clientToServer,n.type=new ir.ProtocolNotificationType(n.method),n.registrationMethod=Wi.method})(eb||(Tt.DidOpenNotebookDocumentNotification=eb={}));var tb;(function(n){function e(r){let i=r;return Wn.objectLiteral(i)&&Do.uinteger.is(i.start)&&Do.uinteger.is(i.deleteCount)&&(i.cells===void 0||Wn.typedArray(i.cells,Ua.is))}n.is=e;function t(r,i,o){let s={start:r,deleteCount:i};return o!==void 0&&(s.cells=o),s}n.create=t})(tb||(Tt.NotebookCellArrayChange=tb={}));var nb;(function(n){n.method="notebookDocument/didChange",n.messageDirection=ir.MessageDirection.clientToServer,n.type=new ir.ProtocolNotificationType(n.method),n.registrationMethod=Wi.method})(nb||(Tt.DidChangeNotebookDocumentNotification=nb={}));var rb;(function(n){n.method="notebookDocument/didSave",n.messageDirection=ir.MessageDirection.clientToServer,n.type=new ir.ProtocolNotificationType(n.method),n.registrationMethod=Wi.method})(rb||(Tt.DidSaveNotebookDocumentNotification=rb={}));var ib;(function(n){n.method="notebookDocument/didClose",n.messageDirection=ir.MessageDirection.clientToServer,n.type=new ir.ProtocolNotificationType(n.method),n.registrationMethod=Wi.method})(ib||(Tt.DidCloseNotebookDocumentNotification=ib={}))});var cb=$(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.InlineCompletionRequest=void 0;var sb=dt(),ab;(function(n){n.method="textDocument/inlineCompletion",n.messageDirection=sb.MessageDirection.clientToServer,n.type=new sb.ProtocolRequestType(n.method)})(ab||(Ba.InlineCompletionRequest=ab={}))});var Cw=$(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.WorkspaceSymbolRequest=x.CodeActionResolveRequest=x.CodeActionRequest=x.DocumentSymbolRequest=x.DocumentHighlightRequest=x.ReferencesRequest=x.DefinitionRequest=x.SignatureHelpRequest=x.SignatureHelpTriggerKind=x.HoverRequest=x.CompletionResolveRequest=x.CompletionRequest=x.CompletionTriggerKind=x.PublishDiagnosticsNotification=x.WatchKind=x.RelativePattern=x.FileChangeType=x.DidChangeWatchedFilesNotification=x.WillSaveTextDocumentWaitUntilRequest=x.WillSaveTextDocumentNotification=x.TextDocumentSaveReason=x.DidSaveTextDocumentNotification=x.DidCloseTextDocumentNotification=x.DidChangeTextDocumentNotification=x.TextDocumentContentChangeEvent=x.DidOpenTextDocumentNotification=x.TextDocumentSyncKind=x.TelemetryEventNotification=x.LogMessageNotification=x.ShowMessageRequest=x.ShowMessageNotification=x.MessageType=x.DidChangeConfigurationNotification=x.ExitNotification=x.ShutdownRequest=x.InitializedNotification=x.InitializeErrorCodes=x.InitializeRequest=x.WorkDoneProgressOptions=x.TextDocumentRegistrationOptions=x.StaticRegistrationOptions=x.PositionEncodingKind=x.FailureHandlingKind=x.ResourceOperationKind=x.UnregistrationRequest=x.RegistrationRequest=x.DocumentSelector=x.NotebookCellTextDocumentFilter=x.NotebookDocumentFilter=x.TextDocumentFilter=void 0;x.MonikerRequest=x.MonikerKind=x.UniquenessLevel=x.WillDeleteFilesRequest=x.DidDeleteFilesNotification=x.WillRenameFilesRequest=x.DidRenameFilesNotification=x.WillCreateFilesRequest=x.DidCreateFilesNotification=x.FileOperationPatternKind=x.LinkedEditingRangeRequest=x.ShowDocumentRequest=x.SemanticTokensRegistrationType=x.SemanticTokensRefreshRequest=x.SemanticTokensRangeRequest=x.SemanticTokensDeltaRequest=x.SemanticTokensRequest=x.TokenFormat=x.CallHierarchyPrepareRequest=x.CallHierarchyOutgoingCallsRequest=x.CallHierarchyIncomingCallsRequest=x.WorkDoneProgressCancelNotification=x.WorkDoneProgressCreateRequest=x.WorkDoneProgress=x.SelectionRangeRequest=x.DeclarationRequest=x.FoldingRangeRefreshRequest=x.FoldingRangeRequest=x.ColorPresentationRequest=x.DocumentColorRequest=x.ConfigurationRequest=x.DidChangeWorkspaceFoldersNotification=x.WorkspaceFoldersRequest=x.TypeDefinitionRequest=x.ImplementationRequest=x.ApplyWorkspaceEditRequest=x.ExecuteCommandRequest=x.PrepareRenameRequest=x.RenameRequest=x.PrepareSupportDefaultBehavior=x.DocumentOnTypeFormattingRequest=x.DocumentRangesFormattingRequest=x.DocumentRangeFormattingRequest=x.DocumentFormattingRequest=x.DocumentLinkResolveRequest=x.DocumentLinkRequest=x.CodeLensRefreshRequest=x.CodeLensResolveRequest=x.CodeLensRequest=x.WorkspaceSymbolResolveRequest=void 0;x.InlineCompletionRequest=x.DidCloseNotebookDocumentNotification=x.DidSaveNotebookDocumentNotification=x.DidChangeNotebookDocumentNotification=x.NotebookCellArrayChange=x.DidOpenNotebookDocumentNotification=x.NotebookDocumentSyncRegistrationType=x.NotebookDocument=x.NotebookCell=x.ExecutionSummary=x.NotebookCellKind=x.DiagnosticRefreshRequest=x.WorkspaceDiagnosticRequest=x.DocumentDiagnosticRequest=x.DocumentDiagnosticReportKind=x.DiagnosticServerCancellationData=x.InlayHintRefreshRequest=x.InlayHintResolveRequest=x.InlayHintRequest=x.InlineValueRefreshRequest=x.InlineValueRequest=x.TypeHierarchySupertypesRequest=x.TypeHierarchySubtypesRequest=x.TypeHierarchyPrepareRequest=void 0;var ee=dt(),ub=Ea(),Mt=xa(),O_=Ny();Object.defineProperty(x,"ImplementationRequest",{enumerable:!0,get:function(){return O_.ImplementationRequest}});var q_=Fy();Object.defineProperty(x,"TypeDefinitionRequest",{enumerable:!0,get:function(){return q_.TypeDefinitionRequest}});var yw=$y();Object.defineProperty(x,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return yw.WorkspaceFoldersRequest}});Object.defineProperty(x,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return yw.DidChangeWorkspaceFoldersNotification}});var N_=By();Object.defineProperty(x,"ConfigurationRequest",{enumerable:!0,get:function(){return N_.ConfigurationRequest}});var vw=zy();Object.defineProperty(x,"DocumentColorRequest",{enumerable:!0,get:function(){return vw.DocumentColorRequest}});Object.defineProperty(x,"ColorPresentationRequest",{enumerable:!0,get:function(){return vw.ColorPresentationRequest}});var bw=Gy();Object.defineProperty(x,"FoldingRangeRequest",{enumerable:!0,get:function(){return bw.FoldingRangeRequest}});Object.defineProperty(x,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return bw.FoldingRangeRefreshRequest}});var L_=Jy();Object.defineProperty(x,"DeclarationRequest",{enumerable:!0,get:function(){return L_.DeclarationRequest}});var A_=tv();Object.defineProperty(x,"SelectionRangeRequest",{enumerable:!0,get:function(){return A_.SelectionRangeRequest}});var fd=ov();Object.defineProperty(x,"WorkDoneProgress",{enumerable:!0,get:function(){return fd.WorkDoneProgress}});Object.defineProperty(x,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return fd.WorkDoneProgressCreateRequest}});Object.defineProperty(x,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return fd.WorkDoneProgressCancelNotification}});var hd=uv();Object.defineProperty(x,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return hd.CallHierarchyIncomingCallsRequest}});Object.defineProperty(x,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return hd.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(x,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return hd.CallHierarchyPrepareRequest}});var zi=gv();Object.defineProperty(x,"TokenFormat",{enumerable:!0,get:function(){return zi.TokenFormat}});Object.defineProperty(x,"SemanticTokensRequest",{enumerable:!0,get:function(){return zi.SemanticTokensRequest}});Object.defineProperty(x,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return zi.SemanticTokensDeltaRequest}});Object.defineProperty(x,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return zi.SemanticTokensRangeRequest}});Object.defineProperty(x,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return zi.SemanticTokensRefreshRequest}});Object.defineProperty(x,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return zi.SemanticTokensRegistrationType}});var F_=vv();Object.defineProperty(x,"ShowDocumentRequest",{enumerable:!0,get:function(){return F_.ShowDocumentRequest}});var M_=Cv();Object.defineProperty(x,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return M_.LinkedEditingRangeRequest}});var si=xv();Object.defineProperty(x,"FileOperationPatternKind",{enumerable:!0,get:function(){return si.FileOperationPatternKind}});Object.defineProperty(x,"DidCreateFilesNotification",{enumerable:!0,get:function(){return si.DidCreateFilesNotification}});Object.defineProperty(x,"WillCreateFilesRequest",{enumerable:!0,get:function(){return si.WillCreateFilesRequest}});Object.defineProperty(x,"DidRenameFilesNotification",{enumerable:!0,get:function(){return si.DidRenameFilesNotification}});Object.defineProperty(x,"WillRenameFilesRequest",{enumerable:!0,get:function(){return si.WillRenameFilesRequest}});Object.defineProperty(x,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return si.DidDeleteFilesNotification}});Object.defineProperty(x,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return si.WillDeleteFilesRequest}});var pd=Nv();Object.defineProperty(x,"UniquenessLevel",{enumerable:!0,get:function(){return pd.UniquenessLevel}});Object.defineProperty(x,"MonikerKind",{enumerable:!0,get:function(){return pd.MonikerKind}});Object.defineProperty(x,"MonikerRequest",{enumerable:!0,get:function(){return pd.MonikerRequest}});var gd=Mv();Object.defineProperty(x,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return gd.TypeHierarchyPrepareRequest}});Object.defineProperty(x,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return gd.TypeHierarchySubtypesRequest}});Object.defineProperty(x,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return gd.TypeHierarchySupertypesRequest}});var ww=Hv();Object.defineProperty(x,"InlineValueRequest",{enumerable:!0,get:function(){return ww.InlineValueRequest}});Object.defineProperty(x,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return ww.InlineValueRefreshRequest}});var md=Wv();Object.defineProperty(x,"InlayHintRequest",{enumerable:!0,get:function(){return md.InlayHintRequest}});Object.defineProperty(x,"InlayHintResolveRequest",{enumerable:!0,get:function(){return md.InlayHintResolveRequest}});Object.defineProperty(x,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return md.InlayHintRefreshRequest}});var So=Jv();Object.defineProperty(x,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return So.DiagnosticServerCancellationData}});Object.defineProperty(x,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return So.DocumentDiagnosticReportKind}});Object.defineProperty(x,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return So.DocumentDiagnosticRequest}});Object.defineProperty(x,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return So.WorkspaceDiagnosticRequest}});Object.defineProperty(x,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return So.DiagnosticRefreshRequest}});var or=ob();Object.defineProperty(x,"NotebookCellKind",{enumerable:!0,get:function(){return or.NotebookCellKind}});Object.defineProperty(x,"ExecutionSummary",{enumerable:!0,get:function(){return or.ExecutionSummary}});Object.defineProperty(x,"NotebookCell",{enumerable:!0,get:function(){return or.NotebookCell}});Object.defineProperty(x,"NotebookDocument",{enumerable:!0,get:function(){return or.NotebookDocument}});Object.defineProperty(x,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return or.NotebookDocumentSyncRegistrationType}});Object.defineProperty(x,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return or.DidOpenNotebookDocumentNotification}});Object.defineProperty(x,"NotebookCellArrayChange",{enumerable:!0,get:function(){return or.NotebookCellArrayChange}});Object.defineProperty(x,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return or.DidChangeNotebookDocumentNotification}});Object.defineProperty(x,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return or.DidSaveNotebookDocumentNotification}});Object.defineProperty(x,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return or.DidCloseNotebookDocumentNotification}});var j_=cb();Object.defineProperty(x,"InlineCompletionRequest",{enumerable:!0,get:function(){return j_.InlineCompletionRequest}});var cd;(function(n){function e(t){let r=t;return Mt.string(r)||Mt.string(r.language)||Mt.string(r.scheme)||Mt.string(r.pattern)}n.is=e})(cd||(x.TextDocumentFilter=cd={}));var ud;(function(n){function e(t){let r=t;return Mt.objectLiteral(r)&&(Mt.string(r.notebookType)||Mt.string(r.scheme)||Mt.string(r.pattern))}n.is=e})(ud||(x.NotebookDocumentFilter=ud={}));var ld;(function(n){function e(t){let r=t;return Mt.objectLiteral(r)&&(Mt.string(r.notebook)||ud.is(r.notebook))&&(r.language===void 0||Mt.string(r.language))}n.is=e})(ld||(x.NotebookCellTextDocumentFilter=ld={}));var dd;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!Mt.string(r)&&!cd.is(r)&&!ld.is(r))return!1;return!0}n.is=e})(dd||(x.DocumentSelector=dd={}));var lb;(function(n){n.method="client/registerCapability",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolRequestType(n.method)})(lb||(x.RegistrationRequest=lb={}));var db;(function(n){n.method="client/unregisterCapability",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolRequestType(n.method)})(db||(x.UnregistrationRequest=db={}));var fb;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(fb||(x.ResourceOperationKind=fb={}));var hb;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(hb||(x.FailureHandlingKind=hb={}));var pb;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(pb||(x.PositionEncodingKind=pb={}));var gb;(function(n){function e(t){let r=t;return r&&Mt.string(r.id)&&r.id.length>0}n.hasId=e})(gb||(x.StaticRegistrationOptions=gb={}));var mb;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||dd.is(r.documentSelector))}n.is=e})(mb||(x.TextDocumentRegistrationOptions=mb={}));var yb;(function(n){function e(r){let i=r;return Mt.objectLiteral(i)&&(i.workDoneProgress===void 0||Mt.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&Mt.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(yb||(x.WorkDoneProgressOptions=yb={}));var vb;(function(n){n.method="initialize",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(vb||(x.InitializeRequest=vb={}));var bb;(function(n){n.unknownProtocolVersion=1})(bb||(x.InitializeErrorCodes=bb={}));var wb;(function(n){n.method="initialized",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType(n.method)})(wb||(x.InitializedNotification=wb={}));var Cb;(function(n){n.method="shutdown",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType0(n.method)})(Cb||(x.ShutdownRequest=Cb={}));var Db;(function(n){n.method="exit",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType0(n.method)})(Db||(x.ExitNotification=Db={}));var Sb;(function(n){n.method="workspace/didChangeConfiguration",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType(n.method)})(Sb||(x.DidChangeConfigurationNotification=Sb={}));var Tb;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4,n.Debug=5})(Tb||(x.MessageType=Tb={}));var _b;(function(n){n.method="window/showMessage",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolNotificationType(n.method)})(_b||(x.ShowMessageNotification=_b={}));var Rb;(function(n){n.method="window/showMessageRequest",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolRequestType(n.method)})(Rb||(x.ShowMessageRequest=Rb={}));var Pb;(function(n){n.method="window/logMessage",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolNotificationType(n.method)})(Pb||(x.LogMessageNotification=Pb={}));var Eb;(function(n){n.method="telemetry/event",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolNotificationType(n.method)})(Eb||(x.TelemetryEventNotification=Eb={}));var xb;(function(n){n.None=0,n.Full=1,n.Incremental=2})(xb||(x.TextDocumentSyncKind=xb={}));var Ib;(function(n){n.method="textDocument/didOpen",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType(n.method)})(Ib||(x.DidOpenTextDocumentNotification=Ib={}));var kb;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})(kb||(x.TextDocumentContentChangeEvent=kb={}));var Ob;(function(n){n.method="textDocument/didChange",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType(n.method)})(Ob||(x.DidChangeTextDocumentNotification=Ob={}));var qb;(function(n){n.method="textDocument/didClose",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType(n.method)})(qb||(x.DidCloseTextDocumentNotification=qb={}));var Nb;(function(n){n.method="textDocument/didSave",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType(n.method)})(Nb||(x.DidSaveTextDocumentNotification=Nb={}));var Lb;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(Lb||(x.TextDocumentSaveReason=Lb={}));var Ab;(function(n){n.method="textDocument/willSave",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType(n.method)})(Ab||(x.WillSaveTextDocumentNotification=Ab={}));var Fb;(function(n){n.method="textDocument/willSaveWaitUntil",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Fb||(x.WillSaveTextDocumentWaitUntilRequest=Fb={}));var Mb;(function(n){n.method="workspace/didChangeWatchedFiles",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolNotificationType(n.method)})(Mb||(x.DidChangeWatchedFilesNotification=Mb={}));var jb;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(jb||(x.FileChangeType=jb={}));var $b;(function(n){function e(t){let r=t;return Mt.objectLiteral(r)&&(ub.URI.is(r.baseUri)||ub.WorkspaceFolder.is(r.baseUri))&&Mt.string(r.pattern)}n.is=e})($b||(x.RelativePattern=$b={}));var Hb;(function(n){n.Create=1,n.Change=2,n.Delete=4})(Hb||(x.WatchKind=Hb={}));var Ub;(function(n){n.method="textDocument/publishDiagnostics",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolNotificationType(n.method)})(Ub||(x.PublishDiagnosticsNotification=Ub={}));var Bb;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(Bb||(x.CompletionTriggerKind=Bb={}));var Vb;(function(n){n.method="textDocument/completion",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Vb||(x.CompletionRequest=Vb={}));var Wb;(function(n){n.method="completionItem/resolve",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Wb||(x.CompletionResolveRequest=Wb={}));var zb;(function(n){n.method="textDocument/hover",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(zb||(x.HoverRequest=zb={}));var Kb;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(Kb||(x.SignatureHelpTriggerKind=Kb={}));var Xb;(function(n){n.method="textDocument/signatureHelp",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Xb||(x.SignatureHelpRequest=Xb={}));var Gb;(function(n){n.method="textDocument/definition",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Gb||(x.DefinitionRequest=Gb={}));var Qb;(function(n){n.method="textDocument/references",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Qb||(x.ReferencesRequest=Qb={}));var Yb;(function(n){n.method="textDocument/documentHighlight",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Yb||(x.DocumentHighlightRequest=Yb={}));var Jb;(function(n){n.method="textDocument/documentSymbol",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Jb||(x.DocumentSymbolRequest=Jb={}));var Zb;(function(n){n.method="textDocument/codeAction",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(Zb||(x.CodeActionRequest=Zb={}));var ew;(function(n){n.method="codeAction/resolve",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(ew||(x.CodeActionResolveRequest=ew={}));var tw;(function(n){n.method="workspace/symbol",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(tw||(x.WorkspaceSymbolRequest=tw={}));var nw;(function(n){n.method="workspaceSymbol/resolve",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(nw||(x.WorkspaceSymbolResolveRequest=nw={}));var rw;(function(n){n.method="textDocument/codeLens",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(rw||(x.CodeLensRequest=rw={}));var iw;(function(n){n.method="codeLens/resolve",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(iw||(x.CodeLensResolveRequest=iw={}));var ow;(function(n){n.method="workspace/codeLens/refresh",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolRequestType0(n.method)})(ow||(x.CodeLensRefreshRequest=ow={}));var sw;(function(n){n.method="textDocument/documentLink",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(sw||(x.DocumentLinkRequest=sw={}));var aw;(function(n){n.method="documentLink/resolve",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(aw||(x.DocumentLinkResolveRequest=aw={}));var cw;(function(n){n.method="textDocument/formatting",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(cw||(x.DocumentFormattingRequest=cw={}));var uw;(function(n){n.method="textDocument/rangeFormatting",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(uw||(x.DocumentRangeFormattingRequest=uw={}));var lw;(function(n){n.method="textDocument/rangesFormatting",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(lw||(x.DocumentRangesFormattingRequest=lw={}));var dw;(function(n){n.method="textDocument/onTypeFormatting",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(dw||(x.DocumentOnTypeFormattingRequest=dw={}));var fw;(function(n){n.Identifier=1})(fw||(x.PrepareSupportDefaultBehavior=fw={}));var hw;(function(n){n.method="textDocument/rename",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(hw||(x.RenameRequest=hw={}));var pw;(function(n){n.method="textDocument/prepareRename",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(pw||(x.PrepareRenameRequest=pw={}));var gw;(function(n){n.method="workspace/executeCommand",n.messageDirection=ee.MessageDirection.clientToServer,n.type=new ee.ProtocolRequestType(n.method)})(gw||(x.ExecuteCommandRequest=gw={}));var mw;(function(n){n.method="workspace/applyEdit",n.messageDirection=ee.MessageDirection.serverToClient,n.type=new ee.ProtocolRequestType("workspace/applyEdit")})(mw||(x.ApplyWorkspaceEditRequest=mw={}))});var Sw=$(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.createProtocolConnection=void 0;var Dw=oi();function $_(n,e,t,r){return Dw.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Dw.createMessageConnection)(n,e,t,r)}Va.createProtocolConnection=$_});var _w=$(pn=>{"use strict";var H_=pn&&pn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Wa=pn&&pn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&H_(e,n,t)};Object.defineProperty(pn,"__esModule",{value:!0});pn.LSPErrorCodes=pn.createProtocolConnection=void 0;Wa(oi(),pn);Wa(Ea(),pn);Wa(dt(),pn);Wa(Cw(),pn);var U_=Sw();Object.defineProperty(pn,"createProtocolConnection",{enumerable:!0,get:function(){return U_.createProtocolConnection}});var Tw;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(Tw||(pn.LSPErrorCodes=Tw={}))});var we=$(sr=>{"use strict";var B_=sr&&sr.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Rw=sr&&sr.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&B_(e,n,t)};Object.defineProperty(sr,"__esModule",{value:!0});sr.createProtocolConnection=void 0;var V_=ed();Rw(ed(),sr);Rw(_w(),sr);function W_(n,e,t,r){return(0,V_.createMessageConnection)(n,e,t,r)}sr.createProtocolConnection=W_});var za=$(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.forEach=Gt.mapAsync=Gt.map=Gt.clearTestMode=Gt.setTestMode=Gt.Semaphore=Gt.Delayer=void 0;var _o=we(),yd=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,_o.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Gt.Delayer=yd;var vd=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,_o.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Gt.Semaphore=vd;var bd=!1;function z_(){bd=!0}Gt.setTestMode=z_;function K_(){bd=!1}Gt.clearTestMode=K_;var Pw=15,To=class{constructor(e=Pw){this.yieldAfter=bd===!0?Math.max(e,2):Math.max(e,Pw),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function X_(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),o=new To(r?.yieldAfter);function s(c){o.start();for(let u=c;u<n.length;u++)if(i[u]=e(n[u]),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,_o.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}Gt.map=X_;async function G_(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),o=new To(r?.yieldAfter);async function s(c){o.start();for(let u=c;u<n.length;u++)if(i[u]=await e(n[u],t),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=await s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,_o.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}Gt.mapAsync=G_;async function Q_(n,e,t,r){if(n.length===0)return;let i=new To(r?.yieldAfter);function o(a){i.start();for(let c=a;c<n.length;c++)if(e(n[c]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),c+1;return-1}let s=o(0);for(;s!==-1&&!(t!==void 0&&t.isCancellationRequested);)s=await new Promise(a=>{(0,_o.RAL)().timer.setImmediate(()=>{a(o(s))})})}Gt.forEach=Q_});var Dd=$(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var Y_=require("vscode"),wd=class extends Y_.CompletionItem{constructor(e){super(e)}};Cd.default=wd});var _d=$(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});var J_=require("vscode"),Sd=class extends J_.CodeLens{constructor(e){super(e)}};Td.default=Sd});var Ed=$(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});var Z_=require("vscode"),Rd=class extends Z_.DocumentLink{constructor(e,t){super(e,t)}};Pd.default=Rd});var kd=$(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});var eR=require("vscode"),xd=class extends eR.CodeAction{constructor(e,t){super(e),this.data=t}};Id.default=xd});var Nd=$(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.ProtocolDiagnostic=Ki.DiagnosticCode=void 0;var tR=require("vscode"),Od=Nn(),Ew;(function(n){function e(t){let r=t;return r!=null&&(Od.number(r.value)||Od.string(r.value))&&Od.string(r.target)}n.is=e})(Ew||(Ki.DiagnosticCode=Ew={}));var qd=class extends tR.Diagnostic{constructor(e,t,r,i){super(e,t,r),this.data=i,this.hasDiagnosticCode=!1}};Ki.ProtocolDiagnostic=qd});var Fd=$(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});var nR=require("vscode"),Ld=class extends nR.CallHierarchyItem{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,s),a!==void 0&&(this.data=a)}};Ad.default=Ld});var $d=$(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});var rR=require("vscode"),Md=class extends rR.TypeHierarchyItem{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,s),a!==void 0&&(this.data=a)}};jd.default=Md});var Bd=$(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});var Ka=require("vscode"),Hd=class extends Ka.SymbolInformation{constructor(e,t,r,i,o){let s=!(i instanceof Ka.Uri);super(e,t,r,s?i:new Ka.Location(i,new Ka.Range(0,0,0,0))),this.hasRange=s,o!==void 0&&(this.data=o)}};Ud.default=Hd});var zd=$(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});var iR=require("vscode"),Vd=class extends iR.InlayHint{constructor(e,t,r){super(e,t,r)}};Wd.default=Vd});var Ow=$(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.createConverter=void 0;var kt=require("vscode"),Ce=we(),ai=Nn(),xw=za(),oR=Dd(),sR=_d(),aR=Ed(),Iw=kd(),kw=Nd(),cR=Fd(),uR=$d(),lR=Bd(),dR=zd(),Kd;(function(n){function e(t){let r=t;return r&&!!r.inserting&&!!r.replacing}n.is=e})(Kd||(Kd={}));function fR(n){let t=n||(b=>b.toString());function r(b){return t(b)}function i(b){return{uri:t(b.uri)}}function o(b){return{uri:t(b.uri),languageId:b.languageId,version:b.version,text:b.getText()}}function s(b){return{uri:t(b.uri),version:b.version}}function a(b){return{textDocument:o(b)}}function c(b){let W=b;return!!W.document&&!!W.contentChanges}function u(b){let W=b;return!!W.uri&&!!W.version}function l(b,W,ae){if(u(b))return{textDocument:{uri:t(b.uri),version:b.version},contentChanges:[{text:b.getText()}]};if(c(b)){let He=W,M=ae;return{textDocument:{uri:t(He),version:M},contentChanges:b.contentChanges.map(N=>{let L=N.range;return{range:{start:{line:L.start.line,character:L.start.character},end:{line:L.end.line,character:L.end.character}},rangeLength:N.rangeLength,text:N.text}})}}else throw Error("Unsupported text document change parameter")}function g(b){return{textDocument:i(b)}}function d(b,W=!1){let ae={textDocument:i(b)};return W&&(ae.text=b.getText()),ae}function p(b){switch(b){case kt.TextDocumentSaveReason.Manual:return Ce.TextDocumentSaveReason.Manual;case kt.TextDocumentSaveReason.AfterDelay:return Ce.TextDocumentSaveReason.AfterDelay;case kt.TextDocumentSaveReason.FocusOut:return Ce.TextDocumentSaveReason.FocusOut}return Ce.TextDocumentSaveReason.Manual}function h(b){return{textDocument:i(b.document),reason:p(b.reason)}}function T(b){return{files:b.files.map(W=>({uri:t(W)}))}}function I(b){return{files:b.files.map(W=>({oldUri:t(W.oldUri),newUri:t(W.newUri)}))}}function O(b){return{files:b.files.map(W=>({uri:t(W)}))}}function E(b){return{files:b.files.map(W=>({uri:t(W)}))}}function C(b){return{files:b.files.map(W=>({oldUri:t(W.oldUri),newUri:t(W.newUri)}))}}function y(b){return{files:b.files.map(W=>({uri:t(W)}))}}function m(b,W){return{textDocument:i(b),position:he(W)}}function P(b){switch(b){case kt.CompletionTriggerKind.TriggerCharacter:return Ce.CompletionTriggerKind.TriggerCharacter;case kt.CompletionTriggerKind.TriggerForIncompleteCompletions:return Ce.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return Ce.CompletionTriggerKind.Invoked}}function A(b,W,ae){return{textDocument:i(b),position:he(W),context:{triggerKind:P(ae.triggerKind),triggerCharacter:ae.triggerCharacter}}}function S(b){switch(b){case kt.SignatureHelpTriggerKind.Invoke:return Ce.SignatureHelpTriggerKind.Invoked;case kt.SignatureHelpTriggerKind.TriggerCharacter:return Ce.SignatureHelpTriggerKind.TriggerCharacter;case kt.SignatureHelpTriggerKind.ContentChange:return Ce.SignatureHelpTriggerKind.ContentChange}}function U(b){return{label:b.label}}function k(b){return b.map(U)}function H(b){return{label:b.label,parameters:k(b.parameters)}}function X(b){return b.map(H)}function Z(b){return b===void 0?b:{signatures:X(b.signatures),activeSignature:b.activeSignature,activeParameter:b.activeParameter}}function le(b,W,ae){return{textDocument:i(b),position:he(W),context:{isRetrigger:ae.isRetrigger,triggerCharacter:ae.triggerCharacter,triggerKind:S(ae.triggerKind),activeSignatureHelp:Z(ae.activeSignatureHelp)}}}function he(b){return{line:b.line,character:b.character}}function ne(b){return b==null?b:{line:b.line>Ce.uinteger.MAX_VALUE?Ce.uinteger.MAX_VALUE:b.line,character:b.character>Ce.uinteger.MAX_VALUE?Ce.uinteger.MAX_VALUE:b.character}}function qe(b,W){return xw.map(b,ne,W)}function me(b){return b.map(ne)}function Ee(b){return b==null?b:{start:ne(b.start),end:ne(b.end)}}function Xe(b){return b.map(Ee)}function vt(b){return b==null?b:Ce.Location.create(r(b.uri),Ee(b.range))}function bt(b){switch(b){case kt.DiagnosticSeverity.Error:return Ce.DiagnosticSeverity.Error;case kt.DiagnosticSeverity.Warning:return Ce.DiagnosticSeverity.Warning;case kt.DiagnosticSeverity.Information:return Ce.DiagnosticSeverity.Information;case kt.DiagnosticSeverity.Hint:return Ce.DiagnosticSeverity.Hint}}function on(b){if(!b)return;let W=[];for(let ae of b){let He=Wt(ae);He!==void 0&&W.push(He)}return W.length>0?W:void 0}function Wt(b){switch(b){case kt.DiagnosticTag.Unnecessary:return Ce.DiagnosticTag.Unnecessary;case kt.DiagnosticTag.Deprecated:return Ce.DiagnosticTag.Deprecated;default:return}}function wt(b){return{message:b.message,location:vt(b.location)}}function _(b){return b.map(wt)}function D(b){if(b!=null)return ai.number(b)||ai.string(b)?b:{value:b.value,target:r(b.target)}}function V(b){let W=Ce.Diagnostic.create(Ee(b.range),b.message),ae=b instanceof kw.ProtocolDiagnostic?b:void 0;ae!==void 0&&ae.data!==void 0&&(W.data=ae.data);let He=D(b.code);return kw.DiagnosticCode.is(He)?ae!==void 0&&ae.hasDiagnosticCode?W.code=He:(W.code=He.value,W.codeDescription={href:He.target}):W.code=He,ai.number(b.severity)&&(W.severity=bt(b.severity)),Array.isArray(b.tags)&&(W.tags=on(b.tags)),b.relatedInformation&&(W.relatedInformation=_(b.relatedInformation)),b.source&&(W.source=b.source),W}function j(b,W){return b==null?b:xw.map(b,V,W)}function ye(b){return b==null?b:b.map(V)}function Ne(b,W){switch(b){case"$string":return W;case Ce.MarkupKind.PlainText:return{kind:b,value:W};case Ce.MarkupKind.Markdown:return{kind:b,value:W.value};default:return`Unsupported Markup content received. Kind is: ${b}`}}function ve(b){switch(b){case kt.CompletionItemTag.Deprecated:return Ce.CompletionItemTag.Deprecated}}function Ue(b){if(b===void 0)return b;let W=[];for(let ae of b){let He=ve(ae);He!==void 0&&W.push(He)}return W}function Le(b,W){return W!==void 0?W:b+1}function et(b,W=!1){let ae,He;ai.string(b.label)?ae=b.label:(ae=b.label.label,W&&(b.label.detail!==void 0||b.label.description!==void 0)&&(He={detail:b.label.detail,description:b.label.description}));let M={label:ae};He!==void 0&&(M.labelDetails=He);let w=b instanceof oR.default?b:void 0;b.detail&&(M.detail=b.detail),b.documentation&&(!w||w.documentationFormat==="$string"?M.documentation=b.documentation:M.documentation=Ne(w.documentationFormat,b.documentation)),b.filterText&&(M.filterText=b.filterText),rt(M,b),ai.number(b.kind)&&(M.kind=Le(b.kind,w&&w.originalItemKind)),b.sortText&&(M.sortText=b.sortText),b.additionalTextEdits&&(M.additionalTextEdits=ut(b.additionalTextEdits)),b.commitCharacters&&(M.commitCharacters=b.commitCharacters.slice()),b.command&&(M.command=ie(b.command)),(b.preselect===!0||b.preselect===!1)&&(M.preselect=b.preselect);let N=Ue(b.tags);if(w){if(w.data!==void 0&&(M.data=w.data),w.deprecated===!0||w.deprecated===!1){if(w.deprecated===!0&&N!==void 0&&N.length>0){let L=N.indexOf(kt.CompletionItemTag.Deprecated);L!==-1&&N.splice(L,1)}M.deprecated=w.deprecated}w.insertTextMode!==void 0&&(M.insertTextMode=w.insertTextMode)}return N!==void 0&&N.length>0&&(M.tags=N),M.insertTextMode===void 0&&b.keepWhitespace===!0&&(M.insertTextMode=Ce.InsertTextMode.adjustIndentation),M}function rt(b,W){let ae=Ce.InsertTextFormat.PlainText,He,M;W.textEdit?(He=W.textEdit.newText,M=W.textEdit.range):W.insertText instanceof kt.SnippetString?(ae=Ce.InsertTextFormat.Snippet,He=W.insertText.value):He=W.insertText,W.range&&(M=W.range),b.insertTextFormat=ae,W.fromEdit&&He!==void 0&&M!==void 0?b.textEdit=Ct(He,M):b.insertText=He}function Ct(b,W){return Kd.is(W)?Ce.InsertReplaceEdit.create(b,Ee(W.inserting),Ee(W.replacing)):{newText:b,range:Ee(W)}}function qn(b){return{range:Ee(b.range),newText:b.newText}}function ut(b){return b==null?b:b.map(qn)}function Et(b){return b<=kt.SymbolKind.TypeParameter?b+1:Ce.SymbolKind.Property}function xt(b){return b}function wn(b){return b.map(xt)}function sn(b,W,ae){return{textDocument:i(b),position:he(W),context:{includeDeclaration:ae.includeDeclaration}}}async function Yn(b,W){let ae=Ce.CodeAction.create(b.title);if(b instanceof Iw.default&&b.data!==void 0&&(ae.data=b.data),b.kind!==void 0&&(ae.kind=q(b.kind)),b.diagnostics!==void 0&&(ae.diagnostics=await j(b.diagnostics,W)),b.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return b.command!==void 0&&(ae.command=ie(b.command)),b.isPreferred!==void 0&&(ae.isPreferred=b.isPreferred),b.disabled!==void 0&&(ae.disabled={reason:b.disabled.reason}),ae}function dr(b){let W=Ce.CodeAction.create(b.title);if(b instanceof Iw.default&&b.data!==void 0&&(W.data=b.data),b.kind!==void 0&&(W.kind=q(b.kind)),b.diagnostics!==void 0&&(W.diagnostics=ye(b.diagnostics)),b.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return b.command!==void 0&&(W.command=ie(b.command)),b.isPreferred!==void 0&&(W.isPreferred=b.isPreferred),b.disabled!==void 0&&(W.disabled={reason:b.disabled.reason}),W}async function Hn(b,W){if(b==null)return b;let ae;return b.only&&ai.string(b.only.value)&&(ae=[b.only.value]),Ce.CodeActionContext.create(await j(b.diagnostics,W),ae,Zt(b.triggerKind))}function fr(b){if(b==null)return b;let W;return b.only&&ai.string(b.only.value)&&(W=[b.only.value]),Ce.CodeActionContext.create(ye(b.diagnostics),W,Zt(b.triggerKind))}function Zt(b){switch(b){case kt.CodeActionTriggerKind.Invoke:return Ce.CodeActionTriggerKind.Invoked;case kt.CodeActionTriggerKind.Automatic:return Ce.CodeActionTriggerKind.Automatic;default:return}}function q(b){if(b!=null)return b.value}function K(b){return b==null?b:Ce.InlineValueContext.create(b.frameId,Ee(b.stoppedLocation))}function te(b,W,ae){return{context:Ce.InlineCompletionContext.create(ae.triggerKind,ae.selectedCompletionInfo),textDocument:i(b),position:ne(W)}}function ie(b){let W=Ce.Command.create(b.title,b.command);return b.arguments&&(W.arguments=b.arguments),W}function Me(b){let W=Ce.CodeLens.create(Ee(b.range));return b.command&&(W.command=ie(b.command)),b instanceof sR.default&&b.data&&(W.data=b.data),W}function Ae(b,W){let ae={tabSize:b.tabSize,insertSpaces:b.insertSpaces};return W.trimTrailingWhitespace&&(ae.trimTrailingWhitespace=!0),W.trimFinalNewlines&&(ae.trimFinalNewlines=!0),W.insertFinalNewline&&(ae.insertFinalNewline=!0),ae}function ze(b){return{textDocument:i(b)}}function Ye(b){return{textDocument:i(b)}}function _e(b){let W=Ce.DocumentLink.create(Ee(b.range));b.target&&(W.target=r(b.target)),b.tooltip!==void 0&&(W.tooltip=b.tooltip);let ae=b instanceof aR.default?b:void 0;return ae&&ae.data&&(W.data=ae.data),W}function $e(b){return{textDocument:i(b)}}function xe(b){let W={name:b.name,kind:Et(b.kind),uri:r(b.uri),range:Ee(b.range),selectionRange:Ee(b.selectionRange)};return b.detail!==void 0&&b.detail.length>0&&(W.detail=b.detail),b.tags!==void 0&&(W.tags=wn(b.tags)),b instanceof cR.default&&b.data!==void 0&&(W.data=b.data),W}function Je(b){let W={name:b.name,kind:Et(b.kind),uri:r(b.uri),range:Ee(b.range),selectionRange:Ee(b.selectionRange)};return b.detail!==void 0&&b.detail.length>0&&(W.detail=b.detail),b.tags!==void 0&&(W.tags=wn(b.tags)),b instanceof uR.default&&b.data!==void 0&&(W.data=b.data),W}function Dt(b){let W=b instanceof lR.default?{name:b.name,kind:Et(b.kind),location:b.hasRange?vt(b.location):{uri:t(b.location.uri)},data:b.data}:{name:b.name,kind:Et(b.kind),location:vt(b.location)};return b.tags!==void 0&&(W.tags=wn(b.tags)),b.containerName!==""&&(W.containerName=b.containerName),W}function Nt(b){let W=typeof b.label=="string"?b.label:b.label.map(Pr),ae=Ce.InlayHint.create(ne(b.position),W);return b.kind!==void 0&&(ae.kind=b.kind),b.textEdits!==void 0&&(ae.textEdits=ut(b.textEdits)),b.tooltip!==void 0&&(ae.tooltip=Er(b.tooltip)),b.paddingLeft!==void 0&&(ae.paddingLeft=b.paddingLeft),b.paddingRight!==void 0&&(ae.paddingRight=b.paddingRight),b instanceof dR.default&&b.data!==void 0&&(ae.data=b.data),ae}function Pr(b){let W=Ce.InlayHintLabelPart.create(b.value);return b.location!==void 0&&(W.location=vt(b.location)),b.command!==void 0&&(W.command=ie(b.command)),b.tooltip!==void 0&&(W.tooltip=Er(b.tooltip)),W}function Er(b){return typeof b=="string"?b:{kind:Ce.MarkupKind.Markdown,value:b.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:l,asCloseTextDocumentParams:g,asSaveTextDocumentParams:d,asWillSaveTextDocumentParams:h,asDidCreateFilesParams:T,asDidRenameFilesParams:I,asDidDeleteFilesParams:O,asWillCreateFilesParams:E,asWillRenameFilesParams:C,asWillDeleteFilesParams:y,asTextDocumentPositionParams:m,asCompletionParams:A,asSignatureHelpParams:le,asWorkerPosition:he,asRange:Ee,asRanges:Xe,asPosition:ne,asPositions:qe,asPositionsSync:me,asLocation:vt,asDiagnosticSeverity:bt,asDiagnosticTag:Wt,asDiagnostic:V,asDiagnostics:j,asDiagnosticsSync:ye,asCompletionItem:et,asTextEdit:qn,asSymbolKind:Et,asSymbolTag:xt,asSymbolTags:wn,asReferenceParams:sn,asCodeAction:Yn,asCodeActionSync:dr,asCodeActionContext:Hn,asCodeActionContextSync:fr,asInlineValueContext:K,asCommand:ie,asCodeLens:Me,asFormattingOptions:Ae,asDocumentSymbolParams:ze,asCodeLensParams:Ye,asDocumentLink:_e,asDocumentLinkParams:$e,asCallHierarchyItem:xe,asTypeHierarchyItem:Je,asInlayHint:Nt,asWorkspaceSymbol:Dt,asInlineCompletionParams:te}}Xa.createConverter=fR});var Lw=$(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.createConverter=void 0;var re=require("vscode"),ge=we(),Fn=Nn(),je=za(),hR=Dd(),pR=_d(),gR=Ed(),mR=kd(),qw=Nd(),yR=Fd(),vR=$d(),bR=Bd(),wR=zd(),Nw=we(),Ga;(function(n){function e(t){let r=t;return r&&Fn.string(r.language)&&Fn.string(r.value)}n.is=e})(Ga||(Ga={}));function CR(n,e,t){let i=n||(f=>re.Uri.parse(f));function o(f){return i(f)}function s(f){let F=[];for(let Q of f)if(typeof Q=="string")F.push(Q);else if(Nw.NotebookCellTextDocumentFilter.is(Q))if(typeof Q.notebook=="string")F.push({notebookType:Q.notebook,language:Q.language});else{let ue=Q.notebook.notebookType??"*";F.push({notebookType:ue,scheme:Q.notebook.scheme,pattern:Q.notebook.pattern,language:Q.language})}else Nw.TextDocumentFilter.is(Q)&&F.push({language:Q.language,scheme:Q.scheme,pattern:Q.pattern});return F}async function a(f,F){return je.map(f,u,F)}function c(f){let F=new Array(f.length);for(let Q=0;Q<f.length;Q++)F[Q]=u(f[Q]);return F}function u(f){let F=new qw.ProtocolDiagnostic(h(f.range),f.message,I(f.severity),f.data);if(f.code!==void 0){if(typeof f.code=="string"||typeof f.code=="number")ge.CodeDescription.is(f.codeDescription)?F.code={value:f.code,target:o(f.codeDescription.href)}:F.code=f.code;else if(qw.DiagnosticCode.is(f.code)){F.hasDiagnosticCode=!0;let Q=f.code;F.code={value:Q.value,target:o(Q.target)}}}return f.source&&(F.source=f.source),f.relatedInformation&&(F.relatedInformation=l(f.relatedInformation)),Array.isArray(f.tags)&&(F.tags=g(f.tags)),F}function l(f){let F=new Array(f.length);for(let Q=0;Q<f.length;Q++){let ue=f[Q];F[Q]=new re.DiagnosticRelatedInformation(bt(ue.location),ue.message)}return F}function g(f){if(!f)return;let F=[];for(let Q of f){let ue=d(Q);ue!==void 0&&F.push(ue)}return F.length>0?F:void 0}function d(f){switch(f){case ge.DiagnosticTag.Unnecessary:return re.DiagnosticTag.Unnecessary;case ge.DiagnosticTag.Deprecated:return re.DiagnosticTag.Deprecated;default:return}}function p(f){return f?new re.Position(f.line,f.character):void 0}function h(f){return f?new re.Range(f.start.line,f.start.character,f.end.line,f.end.character):void 0}async function T(f,F){return je.map(f,Q=>new re.Range(Q.start.line,Q.start.character,Q.end.line,Q.end.character),F)}function I(f){if(f==null)return re.DiagnosticSeverity.Error;switch(f){case ge.DiagnosticSeverity.Error:return re.DiagnosticSeverity.Error;case ge.DiagnosticSeverity.Warning:return re.DiagnosticSeverity.Warning;case ge.DiagnosticSeverity.Information:return re.DiagnosticSeverity.Information;case ge.DiagnosticSeverity.Hint:return re.DiagnosticSeverity.Hint}return re.DiagnosticSeverity.Error}function O(f){if(Fn.string(f))return C(f);if(Ga.is(f))return C().appendCodeblock(f.value,f.language);if(Array.isArray(f)){let F=[];for(let Q of f){let ue=C();Ga.is(Q)?ue.appendCodeblock(Q.value,Q.language):ue.appendMarkdown(Q),F.push(ue)}return F}else return C(f)}function E(f){if(Fn.string(f))return f;switch(f.kind){case ge.MarkupKind.Markdown:return C(f.value);case ge.MarkupKind.PlainText:return f.value;default:return`Unsupported Markup content received. Kind is: ${f.kind}`}}function C(f){let F;if(f===void 0||typeof f=="string")F=new re.MarkdownString(f);else switch(f.kind){case ge.MarkupKind.Markdown:F=new re.MarkdownString(f.value);break;case ge.MarkupKind.PlainText:F=new re.MarkdownString,F.appendText(f.value);break;default:F=new re.MarkdownString,F.appendText(`Unsupported Markup content received. Kind is: ${f.kind}`);break}return F.isTrusted=e,F.supportHtml=t,F}function y(f){if(f)return new re.Hover(O(f.contents),h(f.range))}async function m(f,F,Q){if(!f)return;if(Array.isArray(f))return je.map(f,Zn=>k(Zn,F),Q);let ue=f,{defaultRange:Lt,commitCharacters:Ht}=P(ue,F),Ge=await je.map(ue.items,Zn=>k(Zn,Ht,Lt,ue.itemDefaults?.insertTextMode,ue.itemDefaults?.insertTextFormat,ue.itemDefaults?.data),Q);return new re.CompletionList(Ge,ue.isIncomplete)}function P(f,F){let Q=f.itemDefaults?.editRange,ue=f.itemDefaults?.commitCharacters??F;return ge.Range.is(Q)?{defaultRange:h(Q),commitCharacters:ue}:Q!==void 0?{defaultRange:{inserting:h(Q.insert),replacing:h(Q.replace)},commitCharacters:ue}:{defaultRange:void 0,commitCharacters:ue}}function A(f){return ge.CompletionItemKind.Text<=f&&f<=ge.CompletionItemKind.TypeParameter?[f-1,void 0]:[re.CompletionItemKind.Text,f]}function S(f){switch(f){case ge.CompletionItemTag.Deprecated:return re.CompletionItemTag.Deprecated}}function U(f){if(f==null)return[];let F=[];for(let Q of f){let ue=S(Q);ue!==void 0&&F.push(ue)}return F}function k(f,F,Q,ue,Lt,Ht){let Ge=U(f.tags),Zn=H(f),tt=new hR.default(Zn);f.detail&&(tt.detail=f.detail),f.documentation&&(tt.documentation=E(f.documentation),tt.documentationFormat=Fn.string(f.documentation)?"$string":f.documentation.kind),f.filterText&&(tt.filterText=f.filterText);let ts=X(f,Q,Lt);if(ts&&(tt.insertText=ts.text,tt.range=ts.range,tt.fromEdit=ts.fromEdit),Fn.number(f.kind)){let[US,xp]=A(f.kind);tt.kind=US,xp&&(tt.originalItemKind=xp)}f.sortText&&(tt.sortText=f.sortText),f.additionalTextEdits&&(tt.additionalTextEdits=ne(f.additionalTextEdits));let Pp=f.commitCharacters!==void 0?Fn.stringArray(f.commitCharacters)?f.commitCharacters:void 0:F;Pp&&(tt.commitCharacters=Pp.slice()),f.command&&(tt.command=ut(f.command)),(f.deprecated===!0||f.deprecated===!1)&&(tt.deprecated=f.deprecated,f.deprecated===!0&&Ge.push(re.CompletionItemTag.Deprecated)),(f.preselect===!0||f.preselect===!1)&&(tt.preselect=f.preselect);let Ep=f.data??Ht;Ep!==void 0&&(tt.data=Ep),Ge.length>0&&(tt.tags=Ge);let Xc=f.insertTextMode??ue;return Xc!==void 0&&(tt.insertTextMode=Xc,Xc===ge.InsertTextMode.asIs&&(tt.keepWhitespace=!0)),tt}function H(f){return ge.CompletionItemLabelDetails.is(f.labelDetails)?{label:f.label,detail:f.labelDetails.detail,description:f.labelDetails.description}:f.label}function X(f,F,Q){let ue=f.insertTextFormat??Q;if(f.textEdit!==void 0||F!==void 0){let[Lt,Ht]=f.textEdit!==void 0?Z(f.textEdit):[F,f.textEditText??f.label];return ue===ge.InsertTextFormat.Snippet?{text:new re.SnippetString(Ht),range:Lt,fromEdit:!0}:{text:Ht,range:Lt,fromEdit:!0}}else return f.insertText?ue===ge.InsertTextFormat.Snippet?{text:new re.SnippetString(f.insertText),fromEdit:!1}:{text:f.insertText,fromEdit:!1}:void 0}function Z(f){return ge.InsertReplaceEdit.is(f)?[{inserting:h(f.insert),replacing:h(f.replace)},f.newText]:[h(f.range),f.newText]}function le(f){if(f)return new re.TextEdit(h(f.range),f.newText)}async function he(f,F){if(f)return je.map(f,le,F)}function ne(f){if(!f)return;let F=new Array(f.length);for(let Q=0;Q<f.length;Q++)F[Q]=le(f[Q]);return F}async function qe(f,F){if(!f)return;let Q=new re.SignatureHelp;return Fn.number(f.activeSignature)?Q.activeSignature=f.activeSignature:Q.activeSignature=0,Fn.number(f.activeParameter)?Q.activeParameter=f.activeParameter:Q.activeParameter=0,f.signatures&&(Q.signatures=await me(f.signatures,F)),Q}async function me(f,F){return je.mapAsync(f,Ee,F)}async function Ee(f,F){let Q=new re.SignatureInformation(f.label);return f.documentation!==void 0&&(Q.documentation=E(f.documentation)),f.parameters!==void 0&&(Q.parameters=await Xe(f.parameters,F)),f.activeParameter!==void 0&&(Q.activeParameter=f.activeParameter),Q}function Xe(f,F){return je.map(f,vt,F)}function vt(f){let F=new re.ParameterInformation(f.label);return f.documentation&&(F.documentation=E(f.documentation)),F}function bt(f){return f?new re.Location(i(f.uri),h(f.range)):void 0}async function on(f,F){if(f)return _(f,F)}async function Wt(f,F){if(f)return _(f,F)}function wt(f){if(!f)return;let F={targetUri:i(f.targetUri),targetRange:h(f.targetRange),originSelectionRange:h(f.originSelectionRange),targetSelectionRange:h(f.targetSelectionRange)};if(!F.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return F}async function _(f,F){if(f)if(Fn.array(f)){if(f.length===0)return[];if(ge.LocationLink.is(f[0])){let Q=f;return je.map(Q,wt,F)}else{let Q=f;return je.map(Q,bt,F)}}else return ge.LocationLink.is(f)?[wt(f)]:bt(f)}async function D(f,F){if(f)return je.map(f,bt,F)}async function V(f,F){if(f)return je.map(f,j,F)}function j(f){let F=new re.DocumentHighlight(h(f.range));return Fn.number(f.kind)&&(F.kind=ye(f.kind)),F}function ye(f){switch(f){case ge.DocumentHighlightKind.Text:return re.DocumentHighlightKind.Text;case ge.DocumentHighlightKind.Read:return re.DocumentHighlightKind.Read;case ge.DocumentHighlightKind.Write:return re.DocumentHighlightKind.Write}return re.DocumentHighlightKind.Text}async function Ne(f,F){if(f)return je.map(f,et,F)}function ve(f){return f<=ge.SymbolKind.TypeParameter?f-1:re.SymbolKind.Property}function Ue(f){switch(f){case ge.SymbolTag.Deprecated:return re.SymbolTag.Deprecated;default:return}}function Le(f){if(f==null)return;let F=[];for(let Q of f){let ue=Ue(Q);ue!==void 0&&F.push(ue)}return F.length===0?void 0:F}function et(f){let F=f.data,Q=f.location,ue=Q.range===void 0||F!==void 0?new bR.default(f.name,ve(f.kind),f.containerName??"",Q.range===void 0?i(Q.uri):new re.Location(i(f.location.uri),h(Q.range)),F):new re.SymbolInformation(f.name,ve(f.kind),f.containerName??"",new re.Location(i(f.location.uri),h(Q.range)));return qn(ue,f),ue}async function rt(f,F){if(f!=null)return je.map(f,Ct,F)}function Ct(f){let F=new re.DocumentSymbol(f.name,f.detail||"",ve(f.kind),h(f.range),h(f.selectionRange));if(qn(F,f),f.children!==void 0&&f.children.length>0){let Q=[];for(let ue of f.children)Q.push(Ct(ue));F.children=Q}return F}function qn(f,F){f.tags=Le(F.tags),F.deprecated&&(f.tags?f.tags.includes(re.SymbolTag.Deprecated)||(f.tags=f.tags.concat(re.SymbolTag.Deprecated)):f.tags=[re.SymbolTag.Deprecated])}function ut(f){let F={title:f.title,command:f.command};return f.arguments&&(F.arguments=f.arguments),F}async function Et(f,F){if(f)return je.map(f,ut,F)}let xt=new Map;xt.set(ge.CodeActionKind.Empty,re.CodeActionKind.Empty),xt.set(ge.CodeActionKind.QuickFix,re.CodeActionKind.QuickFix),xt.set(ge.CodeActionKind.Refactor,re.CodeActionKind.Refactor),xt.set(ge.CodeActionKind.RefactorExtract,re.CodeActionKind.RefactorExtract),xt.set(ge.CodeActionKind.RefactorInline,re.CodeActionKind.RefactorInline),xt.set(ge.CodeActionKind.RefactorRewrite,re.CodeActionKind.RefactorRewrite),xt.set(ge.CodeActionKind.Source,re.CodeActionKind.Source),xt.set(ge.CodeActionKind.SourceOrganizeImports,re.CodeActionKind.SourceOrganizeImports);function wn(f){if(f==null)return;let F=xt.get(f);if(F)return F;let Q=f.split(".");F=re.CodeActionKind.Empty;for(let ue of Q)F=F.append(ue);return F}function sn(f){if(f!=null)return f.map(F=>wn(F))}async function Yn(f,F){if(f==null)return;let Q=new mR.default(f.title,f.data);return f.kind!==void 0&&(Q.kind=wn(f.kind)),f.diagnostics!==void 0&&(Q.diagnostics=c(f.diagnostics)),f.edit!==void 0&&(Q.edit=await Zt(f.edit,F)),f.command!==void 0&&(Q.command=ut(f.command)),f.isPreferred!==void 0&&(Q.isPreferred=f.isPreferred),f.disabled!==void 0&&(Q.disabled={reason:f.disabled.reason}),Q}function dr(f,F){return je.mapAsync(f,async Q=>ge.Command.is(Q)?ut(Q):Yn(Q,F),F)}function Hn(f){if(!f)return;let F=new pR.default(h(f.range));return f.command&&(F.command=ut(f.command)),f.data!==void 0&&f.data!==null&&(F.data=f.data),F}async function fr(f,F){if(f)return je.map(f,Hn,F)}async function Zt(f,F){if(!f)return;let Q=new Map;if(f.changeAnnotations!==void 0){let Ht=f.changeAnnotations;await je.forEach(Object.keys(Ht),Ge=>{let Zn=q(Ht[Ge]);Q.set(Ge,Zn)},F)}let ue=Ht=>{if(Ht!==void 0)return Q.get(Ht)},Lt=new re.WorkspaceEdit;if(f.documentChanges){let Ht=f.documentChanges;await je.forEach(Ht,Ge=>{if(ge.CreateFile.is(Ge))Lt.createFile(i(Ge.uri),Ge.options,ue(Ge.annotationId));else if(ge.RenameFile.is(Ge))Lt.renameFile(i(Ge.oldUri),i(Ge.newUri),Ge.options,ue(Ge.annotationId));else if(ge.DeleteFile.is(Ge))Lt.deleteFile(i(Ge.uri),Ge.options,ue(Ge.annotationId));else if(ge.TextDocumentEdit.is(Ge)){let Zn=i(Ge.textDocument.uri);for(let tt of Ge.edits)ge.AnnotatedTextEdit.is(tt)?Lt.replace(Zn,h(tt.range),tt.newText,ue(tt.annotationId)):Lt.replace(Zn,h(tt.range),tt.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Ge,void 0,4)}`)},F)}else if(f.changes){let Ht=f.changes;await je.forEach(Object.keys(Ht),Ge=>{Lt.set(i(Ge),ne(Ht[Ge]))},F)}return Lt}function q(f){if(f!==void 0)return{label:f.label,needsConfirmation:!!f.needsConfirmation,description:f.description}}function K(f){let F=h(f.range),Q=f.target?o(f.target):void 0,ue=new gR.default(F,Q);return f.tooltip!==void 0&&(ue.tooltip=f.tooltip),f.data!==void 0&&f.data!==null&&(ue.data=f.data),ue}async function te(f,F){if(f)return je.map(f,K,F)}function ie(f){return new re.Color(f.red,f.green,f.blue,f.alpha)}function Me(f){return new re.ColorInformation(h(f.range),ie(f.color))}async function Ae(f,F){if(f)return je.map(f,Me,F)}function ze(f){let F=new re.ColorPresentation(f.label);return F.additionalTextEdits=ne(f.additionalTextEdits),f.textEdit&&(F.textEdit=le(f.textEdit)),F}async function Ye(f,F){if(f)return je.map(f,ze,F)}function _e(f){if(f)switch(f){case ge.FoldingRangeKind.Comment:return re.FoldingRangeKind.Comment;case ge.FoldingRangeKind.Imports:return re.FoldingRangeKind.Imports;case ge.FoldingRangeKind.Region:return re.FoldingRangeKind.Region}}function $e(f){return new re.FoldingRange(f.startLine,f.endLine,_e(f.kind))}async function xe(f,F){if(f)return je.map(f,$e,F)}function Je(f){return new re.SelectionRange(h(f.range),f.parent?Je(f.parent):void 0)}async function Dt(f,F){return Array.isArray(f)?je.map(f,Je,F):[]}function Nt(f){return ge.InlineValueText.is(f)?new re.InlineValueText(h(f.range),f.text):ge.InlineValueVariableLookup.is(f)?new re.InlineValueVariableLookup(h(f.range),f.variableName,f.caseSensitiveLookup):new re.InlineValueEvaluatableExpression(h(f.range),f.expression)}async function Pr(f,F){return Array.isArray(f)?je.map(f,Nt,F):[]}async function Er(f,F){let Q=typeof f.label=="string"?f.label:await je.map(f.label,b,F),ue=new wR.default(p(f.position),Q);return f.kind!==void 0&&(ue.kind=f.kind),f.textEdits!==void 0&&(ue.textEdits=await he(f.textEdits,F)),f.tooltip!==void 0&&(ue.tooltip=W(f.tooltip)),f.paddingLeft!==void 0&&(ue.paddingLeft=f.paddingLeft),f.paddingRight!==void 0&&(ue.paddingRight=f.paddingRight),f.data!==void 0&&(ue.data=f.data),ue}function b(f){let F=new re.InlayHintLabelPart(f.value);return f.location!==void 0&&(F.location=bt(f.location)),f.tooltip!==void 0&&(F.tooltip=W(f.tooltip)),f.command!==void 0&&(F.command=ut(f.command)),F}function W(f){return typeof f=="string"?f:C(f)}async function ae(f,F){if(Array.isArray(f))return je.mapAsync(f,Er,F)}function He(f){if(f===null)return;let F=new yR.default(ve(f.kind),f.name,f.detail||"",o(f.uri),h(f.range),h(f.selectionRange),f.data);return f.tags!==void 0&&(F.tags=Le(f.tags)),F}async function M(f,F){if(f!==null)return je.map(f,He,F)}async function w(f,F){return new re.CallHierarchyIncomingCall(He(f.from),await T(f.fromRanges,F))}async function N(f,F){if(f!==null)return je.mapAsync(f,w,F)}async function L(f,F){return new re.CallHierarchyOutgoingCall(He(f.to),await T(f.fromRanges,F))}async function R(f,F){if(f!==null)return je.mapAsync(f,L,F)}async function v(f,F){if(f!=null)return new re.SemanticTokens(new Uint32Array(f.data),f.resultId)}function B(f){return new re.SemanticTokensEdit(f.start,f.deleteCount,f.data!==void 0?new Uint32Array(f.data):void 0)}async function G(f,F){if(f!=null)return new re.SemanticTokensEdits(f.edits.map(B),f.resultId)}function be(f){return f}async function lt(f,F){if(f!=null)return new re.LinkedEditingRanges(await T(f.ranges,F),Ze(f.wordPattern))}function Ze(f){if(f!=null)return new RegExp(f)}function an(f){if(f===null)return;let F=new vR.default(ve(f.kind),f.name,f.detail||"",o(f.uri),h(f.range),h(f.selectionRange),f.data);return f.tags!==void 0&&(F.tags=Le(f.tags)),F}async function Cn(f,F){if(f!==null)return je.map(f,an,F)}function Un(f){if(Fn.string(f))return f;if(ge.RelativePattern.is(f)){if(ge.URI.is(f.baseUri))return new re.RelativePattern(o(f.baseUri),f.pattern);if(ge.WorkspaceFolder.is(f.baseUri)){let F=re.workspace.getWorkspaceFolder(o(f.baseUri.uri));return F!==void 0?new re.RelativePattern(F,f.pattern):void 0}}}async function Pe(f,F){if(!f)return;if(Array.isArray(f))return je.map(f,Lt=>Jn(Lt),F);let Q=f,ue=await je.map(Q.items,Lt=>Jn(Lt),F);return new re.InlineCompletionList(ue)}function Jn(f){let F;typeof f.insertText=="string"?F=f.insertText:F=new re.SnippetString(f.insertText.value);let Q;f.command&&(Q=ut(f.command));let ue=new re.InlineCompletionItem(F,h(f.range),Q);return f.filterText&&(ue.filterText=f.filterText),ue}return{asUri:o,asDocumentSelector:s,asDiagnostics:a,asDiagnostic:u,asRange:h,asRanges:T,asPosition:p,asDiagnosticSeverity:I,asDiagnosticTag:d,asHover:y,asCompletionResult:m,asCompletionItem:k,asTextEdit:le,asTextEdits:he,asSignatureHelp:qe,asSignatureInformations:me,asSignatureInformation:Ee,asParameterInformations:Xe,asParameterInformation:vt,asDeclarationResult:on,asDefinitionResult:Wt,asLocation:bt,asReferences:D,asDocumentHighlights:V,asDocumentHighlight:j,asDocumentHighlightKind:ye,asSymbolKind:ve,asSymbolTag:Ue,asSymbolTags:Le,asSymbolInformations:Ne,asSymbolInformation:et,asDocumentSymbols:rt,asDocumentSymbol:Ct,asCommand:ut,asCommands:Et,asCodeAction:Yn,asCodeActionKind:wn,asCodeActionKinds:sn,asCodeActionResult:dr,asCodeLens:Hn,asCodeLenses:fr,asWorkspaceEdit:Zt,asDocumentLink:K,asDocumentLinks:te,asFoldingRangeKind:_e,asFoldingRange:$e,asFoldingRanges:xe,asColor:ie,asColorInformation:Me,asColorInformations:Ae,asColorPresentation:ze,asColorPresentations:Ye,asSelectionRange:Je,asSelectionRanges:Dt,asInlineValue:Nt,asInlineValues:Pr,asInlayHint:Er,asInlayHints:ae,asSemanticTokensLegend:be,asSemanticTokens:v,asSemanticTokensEdit:B,asSemanticTokensEdits:G,asCallHierarchyItem:He,asCallHierarchyItems:M,asCallHierarchyIncomingCall:w,asCallHierarchyIncomingCalls:N,asCallHierarchyOutgoingCall:L,asCallHierarchyOutgoingCalls:R,asLinkedEditingRanges:lt,asTypeHierarchyItem:an,asTypeHierarchyItems:Cn,asGlobPattern:Un,asInlineCompletionResult:Pe,asInlineCompletionItem:Jn}}Qa.createConverter=CR});var ft=$(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.generateUuid=Mn.parse=Mn.isUUID=Mn.v4=Mn.empty=void 0;var Ro=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Po=class n extends Ro{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}};Po._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Po._timeHighBits=["8","9","a","b"];Mn.empty=new Ro("00000000-0000-0000-0000-000000000000");function Aw(){return new Po}Mn.v4=Aw;var DR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Fw(n){return DR.test(n)}Mn.isUUID=Fw;function SR(n){if(!Fw(n))throw new Error("invalid uuid");return new Ro(n)}Mn.parse=SR;function TR(){return Aw().asHex()}Mn.generateUuid=TR});var Gd=$(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.ProgressPart=void 0;var Mw=require("vscode"),jw=we(),$w=Nn(),Xd=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(jw.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Mw.window.withProgress({location:Mw.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(jw.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,o)=>{this._resolve=i,this._reject=o})})}report(e){if(this._infinite&&$w.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if($w.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Ya.ProgressPart=Xd});var Fe=$(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.WorkspaceFeature=jt.TextDocumentLanguageFeature=jt.TextDocumentEventFeature=jt.DynamicDocumentFeature=jt.DynamicFeature=jt.StaticFeature=jt.ensure=jt.LSPCancellationError=void 0;var ci=require("vscode"),Qd=we(),en=Nn(),Hw=ft(),Yd=class extends ci.CancellationError{constructor(e){super(),this.data=e}};jt.LSPCancellationError=Yd;function _R(n,e){return n[e]===void 0&&(n[e]={}),n[e]}jt.ensure=_R;var Uw;(function(n){function e(t){let r=t;return r!=null&&en.func(r.fillClientCapabilities)&&en.func(r.initialize)&&en.func(r.getState)&&en.func(r.clear)&&(r.fillInitializeParams===void 0||en.func(r.fillInitializeParams))}n.is=e})(Uw||(jt.StaticFeature=Uw={}));var Bw;(function(n){function e(t){let r=t;return r!=null&&en.func(r.fillClientCapabilities)&&en.func(r.initialize)&&en.func(r.getState)&&en.func(r.clear)&&(r.fillInitializeParams===void 0||en.func(r.fillInitializeParams))&&en.func(r.register)&&en.func(r.unregister)&&r.registrationType!==void 0}n.is=e})(Bw||(jt.DynamicFeature=Bw={}));var Eo=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let i of e){t++;for(let o of ci.workspace.textDocuments)if(ci.languages.match(i,o)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=t>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};jt.DynamicDocumentFeature=Eo;var Jd=class extends Eo{static textDocumentFilter(e,t){for(let r of e)if(ci.languages.match(r,t)>0)return!0;return!1}constructor(e,t,r,i,o,s,a){super(e),this._event=t,this._type=r,this._middleware=i,this._createParams=o,this._textDocument=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new ci.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(r),this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>t(i)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(ci.languages.match(t,e)>0)return{send:r=>this.callback(r)}}};jt.TextDocumentEventFeature=Jd;var Zd=class extends Eo{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(Qd.TextDocumentRegistrationOptions.is(t)){let r=Qd.StaticRegistrationOptions.hasId(t)?t.id:Hw.generateUuid(),i=t.documentSelector??e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(en.boolean(t)&&t===!0||Qd.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=en.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[Hw.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return en.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&&ci.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};jt.TextDocumentLanguageFeature=Zd;var ef=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};jt.WorkspaceFeature=ef});var Ww=$((Q0,Vw)=>{var RR=typeof process=="object"&&process&&process.platform==="win32";Vw.exports=RR?{sep:"\\"}:{sep:"/"}});var Qw=$((Y0,Gw)=>{"use strict";Gw.exports=Kw;function Kw(n,e,t){n instanceof RegExp&&(n=zw(n,t)),e instanceof RegExp&&(e=zw(e,t));var r=Xw(n,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function zw(n,e){var t=e.match(n);return t?t[0]:null}Kw.range=Xw;function Xw(n,e,t){var r,i,o,s,a,c=t.indexOf(n),u=t.indexOf(e,c+1),l=c;if(c>=0&&u>0){if(n===e)return[c,u];for(r=[],o=t.length;l>=0&&!a;)l==c?(r.push(l),c=t.indexOf(n,l+1)):r.length==1?a=[r.pop(),u]:(i=r.pop(),i<o&&(o=i,s=u),u=t.indexOf(e,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}});var iC=$((J0,rC)=>{var Yw=Qw();rC.exports=xR;var Jw="\0SLASH"+Math.random()+"\0",Zw="\0OPEN"+Math.random()+"\0",nf="\0CLOSE"+Math.random()+"\0",eC="\0COMMA"+Math.random()+"\0",tC="\0PERIOD"+Math.random()+"\0";function tf(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function PR(n){return n.split("\\\\").join(Jw).split("\\{").join(Zw).split("\\}").join(nf).split("\\,").join(eC).split("\\.").join(tC)}function ER(n){return n.split(Jw).join("\\").split(Zw).join("{").split(nf).join("}").split(eC).join(",").split(tC).join(".")}function nC(n){if(!n)return[""];var e=[],t=Yw("{","}",n);if(!t)return n.split(",");var r=t.pre,i=t.body,o=t.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=nC(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function xR(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),xo(PR(n),!0).map(ER)):[]}function IR(n){return"{"+n+"}"}function kR(n){return/^-?0\d/.test(n)}function OR(n,e){return n<=e}function qR(n,e){return n>=e}function xo(n,e){var t=[],r=Yw("{","}",n);if(!r)return[n];var i=r.pre,o=r.post.length?xo(r.post,!1):[""];if(/\$$/.test(r.pre))for(var s=0;s<o.length;s++){var a=i+"{"+r.body+"}"+o[s];t.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),l=c||u,g=r.body.indexOf(",")>=0;if(!l&&!g)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+nf+r.post,xo(n)):[n];var d;if(l)d=r.body.split(/\.\./);else if(d=nC(r.body),d.length===1&&(d=xo(d[0],!1).map(IR),d.length===1))return o.map(function(k){return r.pre+d[0]+k});var p;if(l){var h=tf(d[0]),T=tf(d[1]),I=Math.max(d[0].length,d[1].length),O=d.length==3?Math.abs(tf(d[2])):1,E=OR,C=T<h;C&&(O*=-1,E=qR);var y=d.some(kR);p=[];for(var m=h;E(m,T);m+=O){var P;if(u)P=String.fromCharCode(m),P==="\\"&&(P="");else if(P=String(m),y){var A=I-P.length;if(A>0){var S=new Array(A+1).join("0");m<0?P="-"+S+P.slice(1):P=S+P}}p.push(P)}}else{p=[];for(var U=0;U<d.length;U++)p.push.apply(p,xo(d[U],!1))}for(var U=0;U<p.length;U++)for(var s=0;s<o.length;s++){var a=i+p[U]+o[s];(!e||l||a)&&t.push(a)}}return t}});var Za=$((eO,cf)=>{var xn=cf.exports=(n,e,t={})=>(Ja(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Xi(e,t).match(n));cf.exports=xn;var sf=Ww();xn.sep=sf.sep;var zn=Symbol("globstar **");xn.GLOBSTAR=zn;var NR=iC(),oC={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},af="[^/]",rf=af+"*?",LR="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",AR="(?:(?!(?:\\/|^)\\.).)*?",cC=n=>n.split("").reduce((e,t)=>(e[t]=!0,e),{}),sC=cC("().*{}+?[]^$\\!"),FR=cC("[.("),aC=/\/+/;xn.filter=(n,e={})=>(t,r,i)=>xn(t,n,e);var Vr=(n,e={})=>{let t={};return Object.keys(n).forEach(r=>t[r]=n[r]),Object.keys(e).forEach(r=>t[r]=e[r]),t};xn.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return xn;let e=xn,t=(r,i,o)=>e(r,i,Vr(n,o));return t.Minimatch=class extends e.Minimatch{constructor(i,o){super(i,Vr(n,o))}},t.Minimatch.defaults=r=>e.defaults(Vr(n,r)).Minimatch,t.filter=(r,i)=>e.filter(r,Vr(n,i)),t.defaults=r=>e.defaults(Vr(n,r)),t.makeRe=(r,i)=>e.makeRe(r,Vr(n,i)),t.braceExpand=(r,i)=>e.braceExpand(r,Vr(n,i)),t.match=(r,i,o)=>e.match(r,i,Vr(n,o)),t};xn.braceExpand=(n,e)=>uC(n,e);var uC=(n,e={})=>(Ja(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:NR(n)),MR=1024*64,Ja=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>MR)throw new TypeError("pattern is too long")},of=Symbol("subparse");xn.makeRe=(n,e)=>new Xi(n,e||{}).makeRe();xn.match=(n,e,t={})=>{let r=new Xi(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};var jR=n=>n.replace(/\\(.)/g,"$1"),$R=n=>n.replace(/\\([^-\]])/g,"$1"),HR=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),UR=n=>n.replace(/[[\]\\]/g,"\\$&"),Xi=class{constructor(e,t){Ja(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(aC)),this.debug(this.pattern,r),r=r.map((i,o,s)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u=t[s],l=e[o];if(this.debug(t,u,l),u===!1)return!1;if(u===zn){this.debug("GLOBSTAR",[t,u,l]);var g=o,d=s+1;if(d===c){for(this.debug("** at the end");o<a;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;g<a;){var p=e[g];if(this.debug(`
globstar while`,e,g,t,d,p),this.matchOne(e.slice(g),t.slice(d),r))return this.debug("globstar found match!",g,a,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,g,t,d);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,g,t,d),g===a))}var h;if(typeof u=="string"?(h=l===u,this.debug("string match",u,l,h)):(h=l.match(u),this.debug("pattern match",u,l,h)),!h)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return uC(this.pattern,this.options)}parse(e,t){Ja(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return zn;if(e==="")return"";let i="",o=!1,s=!1,a=[],c=[],u,l=!1,g=-1,d=-1,p,h,T,I=e.charAt(0)===".",O=r.dot||I,E=()=>I?"":O?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",C=A=>A.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=()=>{if(u){switch(u){case"*":i+=rf,o=!0;break;case"?":i+=af,o=!0;break;default:i+="\\"+u;break}this.debug("clearStateChar %j %j",u,i),u=!1}};for(let A=0,S;A<e.length&&(S=e.charAt(A));A++){if(this.debug("%s	%s %s %j",e,A,i,S),s){if(S==="/")return!1;sC[S]&&(i+="\\"),i+=S,s=!1;continue}switch(S){case"/":return!1;case"\\":if(l&&e.charAt(A+1)==="-"){i+=S;continue}y(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,A,i,S),l){this.debug("  in class"),S==="!"&&A===d+1&&(S="^"),i+=S;continue}this.debug("call clearStateChar %j",u),y(),u=S,r.noext&&y();continue;case"(":{if(l){i+="(";continue}if(!u){i+="\\(";continue}let U={type:u,start:A-1,reStart:i.length,open:oC[u].open,close:oC[u].close};this.debug(this.pattern,"	",U),a.push(U),i+=U.open,U.start===0&&U.type!=="!"&&(I=!0,i+=C(e.slice(A+1))),this.debug("plType %j %j",u,i),u=!1;continue}case")":{let U=a[a.length-1];if(l||!U){i+="\\)";continue}a.pop(),y(),o=!0,h=U,i+=h.close,h.type==="!"&&c.push(Object.assign(h,{reEnd:i.length}));continue}case"|":{let U=a[a.length-1];if(l||!U){i+="\\|";continue}y(),i+="|",U.start===0&&U.type!=="!"&&(I=!0,i+=C(e.slice(A+1)));continue}case"[":if(y(),l){i+="\\"+S;continue}l=!0,d=A,g=i.length,i+=S;continue;case"]":if(A===d+1||!l){i+="\\"+S;continue}p=e.substring(d+1,A);try{RegExp("["+UR($R(p))+"]"),i+=S}catch{i=i.substring(0,g)+"(?:$.)"}o=!0,l=!1;continue;default:y(),sC[S]&&!(S==="^"&&l)&&(i+="\\"),i+=S;break}}for(l&&(p=e.slice(d+1),T=this.parse(p,of),i=i.substring(0,g)+"\\["+T[0],o=o||T[1]),h=a.pop();h;h=a.pop()){let A;A=i.slice(h.reStart+h.open.length),this.debug("setting tail",i,h),A=A.replace(/((?:\\{2}){0,64})(\\?)\|/g,(U,k,H)=>(H||(H="\\"),k+k+H+"|")),this.debug(`tail=%j
   %s`,A,A,h,i);let S=h.type==="*"?rf:h.type==="?"?af:"\\"+h.type;o=!0,i=i.slice(0,h.reStart)+S+"\\("+A}y(),s&&(i+="\\\\");let m=FR[i.charAt(0)];for(let A=c.length-1;A>-1;A--){let S=c[A],U=i.slice(0,S.reStart),k=i.slice(S.reStart,S.reEnd-8),H=i.slice(S.reEnd),X=i.slice(S.reEnd-8,S.reEnd)+H,Z=U.split(")").length,le=U.split("(").length-Z,he=H;for(let qe=0;qe<le;qe++)he=he.replace(/\)[+*?]?/,"");H=he;let ne=H===""&&t!==of?"(?:$|\\/)":"";i=U+k+H+ne+X}if(i!==""&&o&&(i="(?=.)"+i),m&&(i=E()+i),t===of)return[i,o];if(r.nocase&&!o&&(o=e.toUpperCase()!==e.toLowerCase()),!o)return jR(e);let P=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",P),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?rf:t.dot?LR:AR,i=t.nocase?"i":"",o=e.map(s=>(s=s.map(a=>typeof a=="string"?HR(a):a===zn?zn:a._src).reduce((a,c)=>(a[a.length-1]===zn&&c===zn||a.push(c),a),[]),s.forEach((a,c)=>{a!==zn||s[c-1]===zn||(c===0?s.length>1?s[c+1]="(?:\\/|"+r+"\\/)?"+s[c+1]:s[c]=r:c===s.length-1?s[c-1]+="(?:\\/|"+r+")?":(s[c-1]+="(?:\\/|\\/"+r+"\\/)"+s[c+1],s[c+1]=zn))}),s.filter(a=>a!==zn).join("/"))).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;sf.sep!=="/"&&(e=e.split(sf.sep).join("/")),e=e.split(aC),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let o;for(let s=e.length-1;s>=0&&(o=e[s],!o);s--);for(let s=0;s<i.length;s++){let a=i[s],c=e;if(r.matchBase&&a.length===1&&(c=[o]),this.matchOne(c,a,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return xn.defaults(e).Minimatch}};xn.Minimatch=Xi});var mf=$(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.DiagnosticFeature=Wr.DiagnosticPullMode=Wr.vsdiag=void 0;var BR=Za(),Ie=require("vscode"),_t=we(),VR=ft(),uf=Fe();function ec(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var jn;(function(n){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(jn||(Wr.vsdiag=jn={}));var tc;(function(n){n.onType="onType",n.onSave="onSave"})(tc||(Wr.DiagnosticPullMode=tc={}));var Qt;(function(n){n.active="open",n.reschedule="reschedule",n.outDated="drop"})(Qt||(Qt={}));var lf=class n{constructor(){this.open=new Set,this._onOpen=new Ie.EventEmitter,this._onClose=new Ie.EventEmitter,n.fillTabResources(this.open);let e=t=>{if(t.closed.length===0&&t.opened.length===0)return;let r=this.open,i=new Set;n.fillTabResources(i);let o=new Set,s=new Set(i);for(let a of r.values())i.has(a)?s.delete(a):o.add(a);if(this.open=i,o.size>0){let a=new Set;for(let c of o)a.add(Ie.Uri.parse(c));this._onClose.fire(a)}if(s.size>0){let a=new Set;for(let c of s)a.add(Ie.Uri.parse(c));this._onOpen.fire(a)}};Ie.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Ie.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Ie.Uri?Ie.window.activeTextEditor?.document.uri===e:Ie.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof Ie.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=new Set;return n.fillTabResources(new Set,e),e}static fillTabResources(e,t){let r=e??new Set;for(let i of Ie.window.tabGroups.all)for(let o of i.tabs){let s=o.input,a;s instanceof Ie.TabInputText?a=s.uri:s instanceof Ie.TabInputTextDiff?a=s.modified:s instanceof Ie.TabInputCustom&&(a=s.uri),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),t!==void 0&&t.add(a))}}},qt;(function(n){n[n.document=1]="document",n[n.workspace=2]="workspace"})(qt||(qt={}));var wr;(function(n){function e(t){return t instanceof Ie.Uri?t.toString():t.uri.toString()}n.asKey=e})(wr||(wr={}));var df=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===qt.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=t instanceof Ie.Uri?[t.toString(),t,r]:[t.uri.toString(),t.uri,t.version],c=i.get(o);return c===void 0&&(c={document:s,pulledVersion:a,resultId:void 0},i.set(o,c)),c}update(e,t,r,i){let o=e===qt.document?this.documentPullStates:this.workspacePullStates,[s,a,c,u]=t instanceof Ie.Uri?[t.toString(),t,r,i]:[t.uri.toString(),t.uri,t.version,r],l=o.get(s);l===void 0?(l={document:a,pulledVersion:c,resultId:u},o.set(s,l)):(l.pulledVersion=c,l.resultId=u)}unTrack(e,t){let r=wr.asKey(t);(e===qt.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,t){let r=wr.asKey(t);return(e===qt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){let r=wr.asKey(t);return(e===qt.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&&(r=this.documentPullStates.get(t)),r.resultId!==void 0&&e.push({uri:t,value:r.resultId});return e}},ff=class{constructor(e,t,r){this.client=e,this.tabs=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Ie.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Ie.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new df,this.workspaceErrorCounter=0}knows(e,t){let r=t instanceof Ie.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(r.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;let r=e instanceof Ie.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let r=e instanceof Ie.Uri,i=r?e:e.uri,o=i.toString();t=r?t:e.version;let s=this.openRequests.get(o),a=r?this.documentStates.track(qt.document,e,t):this.documentStates.track(qt.document,e);if(s===void 0){let c=new Ie.CancellationTokenSource;this.openRequests.set(o,{state:Qt.active,document:e,version:t,tokenSource:c});let u,l;try{u=await this.provider.provideDiagnostics(e,a.resultId,c.token)??{kind:jn.DocumentDiagnosticReportKind.full,items:[]}}catch(g){if(g instanceof uf.LSPCancellationError&&_t.DiagnosticServerCancellationData.is(g.data)&&g.data.retriggerRequest===!1&&(l={state:Qt.outDated,document:e}),l===void 0&&g instanceof Ie.CancellationError)l={state:Qt.reschedule,document:e};else throw g}if(l=l??this.openRequests.get(o),l===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${o}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(o),!this.tabs.isVisible(e)){this.documentStates.unTrack(qt.document,e);return}if(l.state===Qt.outDated)return;u!==void 0&&(u.kind===jn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,u.items),a.pulledVersion=t,a.resultId=u.resultId),l.state===Qt.reschedule&&this.pull(e)}else s.state===Qt.active?(s.tokenSource.cancel(),this.openRequests.set(o,{state:Qt.reschedule,document:s.document})):s.state===Qt.outDated&&this.openRequests.set(o,{state:Qt.reschedule,document:s.document})}forgetDocument(e){let t=e instanceof Ie.Uri?e:e.uri,r=t.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:Qt.reschedule,document:e}):this.pull(e,()=>{this.forget(qt.document,e)}):(i!==void 0&&(i.state===Qt.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:Qt.outDated,document:e})),this.diagnostics.delete(t),this.forget(qt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,_t.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof uf.LSPCancellationError)&&!_t.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,_t.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Ie.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===jn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(qt.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(qt.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=>{let o=(a,c,u)=>{let l={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof Ie.Uri?a:a.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:jn.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(_t.DocumentDiagnosticRequest.type,l,u).then(async g=>g==null||this.isDisposed||u.isCancellationRequested?{kind:jn.DocumentDiagnosticReportKind.full,items:[]}:g.kind===_t.DocumentDiagnosticReportKind.Full?{kind:jn.DocumentDiagnosticReportKind.full,resultId:g.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(g.items,u)}:{kind:jn.DocumentDiagnosticReportKind.unChanged,resultId:g.resultId},g=>this.client.handleFailedRequest(_t.DocumentDiagnosticRequest.type,u,g,{kind:jn.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,r,i)=>{let o=async u=>u.kind===_t.DocumentDiagnosticReportKind.Full?{kind:jn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version,items:await this.client.protocol2CodeConverter.asDiagnostics(u.items,r)}:{kind:jn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version},s=u=>{let l=[];for(let g of u)l.push({uri:this.client.code2ProtocolConverter.asUri(g.uri),value:g.value});return l},a=(u,l)=>{let g=(0,VR.generateUuid)(),d=this.client.onProgress(_t.WorkspaceDiagnosticRequest.partialResult,g,async h=>{if(h==null){i(null);return}let T={items:[]};for(let I of h.items)try{T.items.push(await o(I))}catch(O){this.client.error("Converting workspace diagnostics failed.",O)}i(T)}),p={identifier:this.options.identifier,previousResultIds:s(u),partialResultToken:g};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(_t.WorkspaceDiagnosticRequest.type,p,l).then(async h=>{if(l.isCancellationRequested)return{items:[]};let T={items:[]};for(let I of h.items)T.items.push(await o(I));return d.dispose(),i(T),{items:[]}},h=>(d.dispose(),this.client.handleFailedRequest(_t.DocumentDiagnosticRequest.type,l,h,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===Qt.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:Qt.outDated,document:t.document});this.diagnostics.dispose()}},hf=class{constructor(e){this.diagnosticRequestor=e,this.documents=new _t.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=wr.asKey(e);this.documents.has(t)||(this.documents.set(t,e,_t.Touch.Last),this.trigger())}remove(e){let t=wr.asKey(e);this.documents.delete(t),this.documents.size===0?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,_t.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=wr.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,_t.Touch.Last),t===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?wr.asKey(this.endDocument):void 0}},pf=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),s=[],a=h=>{let T=r.documentSelector;if(i.match!==void 0)return i.match(T,h);for(let I of T)if(_t.TextDocumentFilter.is(I)){if(typeof I=="string"||I.language!==void 0&&I.language!=="*"||I.scheme!==void 0&&I.scheme!=="*"&&I.scheme!==h.scheme)return!1;if(I.pattern!==void 0){let O=new BR.Minimatch(I.pattern,{noext:!0});if(!O.makeRe()||!O.match(h.fsPath))return!1}}return!0},c=h=>h instanceof Ie.Uri?a(h):Ie.languages.match(o,h)>0&&t.isVisible(h),u=h=>h instanceof Ie.Uri?this.activeTextDocument?.uri.toString()===h.toString():this.activeTextDocument===h;this.diagnosticRequestor=new ff(e,t,r),this.backgroundScheduler=new hf(this.diagnosticRequestor);let l=h=>{!c(h)||!r.interFileDependencies||u(h)||this.backgroundScheduler.add(h)};this.activeTextDocument=Ie.window.activeTextEditor?.document,Ie.window.onDidChangeActiveTextEditor(h=>{let T=this.activeTextDocument;this.activeTextDocument=h?.document,T!==void 0&&l(T),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let g=e.getFeature(_t.DidOpenTextDocumentNotification.method);s.push(g.onNotificationSent(h=>{let T=h.textDocument;this.diagnosticRequestor.knows(qt.document,T)||c(T)&&this.diagnosticRequestor.pull(T,()=>{l(T)})})),s.push(t.onOpen(h=>{for(let T of h){if(this.diagnosticRequestor.knows(qt.document,T))continue;let I=T.toString(),O;for(let E of Ie.workspace.textDocuments)if(I===E.uri.toString()){O=E;break}O!==void 0&&c(O)&&this.diagnosticRequestor.pull(O,()=>{l(O)})}}));let d=new Set;for(let h of Ie.workspace.textDocuments)c(h)&&(this.diagnosticRequestor.pull(h,()=>{l(h)}),d.add(h.uri.toString()));if(i.onTabs===!0)for(let h of t.getTabResources())!d.has(h.toString())&&c(h)&&this.diagnosticRequestor.pull(h,()=>{l(h)});if(i.onChange===!0){let h=e.getFeature(_t.DidChangeTextDocumentNotification.method);s.push(h.onNotificationSent(async T=>{let I=T.textDocument;(i.filter===void 0||!i.filter(I,tc.onType))&&this.diagnosticRequestor.knows(qt.document,I)&&this.diagnosticRequestor.pull(I,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let h=e.getFeature(_t.DidSaveTextDocumentNotification.method);s.push(h.onNotificationSent(T=>{let I=T.textDocument;(i.filter===void 0||!i.filter(I,tc.onSave))&&this.diagnosticRequestor.knows(qt.document,I)&&this.diagnosticRequestor.pull(T.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let p=e.getFeature(_t.DidCloseTextDocumentNotification.method);s.push(p.onNotificationSent(h=>{this.cleanUpDocument(h.textDocument)})),t.onClose(h=>{for(let T of h)this.cleanUpDocument(T)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let h of Ie.workspace.textDocuments)c(h)&&this.diagnosticRequestor.pull(h)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Ie.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(qt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},gf=class extends uf.TextDocumentLanguageFeature{constructor(e){super(e,_t.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=ec(ec(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,ec(ec(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(_t.DiagnosticRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}clear(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.clear()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new lf);let t=new pf(this._client,this.tabs,e);return[t.disposable,t]}};Wr.DiagnosticFeature=gf});var fC=$(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.NotebookDocumentSyncFeature=void 0;var Yt=require("vscode"),WR=Za(),Cr=we(),zR=ft(),lC=Nn();function dC(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Gi;(function(n){let e;(function(t){function r(d,p){return{version:d.version,uri:p.asUri(d.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(d,p,h){let T=Cr.NotebookDocument.create(h.asUri(d.uri),d.notebookType,d.version,o(p,h));return Object.keys(d.metadata).length>0&&(T.metadata=s(d.metadata)),T}t.asNotebookDocument=i;function o(d,p){return d.map(h=>a(h,p))}t.asNotebookCells=o;function s(d){return u(new Set,d)}t.asMetadata=s;function a(d,p){let h=Cr.NotebookCell.create(c(d.kind),p.asUri(d.document.uri));return Object.keys(d.metadata).length>0&&(h.metadata=s(d.metadata)),d.executionSummary!==void 0&&lC.number(d.executionSummary.executionOrder)&&lC.boolean(d.executionSummary.success)&&(h.executionSummary={executionOrder:d.executionSummary.executionOrder,success:d.executionSummary.success}),h}t.asNotebookCell=a;function c(d){switch(d){case Yt.NotebookCellKind.Markup:return Cr.NotebookCellKind.Markup;case Yt.NotebookCellKind.Code:return Cr.NotebookCellKind.Code}}function u(d,p){if(d.has(p))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(p)){let h=[];for(let T of p)if(T!==null&&typeof T=="object"||Array.isArray(T))h.push(u(d,T));else{if(T instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");h.push(T)}return h}else{let h=Object.keys(p),T=Object.create(null);for(let I of h){let O=p[I];if(O!==null&&typeof O=="object"||Array.isArray(O))T[I]=u(d,O);else{if(O instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");T[I]=O}}return T}}function l(d,p){let h=p.asChangeTextDocumentParams(d,d.document.uri,d.document.version);return{document:h.textDocument,changes:h.contentChanges}}t.asTextContentChange=l;function g(d,p){let h=Object.create(null);if(d.metadata&&(h.metadata=n.c2p.asMetadata(d.metadata)),d.cells!==void 0){let T=Object.create(null),I=d.cells;I.structure&&(T.structure={array:{start:I.structure.array.start,deleteCount:I.structure.array.deleteCount,cells:I.structure.array.cells!==void 0?I.structure.array.cells.map(O=>n.c2p.asNotebookCell(O,p)):void 0},didOpen:I.structure.didOpen!==void 0?I.structure.didOpen.map(O=>p.asOpenTextDocumentParams(O.document).textDocument):void 0,didClose:I.structure.didClose!==void 0?I.structure.didClose.map(O=>p.asCloseTextDocumentParams(O.document).textDocument):void 0}),I.data!==void 0&&(T.data=I.data.map(O=>n.c2p.asNotebookCell(O,p))),I.textContent!==void 0&&(T.textContent=I.textContent.map(O=>n.c2p.asTextContentChange(O,p))),Object.keys(T).length>0&&(h.cells=T)}return h}t.asNotebookDocumentChangeEvent=g})(e=n.c2p||(n.c2p={}))})(Gi||(Gi={}));var yf;(function(n){function e(a,c,u){let l=a.length,g=c.length,d=0;for(;d<g&&d<l&&t(a[d],c[d],u);)d++;if(d<g&&d<l){let p=l-1,h=g-1;for(;p>=0&&h>=0&&t(a[p],c[h],u);)p--,h--;let T=p+1-d,I=d===h+1?void 0:c.slice(d,h+1);return I!==void 0?{start:d,deleteCount:T,cells:I}:{start:d,deleteCount:T}}else return d<g?{start:d,deleteCount:0,cells:c.slice(d)}:d<l?{start:d,deleteCount:l-d}:void 0}n.computeDiff=e;function t(a,c,u=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!r(a.executionSummary,c.executionSummary)?!1:!u||u&&o(a.metadata,c.metadata)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&i(a.timing,c.timing)}function i(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function o(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;let u=Array.isArray(a),l=Array.isArray(c);if(u!==l)return!1;if(u&&l){if(a.length!==c.length)return!1;for(let g=0;g<a.length;g++)if(!o(a[g],c[g]))return!1}if(s(a)&&s(c)){let g=Object.keys(a),d=Object.keys(c);if(g.length!==d.length||(g.sort(),d.sort(),!o(g,d)))return!1;for(let p=0;p<g.length;p++){let h=g[p];if(!o(a[h],c[h]))return!1}return!0}return!1}function s(a){return a!==null&&typeof a=="object"}n.isObjectLiteral=s})(yf||(yf={}));var vf;(function(n){function e(t,r){if(typeof t=="string")return t==="*"||r.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new WR.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(vf||(vf={}));var nc;(function(n){function e(r){let i=r.notebookSelector,o=[];for(let s of i){let a=(typeof s.notebook=="string"?s.notebook:s.notebook?.notebookType)??"*",c=typeof s.notebook=="string"?void 0:s.notebook?.scheme,u=typeof s.notebook=="string"?void 0:s.notebook?.pattern;if(s.cells!==void 0)for(let l of s.cells)o.push(t(a,c,u,l.language));else o.push(t(a,c,u,void 0))}return o}n.asDocumentSelector=e;function t(r,i,o,s){return i===void 0&&o===void 0?{notebook:r,language:s}:{notebook:{notebookType:r,scheme:i,pattern:o},language:s}}})(nc||(nc={}));var rc;(function(n){function e(t){return{cells:t,uris:new Set(t.map(r=>r.document.uri.toString()))}}n.create=e})(rc||(rc={}));var Qi=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(nc.asDocumentSelector(t)),Yt.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of Yt.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);Yt.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&Yt.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),Yt.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of Yt.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return Yt.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(Yt.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(r!==void 0){let o=r.uris.has(t.document.uri.toString());if(i&&o||!i&&!o)return;if(i){let s=this.getMatchingCells(e);if(s!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,s);a!==void 0&&this.doSendChange(a,s).catch(()=>{})}}}else i&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){Yt.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=t.document.uri,o=r.cells.findIndex(s=>s.document.uri.toString()===i.toString());if(o!==-1)if(o===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let s=r.cells.slice(),a=s.splice(o,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:o,deleteCount:1},didClose:a}}},s).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(t!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,t);i!==void 0&&this.doSendChange(i,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(t);if(i===void 0)return;this.didOpen(t,i,r)}else{let i=this.getMatchingCells(t);if(i===void 0){this.didClose(t,r);return}let o=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);o!==void 0&&this.doSendChange(o,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=>t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let r=async(o,s)=>{let a=Gi.c2p.asNotebookDocument(o,s,this.client.code2ProtocolConverter),c=s.map(u=>this.client.code2ProtocolConverter.asTextDocumentItem(u.document));try{await this.client.sendNotification(Cr.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(u){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",u),u}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),rc.create(t)),i?.didOpen!==void 0?i.didOpen(e,t,r):r(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let r=async o=>{try{await this.client.sendNotification(Cr.DidChangeNotebookDocumentNotification.type,{notebookDocument:Gi.c2p.asVersionedNotebookDocumentIdentifier(o.notebook,this.client.code2ProtocolConverter),change:Gi.c2p.asNotebookDocumentChangeEvent(o,this.client.code2ProtocolConverter)})}catch(s){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",s),s}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),rc.create(t??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async i=>{try{await this.client.sendNotification(Cr.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=async(o,s)=>{try{await this.client.sendNotification(Cr.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}asNotebookDocumentChangeEvent(e,t,r,i){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let o={notebook:e};t?.metadata!==void 0&&(o.metadata=Gi.c2p.asMetadata(t.metadata));let s;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let a=[];s=new Set(i.map(c=>c.document.uri.toString()));for(let c of t.cellChanges)s.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(o.cells=o.cells??{},o.cells.data=a)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,c=i,u=yf.computeDiff(a,c,!1),l,g;if(u!==void 0){l=u.cells===void 0?new Map:new Map(u.cells.map(h=>[h.document.uri.toString(),h])),g=u.deleteCount===0?new Map:new Map(a.slice(u.start,u.start+u.deleteCount).map(h=>[h.document.uri.toString(),h]));for(let h of Array.from(g.keys()))l.has(h)&&(g.delete(h),l.delete(h));o.cells=o.cells??{};let d=[],p=[];if(l.size>0||g.size>0){for(let h of l.values())d.push(h);for(let h of g.values())p.push(h)}o.cells.structure={array:u,didOpen:d,didClose:p}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||vf.matchNotebook(r.notebook,e)){let i=this.filterCells(e,t,r.cells);return i.length===0?void 0:i}}}cellMatches(e,t){let r=this.getMatchingCells(e,[t]);return r!==void 0&&r[0]===t}filterCells(e,t,r){let i=r!==void 0?t.filter(o=>{let s=o.document.languageId;return r.some(a=>a.language==="*"||s===a.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},ic=class n{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Cr.NotebookDocumentSyncRegistrationType.type,Yt.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Qi&&o.didOpenNotebookCellTextDocument(r,i)}),Yt.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==n.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Qi&&o.didChangeNotebookCellTextDocument(i,t)}),Yt.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Qi&&o.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=dC(dC(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(nc.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??zR.generateUuid();this.register({id:r,registerOptions:t})}register(e){let t=new Qi(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}clear(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==n.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Yt.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let r of Yt.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}};oc.NotebookDocumentSyncFeature=ic;ic.CellScheme="vscode-notebook-cell"});var pC=$(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.SyncConfigurationFeature=zr.toJSONObject=zr.ConfigurationFeature=void 0;var Yi=require("vscode"),Io=we(),KR=Nn(),XR=ft(),hC=Fe(),bf=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Io.ConfigurationRequest.type,(t,r)=>{let i=s=>{let a=[];for(let c of s.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},o=e.middleware.workspace;return o&&o.configuration?o.configuration(t,r,i):i(t,r)})}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(i===-1)r=ui(Yi.workspace.getConfiguration(void 0,e).get(t));else{let o=Yi.workspace.getConfiguration(t.substr(0,i),e);o&&(r=ui(o.get(t.substr(i+1))))}}else{let i=Yi.workspace.getConfiguration(void 0,e);r={};for(let o of Object.keys(i))i.has(o)&&(r[o]=ui(i.get(o)))}return r===void 0&&(r=null),r}clear(){}};zr.ConfigurationFeature=bf;function ui(n){if(n){if(Array.isArray(n))return n.map(ui);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=ui(n[t]));return e}}return n}zr.toJSONObject=ui;var wf=class{constructor(e){this._client=e,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Io.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,hC.ensure)((0,hC.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:XR.generateUuid(),registerOptions:{section:e}})}register(e){let t=Yi.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(e,t){if(this.isCleared)return;let r;if(KR.string(e)?r=[e]:r=e,r!==void 0&&t!==void 0&&!r.some(a=>t.affectsConfiguration(a)))return;let i=async s=>s===void 0?this._client.sendNotification(Io.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(Io.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)}),o=this._client.middleware.workspace?.didChangeConfiguration;(o?o(r,i):i(r)).catch(s=>{this._client.error(`Sending notification ${Io.DidChangeConfigurationNotification.type.method} failed`,s)})}extractSettingsInformation(e){function t(o,s){let a=o;for(let c=0;c<s.length-1;c++){let u=a[s[c]];u||(u=Object.create(null),a[s[c]]=u),a=u}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(a>=0?c=Yi.workspace.getConfiguration(s.substr(0,a),r).get(s.substr(a+1)):c=Yi.workspace.getConfiguration(void 0,r).get(s),c){let u=e[o].split(".");t(i,u)[u[u.length-1]]=ui(c)}}return i}};zr.SyncConfigurationFeature=wf});var gC=$(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.DidSaveTextDocumentFeature=gn.WillSaveWaitUntilFeature=gn.WillSaveFeature=gn.DidChangeTextDocumentFeature=gn.DidCloseTextDocumentFeature=gn.DidOpenTextDocumentFeature=void 0;var In=require("vscode"),nt=we(),gt=Fe(),Ji=ft(),Cf=class extends gt.TextDocumentEventFeature{constructor(e,t){super(e,In.workspace.onDidOpenTextDocument,nt.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,gt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,gt.ensure)((0,gt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:Ji.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return nt.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);In.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&In.languages.match(t,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));(o.didOpen?o.didOpen(r,s):s(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,r)}};gn.DidOpenTextDocumentFeature=Cf;var Df=class extends gt.TextDocumentEventFeature{constructor(e,t,r){super(e,In.workspace.onDidCloseTextDocument,nt.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,gt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=r}get registrationType(){return nt.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,gt.ensure)((0,gt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:Ji.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,r)}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(In.languages.match(t,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(o.didClose?o.didClose(i,s):s(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};gn.DidCloseTextDocumentFeature=Df;var Sf=class extends gt.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new In.EventEmitter,this._onPendingChangeAdded=new In.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=nt.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return nt.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,gt.ensure)((0,gt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.change!==void 0&&r.change!==nt.TextDocumentSyncKind.None&&this.register({id:Ji.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=In.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=e.document.uri,r=e.document.version,i=[];for(let o of this._changeData.values())if(In.languages.match(o.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let s=this._client.middleware;if(o.syncKind===nt.TextDocumentSyncKind.Incremental){let a=async c=>{let u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c,t,r);await this._client.sendNotification(nt.DidChangeTextDocumentNotification.type,u),this.notificationSent(c.document,nt.DidChangeTextDocumentNotification.type,u)};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}else if(o.syncKind===nt.TextDocumentSyncKind.Full){let a=async c=>{let u=c.document.uri.toString();this._pendingTextDocumentChanges.set(u,c.document),this._onPendingChangeAdded.fire()};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}}return Promise.all(i).then(void 0,o=>{throw this._client.error(`Sending document notification ${nt.DidChangeTextDocumentNotification.type.method} failed`,o),o})}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=nt.TextDocumentSyncKind.None;else{this._syncKind=nt.TextDocumentSyncKind.None;for(let t of this._changeData.values())if(this.updateSyncKind(t.syncKind),this._syncKind===nt.TextDocumentSyncKind.Full)break}}clear(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=nt.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let t;if(e.size===0)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(let r of this._pendingTextDocumentChanges)e.has(r[0])||(t.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return t}getProvider(e){for(let t of this._changeData.values())if(In.languages.match(t.documentSelector,e)>0)return{send:r=>this.callback(r)}}updateSyncKind(e){if(this._syncKind!==nt.TextDocumentSyncKind.Full)switch(e){case nt.TextDocumentSyncKind.Full:this._syncKind=e;break;case nt.TextDocumentSyncKind.Incremental:this._syncKind===nt.TextDocumentSyncKind.None&&(this._syncKind=nt.TextDocumentSyncKind.Incremental);break}}};gn.DidChangeTextDocumentFeature=Sf;var Tf=class extends gt.TextDocumentEventFeature{constructor(e){super(e,In.workspace.onWillSaveTextDocument,nt.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,r)=>gt.TextDocumentEventFeature.textDocumentFilter(t,r.document))}get registrationType(){return nt.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,gt.ensure)((0,gt.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:Ji.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}};gn.WillSaveFeature=Tf;var _f=class extends gt.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return nt.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,gt.ensure)((0,gt.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:Ji.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=In.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(gt.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,r=i=>this._client.sendRequest(nt.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async o=>{let s=await this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};gn.WillSaveWaitUntilFeature=_f;var Rf=class extends gt.TextDocumentEventFeature{constructor(e){super(e,In.workspace.onDidSaveTextDocument,nt.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,gt.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return nt.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,gt.ensure)((0,gt.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:Ji.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};gn.DidSaveTextDocumentFeature=Rf});var mC=$(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.CompletionItemFeature=void 0;var GR=require("vscode"),ke=we(),Pf=Fe(),QR=ft(),YR=[ke.CompletionItemKind.Text,ke.CompletionItemKind.Method,ke.CompletionItemKind.Function,ke.CompletionItemKind.Constructor,ke.CompletionItemKind.Field,ke.CompletionItemKind.Variable,ke.CompletionItemKind.Class,ke.CompletionItemKind.Interface,ke.CompletionItemKind.Module,ke.CompletionItemKind.Property,ke.CompletionItemKind.Unit,ke.CompletionItemKind.Value,ke.CompletionItemKind.Enum,ke.CompletionItemKind.Keyword,ke.CompletionItemKind.Snippet,ke.CompletionItemKind.Color,ke.CompletionItemKind.File,ke.CompletionItemKind.Reference,ke.CompletionItemKind.Folder,ke.CompletionItemKind.EnumMember,ke.CompletionItemKind.Constant,ke.CompletionItemKind.Struct,ke.CompletionItemKind.Event,ke.CompletionItemKind.Operator,ke.CompletionItemKind.TypeParameter],Ef=class extends Pf.TextDocumentLanguageFeature{constructor(e){super(e,ke.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,Pf.ensure)((0,Pf.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[ke.MarkupKind.Markdown,ke.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[ke.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[ke.InsertTextMode.asIs,ke.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=ke.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:YR},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);r&&this.register({id:QR.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,o=e.documentSelector,s={provideCompletionItems:(a,c,u,l)=>{let g=this._client,d=this._client.middleware,p=(h,T,I,O)=>g.sendRequest(ke.CompletionRequest.type,g.code2ProtocolConverter.asCompletionParams(h,T,I),O).then(E=>O.isCancellationRequested?null:g.protocol2CodeConverter.asCompletionResult(E,i,O),E=>g.handleFailedRequest(ke.CompletionRequest.type,O,E,null));return d.provideCompletionItem?d.provideCompletionItem(a,c,l,u,p):p(a,c,l,u)},resolveCompletionItem:e.resolveProvider?(a,c)=>{let u=this._client,l=this._client.middleware,g=(d,p)=>u.sendRequest(ke.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(d,!!this.labelDetailsSupport.get(t)),p).then(h=>p.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionItem(h),h=>u.handleFailedRequest(ke.CompletionResolveRequest.type,p,h,d));return l.resolveCompletionItem?l.resolveCompletionItem(a,c,g):g(a,c)}:void 0};return[GR.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),s,...r),s]}};sc.CompletionItemFeature=Ef});var yC=$(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.HoverFeature=void 0;var JR=require("vscode"),ko=we(),xf=Fe(),ZR=ft(),If=class extends xf.TextDocumentLanguageFeature{constructor(e){super(e,ko.HoverRequest.type)}fillClientCapabilities(e){let t=(0,xf.ensure)((0,xf.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[ko.MarkupKind.Markdown,ko.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);r&&this.register({id:ZR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideHover:(i,o,s)=>{let a=this._client,c=(l,g,d)=>a.sendRequest(ko.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asHover(p),p=>a.handleFailedRequest(ko.HoverRequest.type,d,p,null)),u=a.middleware;return u.provideHover?u.provideHover(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return JR.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ac.HoverFeature=If});var vC=$(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.DefinitionFeature=void 0;var eP=require("vscode"),kf=we(),Of=Fe(),tP=ft(),qf=class extends Of.TextDocumentLanguageFeature{constructor(e){super(e,kf.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,Of.ensure)((0,Of.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);r&&this.register({id:tP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDefinition:(i,o,s)=>{let a=this._client,c=(l,g,d)=>a.sendRequest(kf.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,d),p=>a.handleFailedRequest(kf.DefinitionRequest.type,d,p,null)),u=a.middleware;return u.provideDefinition?u.provideDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return eP.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};cc.DefinitionFeature=qf});var wC=$(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.SignatureHelpFeature=void 0;var bC=require("vscode"),Oo=we(),Nf=Fe(),nP=ft(),Lf=class extends Nf.TextDocumentLanguageFeature{constructor(e){super(e,Oo.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,Nf.ensure)((0,Nf.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Oo.MarkupKind.Markdown,Oo.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);r&&this.register({id:nP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideSignatureHelp:(r,i,o,s)=>{let a=this._client,c=(l,g,d,p)=>a.sendRequest(Oo.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(l,g,d),p).then(h=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(h,p),h=>a.handleFailedRequest(Oo.SignatureHelpRequest.type,p,h,null)),u=a.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(r,i,s,o,c):c(r,i,s,o)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return bC.languages.registerSignatureHelpProvider(r,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return bC.languages.registerSignatureHelpProvider(r,t,i)}}};uc.SignatureHelpFeature=Lf});var CC=$(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.DocumentHighlightFeature=void 0;var rP=require("vscode"),Af=we(),Ff=Fe(),iP=ft(),Mf=class extends Ff.TextDocumentLanguageFeature{constructor(e){super(e,Af.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,Ff.ensure)((0,Ff.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);r&&this.register({id:iP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentHighlights:(i,o,s)=>{let a=this._client,c=(l,g,d)=>a.sendRequest(Af.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(p,d),p=>a.handleFailedRequest(Af.DocumentHighlightRequest.type,d,p,null)),u=a.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(i,o,s,c):c(i,o,s)}};return[rP.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};lc.DocumentHighlightFeature=Mf});var Hf=$(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.DocumentSymbolFeature=ar.SupportedSymbolTags=ar.SupportedSymbolKinds=void 0;var oP=require("vscode"),We=we(),jf=Fe(),sP=ft();ar.SupportedSymbolKinds=[We.SymbolKind.File,We.SymbolKind.Module,We.SymbolKind.Namespace,We.SymbolKind.Package,We.SymbolKind.Class,We.SymbolKind.Method,We.SymbolKind.Property,We.SymbolKind.Field,We.SymbolKind.Constructor,We.SymbolKind.Enum,We.SymbolKind.Interface,We.SymbolKind.Function,We.SymbolKind.Variable,We.SymbolKind.Constant,We.SymbolKind.String,We.SymbolKind.Number,We.SymbolKind.Boolean,We.SymbolKind.Array,We.SymbolKind.Object,We.SymbolKind.Key,We.SymbolKind.Null,We.SymbolKind.EnumMember,We.SymbolKind.Struct,We.SymbolKind.Event,We.SymbolKind.Operator,We.SymbolKind.TypeParameter];ar.SupportedSymbolTags=[We.SymbolTag.Deprecated];var $f=class extends jf.TextDocumentLanguageFeature{constructor(e){super(e,We.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,jf.ensure)((0,jf.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:ar.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:ar.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);r&&this.register({id:sP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentSymbols:(o,s)=>{let a=this._client,c=async(l,g)=>{try{let d=await a.sendRequest(We.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(l),g);if(g.isCancellationRequested||d===void 0||d===null)return null;if(d.length===0)return[];{let p=d[0];return We.DocumentSymbol.is(p)?await a.protocol2CodeConverter.asDocumentSymbols(d,g):await a.protocol2CodeConverter.asSymbolInformations(d,g)}}catch(d){return a.handleFailedRequest(We.DocumentSymbolRequest.type,g,d,null)}},u=a.middleware;return u.provideDocumentSymbols?u.provideDocumentSymbols(o,s,c):c(o,s)}},i=e.label!==void 0?{label:e.label}:void 0;return[oP.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,i),r]}};ar.DocumentSymbolFeature=$f});var SC=$(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.WorkspaceSymbolFeature=void 0;var aP=require("vscode"),qo=we(),Uf=Fe(),DC=Hf(),cP=ft(),Bf=class extends Uf.WorkspaceFeature{constructor(e){super(e,qo.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,Uf.ensure)((0,Uf.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:DC.SupportedSymbolKinds},t.tagSupport={valueSet:DC.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:cP.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=>{let o=this._client,s=(c,u)=>o.sendRequest(qo.WorkspaceSymbolRequest.type,{query:c},u).then(l=>u.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(l,u),l=>o.handleFailedRequest(qo.WorkspaceSymbolRequest.type,u,l,null)),a=o.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,s):s(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let o=this._client,s=(c,u)=>o.sendRequest(qo.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(c),u).then(l=>u.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(l),l=>o.handleFailedRequest(qo.WorkspaceSymbolResolveRequest.type,u,l,null)),a=o.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,s):s(r,i)}:void 0};return[aP.languages.registerWorkspaceSymbolProvider(t),t]}};dc.WorkspaceSymbolFeature=Bf});var TC=$(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.ReferencesFeature=void 0;var uP=require("vscode"),Vf=we(),Wf=Fe(),lP=ft(),zf=class extends Wf.TextDocumentLanguageFeature{constructor(e){super(e,Vf.ReferencesRequest.type)}fillClientCapabilities(e){(0,Wf.ensure)((0,Wf.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);r&&this.register({id:lP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideReferences:(i,o,s,a)=>{let c=this._client,u=(g,d,p,h)=>c.sendRequest(Vf.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(g,d,p),h).then(T=>h.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(T,h),T=>c.handleFailedRequest(Vf.ReferencesRequest.type,h,T,null)),l=c.middleware;return l.provideReferences?l.provideReferences(i,o,s,a,u):u(i,o,s,a)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return uP.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};fc.ReferencesFeature=zf});var _C=$(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.CodeActionFeature=void 0;var dP=require("vscode"),kn=we(),fP=ft(),Kf=Fe(),Xf=class extends Kf.TextDocumentLanguageFeature{constructor(e){super(e,kn.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,Kf.ensure)((0,Kf.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[kn.CodeActionKind.Empty,kn.CodeActionKind.QuickFix,kn.CodeActionKind.Refactor,kn.CodeActionKind.RefactorExtract,kn.CodeActionKind.RefactorInline,kn.CodeActionKind.RefactorRewrite,kn.CodeActionKind.Source,kn.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);r&&this.register({id:fP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideCodeActions:(i,o,s,a)=>{let c=this._client,u=async(g,d,p,h)=>{let T={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(d),context:c.code2ProtocolConverter.asCodeActionContextSync(p)};return c.sendRequest(kn.CodeActionRequest.type,T,h).then(I=>h.isCancellationRequested||I===null||I===void 0?null:c.protocol2CodeConverter.asCodeActionResult(I,h),I=>c.handleFailedRequest(kn.CodeActionRequest.type,h,I,null))},l=c.middleware;return l.provideCodeActions?l.provideCodeActions(i,o,s,a,u):u(i,o,s,a)},resolveCodeAction:e.resolveProvider?(i,o)=>{let s=this._client,a=this._client.middleware,c=async(u,l)=>s.sendRequest(kn.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeActionSync(u),l).then(g=>l.isCancellationRequested?u:s.protocol2CodeConverter.asCodeAction(g,l),g=>s.handleFailedRequest(kn.CodeActionResolveRequest.type,l,g,u));return a.resolveCodeAction?a.resolveCodeAction(i,o,c):c(i,o)}:void 0};return[dP.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};hc.CodeActionFeature=Xf});var PC=$(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.CodeLensFeature=void 0;var RC=require("vscode"),Zi=we(),hP=ft(),No=Fe(),Gf=class extends No.TextDocumentLanguageFeature{constructor(e){super(e,Zi.CodeLensRequest.type)}fillClientCapabilities(e){(0,No.ensure)((0,No.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,No.ensure)((0,No.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Zi.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);i&&this.register({id:hP.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new RC.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,s)=>{let a=this._client,c=(l,g)=>a.sendRequest(Zi.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(l),g).then(d=>g.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(d,g),d=>a.handleFailedRequest(Zi.CodeLensRequest.type,g,d,null)),u=a.middleware;return u.provideCodeLenses?u.provideCodeLenses(o,s,c):c(o,s)},resolveCodeLens:e.resolveProvider?(o,s)=>{let a=this._client,c=(l,g)=>a.sendRequest(Zi.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(l),g).then(d=>g.isCancellationRequested?l:a.protocol2CodeConverter.asCodeLens(d),d=>a.handleFailedRequest(Zi.CodeLensResolveRequest.type,g,d,l)),u=a.middleware;return u.resolveCodeLens?u.resolveCodeLens(o,s,c):c(o,s)}:void 0};return[RC.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};pc.CodeLensFeature=Gf});var EC=$(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.DocumentOnTypeFormattingFeature=Kr.DocumentRangeFormattingFeature=Kr.DocumentFormattingFeature=void 0;var gc=require("vscode"),Kn=we(),Zf=ft(),Dr=Fe(),eo;(function(n){function e(t){let r=gc.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}n.fromConfiguration=e})(eo||(eo={}));var Qf=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,Kn.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);r&&this.register({id:Zf.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentFormattingEdits:(i,o,s)=>{let a=this._client,c=(l,g,d)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),options:a.code2ProtocolConverter.asFormattingOptions(g,eo.fromConfiguration(l))};return a.sendRequest(Kn.DocumentFormattingRequest.type,p,d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(h,d),h=>a.handleFailedRequest(Kn.DocumentFormattingRequest.type,d,h,null))},u=a.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(i,o,s,c):c(i,o,s)}};return[gc.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Kr.DocumentFormattingFeature=Qf;var Yf=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,Kn.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){let t=(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"rangeFormatting");t.dynamicRegistration=!0,t.rangesSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);r&&this.register({id:Zf.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,o,s,a)=>{let c=this._client,u=(g,d,p,h)=>{let T={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(d),options:c.code2ProtocolConverter.asFormattingOptions(p,eo.fromConfiguration(g))};return c.sendRequest(Kn.DocumentRangeFormattingRequest.type,T,h).then(I=>h.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(I,h),I=>c.handleFailedRequest(Kn.DocumentRangeFormattingRequest.type,h,I,null))},l=c.middleware;return l.provideDocumentRangeFormattingEdits?l.provideDocumentRangeFormattingEdits(i,o,s,a,u):u(i,o,s,a)}};return e.rangesSupport&&(r.provideDocumentRangesFormattingEdits=(i,o,s,a)=>{let c=this._client,u=(g,d,p,h)=>{let T={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),ranges:c.code2ProtocolConverter.asRanges(d),options:c.code2ProtocolConverter.asFormattingOptions(p,eo.fromConfiguration(g))};return c.sendRequest(Kn.DocumentRangesFormattingRequest.type,T,h).then(I=>h.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(I,h),I=>c.handleFailedRequest(Kn.DocumentRangesFormattingRequest.type,h,I,null))},l=c.middleware;return l.provideDocumentRangesFormattingEdits?l.provideDocumentRangesFormattingEdits(i,o,s,a,u):u(i,o,s,a)}),[gc.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Kr.DocumentRangeFormattingFeature=Yf;var Jf=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,Kn.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);r&&this.register({id:Zf.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideOnTypeFormattingEdits:(o,s,a,c,u)=>{let l=this._client,g=(p,h,T,I,O)=>{let E={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(p),position:l.code2ProtocolConverter.asPosition(h),ch:T,options:l.code2ProtocolConverter.asFormattingOptions(I,eo.fromConfiguration(p))};return l.sendRequest(Kn.DocumentOnTypeFormattingRequest.type,E,O).then(C=>O.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(C,O),C=>l.handleFailedRequest(Kn.DocumentOnTypeFormattingRequest.type,O,C,null))},d=l.middleware;return d.provideOnTypeFormattingEdits?d.provideOnTypeFormattingEdits(o,s,a,c,u,g):g(o,s,a,c,u)}},i=e.moreTriggerCharacter||[];return[gc.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.firstTriggerCharacter,...i),r]}};Kr.DocumentOnTypeFormattingFeature=Jf});var IC=$(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.RenameFeature=void 0;var pP=require("vscode"),li=we(),gP=ft(),xC=Nn(),eh=Fe(),th=class extends eh.TextDocumentLanguageFeature{constructor(e){super(e,li.RenameRequest.type)}fillClientCapabilities(e){let t=(0,eh.ensure)((0,eh.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=li.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);r&&(xC.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:gP.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t=e.documentSelector,r={provideRenameEdits:(i,o,s,a)=>{let c=this._client,u=(g,d,p,h)=>{let T={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),position:c.code2ProtocolConverter.asPosition(d),newName:p};return c.sendRequest(li.RenameRequest.type,T,h).then(I=>h.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(I,h),I=>c.handleFailedRequest(li.RenameRequest.type,h,I,null,!1))},l=c.middleware;return l.provideRenameEdits?l.provideRenameEdits(i,o,s,a,u):u(i,o,s,a)},prepareRename:e.prepareProvider?(i,o,s)=>{let a=this._client,c=(l,g,d)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),position:a.code2ProtocolConverter.asPosition(g)};return a.sendRequest(li.PrepareRenameRequest.type,p,d).then(h=>d.isCancellationRequested?null:li.Range.is(h)?a.protocol2CodeConverter.asRange(h):this.isDefaultBehavior(h)?h.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):h&&li.Range.is(h.range)?{range:a.protocol2CodeConverter.asRange(h.range),placeholder:h.placeholder}:Promise.reject(new Error("The element can't be renamed.")),h=>{throw typeof h.message=="string"?new Error(h.message):new Error("The element can't be renamed.")})},u=a.middleware;return u.prepareRename?u.prepareRename(i,o,s,c):c(i,o,s)}:void 0};return[this.registerProvider(t,r),r]}registerProvider(e,t){return pP.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&xC.boolean(t.defaultBehavior)}};mc.RenameFeature=th});var kC=$(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.DocumentLinkFeature=void 0;var mP=require("vscode"),Lo=we(),nh=Fe(),yP=ft(),rh=class extends nh.TextDocumentLanguageFeature{constructor(e){super(e,Lo.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,nh.ensure)((0,nh.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);r&&this.register({id:yP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentLinks:(i,o)=>{let s=this._client,a=(u,l)=>s.sendRequest(Lo.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(u),l).then(g=>l.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(g,l),g=>s.handleFailedRequest(Lo.DocumentLinkRequest.type,l,g,null)),c=s.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,o,a):a(i,o)},resolveDocumentLink:e.resolveProvider?(i,o)=>{let s=this._client,a=(u,l)=>s.sendRequest(Lo.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(u),l).then(g=>l.isCancellationRequested?u:s.protocol2CodeConverter.asDocumentLink(g),g=>s.handleFailedRequest(Lo.DocumentLinkResolveRequest.type,l,g,u)),c=s.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,o,a):a(i,o)}:void 0};return[mP.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};yc.DocumentLinkFeature=rh});var qC=$(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.ExecuteCommandFeature=void 0;var vP=require("vscode"),ih=we(),bP=ft(),OC=Fe(),oh=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return ih.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,OC.ensure)((0,OC.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:bP.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.middleware,i=(o,s)=>{let a={command:o,arguments:s};return t.sendRequest(ih.ExecuteCommandRequest.type,a).then(void 0,c=>t.handleFailedRequest(ih.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let o=[];for(let s of e.registerOptions.commands)o.push(vP.commands.registerCommand(s,(...a)=>r.executeCommand?r.executeCommand(s,a,i):i(s,a)));this._commands.set(e.id,o)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(r=>r.dispose())}clear(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};vc.ExecuteCommandFeature=oh});var NC=$(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.FileSystemWatcherFeature=void 0;var wP=require("vscode"),di=we(),bc=Fe(),sh=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return di.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,bc.ensure)((0,bc.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,bc.ensure)((0,bc.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let o=!0,s=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(o=(r.kind&di.WatchKind.Create)!==0,s=(r.kind&di.WatchKind.Change)!==0,a=(r.kind&di.WatchKind.Delete)!==0);let c=wP.workspace.createFileSystemWatcher(i,!o,!s,!a);this.hookListeners(c,o,s,a,t),t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,o){t&&e.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:di.FileChangeType.Created}),null,o),r&&e.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:di.FileChangeType.Changed}),null,o),i&&e.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:di.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}clear(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};wc.FileSystemWatcherFeature=sh});var LC=$(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.ColorProviderFeature=void 0;var CP=require("vscode"),Ao=we(),ah=Fe(),ch=class extends ah.TextDocumentLanguageFeature{constructor(e){super(e,Ao.DocumentColorRequest.type)}fillClientCapabilities(e){(0,ah.ensure)((0,ah.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=>{let a=this._client,c=(l,g,d)=>{let p={color:l,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g.document),range:a.code2ProtocolConverter.asRange(g.range)};return a.sendRequest(Ao.ColorPresentationRequest.type,p,d).then(h=>d.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(h,d),h=>a.handleFailedRequest(Ao.ColorPresentationRequest.type,d,h,null))},u=a.middleware;return u.provideColorPresentations?u.provideColorPresentations(i,o,s,c):c(i,o,s)},provideDocumentColors:(i,o)=>{let s=this._client,a=(u,l)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(u)};return s.sendRequest(Ao.DocumentColorRequest.type,g,l).then(d=>l.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(d,l),d=>s.handleFailedRequest(Ao.DocumentColorRequest.type,l,d,null))},c=s.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,o,a):a(i,o)}};return[CP.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Cc.ColorProviderFeature=ch});var AC=$(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.ImplementationFeature=void 0;var DP=require("vscode"),uh=we(),lh=Fe(),dh=class extends lh.TextDocumentLanguageFeature{constructor(e){super(e,uh.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,lh.ensure)((0,lh.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=>{let a=this._client,c=(l,g,d)=>a.sendRequest(uh.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,d),p=>a.handleFailedRequest(uh.ImplementationRequest.type,d,p,null)),u=a.middleware;return u.provideImplementation?u.provideImplementation(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return DP.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Dc.ImplementationFeature=dh});var FC=$(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.TypeDefinitionFeature=void 0;var SP=require("vscode"),fh=we(),Fo=Fe(),hh=class extends Fo.TextDocumentLanguageFeature{constructor(e){super(e,fh.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Fo.ensure)((0,Fo.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,Fo.ensure)((0,Fo.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=>{let a=this._client,c=(l,g,d)=>a.sendRequest(fh.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,d),p=>a.handleFailedRequest(fh.TypeDefinitionRequest.type,d,p,null)),u=a.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return SP.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Sc.TypeDefinitionFeature=hh});var MC=$(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.WorkspaceFoldersFeature=to.arrayDiff=void 0;var TP=ft(),Tc=require("vscode"),Mo=we();function ph(n,e){if(n!=null)return n[e]}function gh(n,e){return n.filter(t=>e.indexOf(t)<0)}to.arrayDiff=gh;var mh=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Mo.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=Tc.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Mo.WorkspaceFoldersRequest.type,o=>{let s=()=>{let c=Tc.workspace.workspaceFolders;return c===void 0?null:c.map(l=>this.asProtocol(l))},a=t.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=ph(ph(ph(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=TP.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let r=gh(this._initialFolders,e),i=gh(e,this._initialFolders);(i.length>0||r.length>0)&&(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(r=>{this._client.error(`Sending notification ${Mo.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Mo.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=Tc.workspace.onDidChangeWorkspaceFolders(o=>{let s=u=>this.doSendEvent(u.added,u.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(u=>{this._client.error(`Sending notification ${Mo.DidChangeWorkspaceFoldersNotification.type.method} failed`,u)})});this._listeners.set(t,i),this.sendInitialEvent(Tc.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};to.WorkspaceFoldersFeature=mh});var $C=$(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.FoldingRangeFeature=void 0;var jC=require("vscode"),fi=we(),jo=Fe(),yh=class extends jo.TextDocumentLanguageFeature{constructor(e){super(e,fi.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,jo.ensure)((0,jo.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[fi.FoldingRangeKind.Comment,fi.FoldingRangeKind.Imports,fi.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1},(0,jo.ensure)((0,jo.ensure)(e,"workspace"),"foldingRange").refreshSupport=!0}initialize(e,t){this._client.onRequest(fi.FoldingRangeRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeFoldingRange.fire()});let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new jC.EventEmitter,i={onDidChangeFoldingRanges:r.event,provideFoldingRanges:(o,s,a)=>{let c=this._client,u=(g,d,p)=>{let h={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g)};return c.sendRequest(fi.FoldingRangeRequest.type,h,p).then(T=>p.isCancellationRequested?null:c.protocol2CodeConverter.asFoldingRanges(T,p),T=>c.handleFailedRequest(fi.FoldingRangeRequest.type,p,T,null))},l=c.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(o,s,a,u):u(o,s,a)}};return[jC.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeFoldingRange:r}]}};_c.FoldingRangeFeature=yh});var HC=$(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.DeclarationFeature=void 0;var _P=require("vscode"),vh=we(),bh=Fe(),wh=class extends bh.TextDocumentLanguageFeature{constructor(e){super(e,vh.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,bh.ensure)((0,bh.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=>{let a=this._client,c=(l,g,d)=>a.sendRequest(vh.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(p,d),p=>a.handleFailedRequest(vh.DeclarationRequest.type,d,p,null)),u=a.middleware;return u.provideDeclaration?u.provideDeclaration(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return _P.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Rc.DeclarationFeature=wh});var UC=$(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.SelectionRangeFeature=void 0;var RP=require("vscode"),Ch=we(),Dh=Fe(),Sh=class extends Dh.TextDocumentLanguageFeature{constructor(e){super(e,Ch.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,Dh.ensure)((0,Dh.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=>{let a=this._client,c=async(l,g,d)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),positions:a.code2ProtocolConverter.asPositionsSync(g,d)};return a.sendRequest(Ch.SelectionRangeRequest.type,p,d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(h,d),h=>a.handleFailedRequest(Ch.SelectionRangeRequest.type,d,h,null))},u=a.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return RP.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Pc.SelectionRangeFeature=Sh});var VC=$(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.ProgressFeature=void 0;var BC=we(),PP=Gd();function EP(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var Th=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:BC.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){EP(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new PP.ProgressPart(this._client,i.token,t))};e.onRequest(BC.WorkDoneProgressCreateRequest.type,r)}clear(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Ec.ProgressFeature=Th});var WC=$(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.CallHierarchyFeature=void 0;var xP=require("vscode"),hi=we(),_h=Fe(),Rh=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(hi.CallHierarchyPrepareRequest.type,l,u).then(g=>u.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(g,u),g=>i.handleFailedRequest(hi.CallHierarchyPrepareRequest.type,u,g,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(hi.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(u,a),u=>r.handleFailedRequest(hi.CallHierarchyIncomingCallsRequest.type,a,u,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(hi.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u,a),u=>r.handleFailedRequest(hi.CallHierarchyOutgoingCallsRequest.type,a,u,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},Ph=class extends _h.TextDocumentLanguageFeature{constructor(e){super(e,hi.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,r=(0,_h.ensure)((0,_h.ensure)(t,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Rh(t);return[xP.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};xc.CallHierarchyFeature=Ph});var zC=$(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.SemanticTokensFeature=void 0;var Ic=require("vscode"),Se=we(),$o=Fe(),IP=Nn(),Eh=class extends $o.TextDocumentLanguageFeature{constructor(e){super(e,Se.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,$o.ensure)((0,$o.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[Se.SemanticTokenTypes.namespace,Se.SemanticTokenTypes.type,Se.SemanticTokenTypes.class,Se.SemanticTokenTypes.enum,Se.SemanticTokenTypes.interface,Se.SemanticTokenTypes.struct,Se.SemanticTokenTypes.typeParameter,Se.SemanticTokenTypes.parameter,Se.SemanticTokenTypes.variable,Se.SemanticTokenTypes.property,Se.SemanticTokenTypes.enumMember,Se.SemanticTokenTypes.event,Se.SemanticTokenTypes.function,Se.SemanticTokenTypes.method,Se.SemanticTokenTypes.macro,Se.SemanticTokenTypes.keyword,Se.SemanticTokenTypes.modifier,Se.SemanticTokenTypes.comment,Se.SemanticTokenTypes.string,Se.SemanticTokenTypes.number,Se.SemanticTokenTypes.regexp,Se.SemanticTokenTypes.operator,Se.SemanticTokenTypes.decorator],t.tokenModifiers=[Se.SemanticTokenModifiers.declaration,Se.SemanticTokenModifiers.definition,Se.SemanticTokenModifiers.readonly,Se.SemanticTokenModifiers.static,Se.SemanticTokenModifiers.deprecated,Se.SemanticTokenModifiers.abstract,Se.SemanticTokenModifiers.async,Se.SemanticTokenModifiers.modification,Se.SemanticTokenModifiers.documentation,Se.SemanticTokenModifiers.defaultLibrary],t.formats=[Se.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,$o.ensure)((0,$o.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Se.SemanticTokensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=IP.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,o=new Ic.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(p,h)=>{let T=this._client,I=T.middleware,O=(E,C)=>{let y={textDocument:T.code2ProtocolConverter.asTextDocumentIdentifier(E)};return T.sendRequest(Se.SemanticTokensRequest.type,y,C).then(m=>C.isCancellationRequested?null:T.protocol2CodeConverter.asSemanticTokens(m,C),m=>T.handleFailedRequest(Se.SemanticTokensRequest.type,C,m,null))};return I.provideDocumentSemanticTokens?I.provideDocumentSemanticTokens(p,h,O):O(p,h)},provideDocumentSemanticTokensEdits:i?(p,h,T)=>{let I=this._client,O=I.middleware,E=(C,y,m)=>{let P={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(C),previousResultId:y};return I.sendRequest(Se.SemanticTokensDeltaRequest.type,P,m).then(async A=>m.isCancellationRequested?null:Se.SemanticTokens.is(A)?await I.protocol2CodeConverter.asSemanticTokens(A,m):await I.protocol2CodeConverter.asSemanticTokensEdits(A,m),A=>I.handleFailedRequest(Se.SemanticTokensDeltaRequest.type,m,A,null))};return O.provideDocumentSemanticTokensEdits?O.provideDocumentSemanticTokensEdits(p,h,T,E):E(p,h,T)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(p,h,T)=>{let I=this._client,O=I.middleware,E=(C,y,m)=>{let P={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(C),range:I.code2ProtocolConverter.asRange(y)};return I.sendRequest(Se.SemanticTokensRangeRequest.type,P,m).then(A=>m.isCancellationRequested?null:I.protocol2CodeConverter.asSemanticTokens(A,m),A=>I.handleFailedRequest(Se.SemanticTokensRangeRequest.type,m,A,null))};return O.provideDocumentRangeSemanticTokens?O.provideDocumentRangeSemanticTokens(p,h,T,E):E(p,h,T)}}:void 0,u=[],l=this._client,g=l.protocol2CodeConverter.asSemanticTokensLegend(e.legend),d=l.protocol2CodeConverter.asDocumentSelector(t);return s!==void 0&&u.push(Ic.languages.registerDocumentSemanticTokensProvider(d,s,g)),c!==void 0&&u.push(Ic.languages.registerDocumentRangeSemanticTokensProvider(d,c,g)),[new Ic.Disposable(()=>u.forEach(p=>p.dispose())),{range:c,full:s,onDidChangeSemanticTokensEmitter:o}]}};kc.SemanticTokensFeature=Eh});var GC=$(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.WillDeleteFilesFeature=mn.WillRenameFilesFeature=mn.WillCreateFilesFeature=mn.DidDeleteFilesFeature=mn.DidRenameFilesFeature=mn.DidCreateFilesFeature=void 0;var $n=require("vscode"),kP=Za(),Sr=we(),OP=ft();function KC(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function qP(n,e){return n[e]}function XC(n,e,t){n[e]=t}var Ho=class n{constructor(e,t,r,i,o){this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=KC(KC(e,"workspace"),"fileOperations");XC(t,"dynamicRegistration",!0),XC(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?qP(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:OP.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=>{let i=new kP.Minimatch(r.pattern.glob,n.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return n.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=>{let s=t(o),a=s.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==s.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;let l=await this.getFileType(s);if(l===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(l===$n.FileType.File&&u.kind===Sr.FileOperationPatternKind.file||l===$n.FileType.Directory&&u.kind===Sr.FileOperationPatternKind.folder)return!0}else if(u.kind===Sr.FileOperationPatternKind.folder&&await n.getFileType(s)===$n.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=>r[s]);return{...e,files:i}}static async getFileType(e){try{return(await $n.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){let t={dot:!0};return e?.ignoreCase===!0&&(t.nocase=!0),t}},Oc=class extends Ho{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},qc=class extends Oc{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await Ho.getFileType(e);return r&&this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}clear(){super.clear(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},xh=class extends Oc{constructor(e){super(e,$n.workspace.onDidCreateFiles,Sr.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};mn.DidCreateFilesFeature=xh;var Ih=class extends qc{constructor(e){super(e,$n.workspace.onDidRenameFiles,Sr.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=$n.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};mn.DidRenameFilesFeature=Ih;var kh=class extends qc{constructor(e){super(e,$n.workspace.onDidDeleteFiles,Sr.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=$n.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};mn.DidDeleteFilesFeature=kh;var Uo=class extends Ho{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},Oh=class extends Uo{constructor(e){super(e,$n.workspace.onWillCreateFiles,Sr.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};mn.WillCreateFilesFeature=Oh;var qh=class extends Uo{constructor(e){super(e,$n.workspace.onWillRenameFiles,Sr.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};mn.WillRenameFilesFeature=qh;var Nh=class extends Uo{constructor(e){super(e,$n.workspace.onWillDeleteFiles,Sr.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};mn.WillDeleteFilesFeature=Nh});var QC=$(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.LinkedEditingFeature=void 0;var NP=require("vscode"),Lh=we(),Ah=Fe(),Fh=class extends Ah.TextDocumentLanguageFeature{constructor(e){super(e,Lh.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Ah.ensure)((0,Ah.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=>{let a=this._client,c=(l,g,d)=>a.sendRequest(Lh.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(p,d),p=>a.handleFailedRequest(Lh.LinkedEditingRangeRequest.type,d,p,null)),u=a.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return NP.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Nc.LinkedEditingFeature=Fh});var YC=$(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.TypeHierarchyFeature=void 0;var LP=require("vscode"),pi=we(),Mh=Fe(),jh=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(pi.TypeHierarchyPrepareRequest.type,l,u).then(g=>u.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(g,u),g=>i.handleFailedRequest(pi.TypeHierarchyPrepareRequest.type,u,g,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(pi.TypeHierarchySupertypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(pi.TypeHierarchySupertypesRequest.type,a,u,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(pi.TypeHierarchySubtypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(pi.TypeHierarchySubtypesRequest.type,a,u,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},$h=class extends Mh.TextDocumentLanguageFeature{constructor(e){super(e,pi.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,Mh.ensure)((0,Mh.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new jh(t);return[LP.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Lc.TypeHierarchyFeature=$h});var ZC=$(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.InlineValueFeature=void 0;var JC=require("vscode"),Ac=we(),Bo=Fe(),Hh=class extends Bo.TextDocumentLanguageFeature{constructor(e){super(e,Ac.InlineValueRequest.type)}fillClientCapabilities(e){(0,Bo.ensure)((0,Bo.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Bo.ensure)((0,Bo.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(Ac.InlineValueRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new JC.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,c)=>{let u=this._client,l=(d,p,h,T)=>{let I={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(d),range:u.code2ProtocolConverter.asRange(p),context:u.code2ProtocolConverter.asInlineValueContext(h)};return u.sendRequest(Ac.InlineValueRequest.type,I,T).then(O=>T.isCancellationRequested?null:u.protocol2CodeConverter.asInlineValues(O,T),O=>u.handleFailedRequest(Ac.InlineValueRequest.type,T,O,null))},g=u.middleware;return g.provideInlineValues?g.provideInlineValues(o,s,a,c,l):l(o,s,a,c)}};return[this.registerProvider(t,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,t){return JC.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Fc.InlineValueFeature=Hh});var tD=$(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.InlayHintsFeature=void 0;var eD=require("vscode"),no=we(),Vo=Fe(),Uh=class extends Vo.TextDocumentLanguageFeature{constructor(e){super(e,no.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,Vo.ensure)((0,Vo.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Vo.ensure)((0,Vo.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(no.InlayHintRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(t,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new eD.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(o,s,a)=>{let c=this._client,u=async(g,d,p)=>{let h={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(d)};try{let T=await c.sendRequest(no.InlayHintRequest.type,h,p);return p.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(T,p)}catch(T){return c.handleFailedRequest(no.InlayHintRequest.type,p,T,null)}},l=c.middleware;return l.provideInlayHints?l.provideInlayHints(o,s,a,u):u(o,s,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(o,s)=>{let a=this._client,c=async(l,g)=>{try{let d=await a.sendRequest(no.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(l),g);if(g.isCancellationRequested)return null;let p=a.protocol2CodeConverter.asInlayHint(d,g);return g.isCancellationRequested?null:p}catch(d){return a.handleFailedRequest(no.InlayHintResolveRequest.type,g,d,null)}},u=a.middleware;return u.resolveInlayHint?u.resolveInlayHint(o,s,c):c(o,s)}:void 0,[this.registerProvider(t,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,t){return eD.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Mc.InlayHintsFeature=Uh});var nD=$(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.InlineCompletionItemFeature=void 0;var AP=require("vscode"),Bh=we(),Vh=Fe(),FP=ft(),Wh=class extends Vh.TextDocumentLanguageFeature{constructor(e){super(e,Bh.InlineCompletionRequest.type)}fillClientCapabilities(e){let t=(0,Vh.ensure)((0,Vh.ensure)(e,"textDocument"),"inlineCompletion");t.dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.inlineCompletionProvider);r&&this.register({id:FP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideInlineCompletionItems:(i,o,s,a)=>{let c=this._client,u=this._client.middleware,l=(g,d,p,h)=>c.sendRequest(Bh.InlineCompletionRequest.type,c.code2ProtocolConverter.asInlineCompletionParams(g,d,p),h).then(T=>h.isCancellationRequested?null:c.protocol2CodeConverter.asInlineCompletionResult(T,h),T=>c.handleFailedRequest(Bh.InlineCompletionRequest.type,h,T,null));return u.provideInlineCompletionItems?u.provideInlineCompletionItems(i,o,s,a,l):l(i,o,s,a)}};return[AP.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};jc.InlineCompletionItemFeature=Wh});var Yh=$($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.ProposedFeatures=$t.BaseLanguageClient=$t.MessageTransports=$t.SuspendMode=$t.State=$t.CloseAction=$t.ErrorAction=$t.RevealOutputChannelOn=void 0;var Ke=require("vscode"),J=we(),MP=Ow(),jP=Lw(),Gn=Nn(),$c=za(),rD=ft(),$P=Gd(),Xn=Fe(),HP=mf(),iD=fC(),oD=pC(),ro=gC(),UP=mC(),BP=yC(),VP=vC(),WP=wC(),zP=CC(),KP=Hf(),XP=SC(),GP=TC(),QP=_C(),YP=PC(),zh=EC(),JP=IC(),ZP=kC(),eE=qC(),tE=NC(),nE=LC(),rE=AC(),iE=FC(),oE=MC(),sE=$C(),aE=HC(),cE=UC(),uE=VC(),lE=WC(),dE=zC(),io=GC(),fE=QC(),hE=YC(),pE=ZC(),gE=tD(),mE=nD(),gi;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(gi||($t.RevealOutputChannelOn=gi={}));var zo;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(zo||($t.ErrorAction=zo={}));var Xr;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(Xr||($t.CloseAction=Xr={}));var Wo;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(Wo||($t.State=Wo={}));var sD;(function(n){n.off="off",n.on="on"})(sD||($t.SuspendMode=sD={}));var Kh;(function(n){function e(t){return t==null?!1:typeof t=="boolean"||typeof t=="object"&&t!==null&&Gn.stringArray(t.enabledCommands)?t:!1}n.sanitizeIsTrusted=e})(Kh||(Kh={}));var Xh=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?{action:zo.Continue}:{action:zo.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Xr.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Xr.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Xr.Restart})}},Re;(function(n){n.Initial="initial",n.Starting="starting",n.StartFailed="startFailed",n.Running="running",n.Stopping="stopping",n.Stopped="stopped"})(Re||(Re={}));var aD;(function(n){function e(t){return t&&J.MessageReader.is(t.reader)&&J.MessageWriter.is(t.writer)}n.is=e})(aD||($t.MessageTransports=aD={}));var Ko=class n{constructor(e,t,r){this._traceFormat=J.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new $c.Semaphore(1),this._id=e,this._name=t,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=Kh.sanitizeIsTrusted(r.markdown.isTrusted),i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??gi.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Re.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new $c.Semaphore(1),this._pendingChangeDelayer=new $c.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new $c.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new J.Emitter,this._stateChangeEmitter=new J.Emitter,this._trace=J.Trace.Off,this._tracer={log:(o,s)=>{Gn.string(o)?this.logTrace(o,s):this.logObjectTrace(o)}},this._c2p=MP.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=jP.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=Ke.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){switch(this.$state){case Re.Starting:return Wo.Starting;case Re.Running:return Wo.Running;default:return Wo.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===Re.StartFailed||this.$state===Re.Stopping||this.$state===Re.Stopped)return Promise.reject(new J.ResponseError(J.ErrorCodes.ConnectionInactive,"Client is not running"));let r=await this.$start();this._didChangeTextDocumentFeature.syncKind===J.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r);let i=this._clientOptions.middleware?.sendRequest;if(i!==void 0){let o,s;return t.length===1?J.CancellationToken.is(t[0])?s=t[0]:o=t[0]:t.length===2&&(o=t[0],s=t[1]),i(e,o,s,(a,c,u)=>{let l=[];return c!==void 0&&l.push(c),u!==void 0&&l.push(u),r.sendRequest(a,...l)})}else return r.sendRequest(e,...t)}onRequest(e,t){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,t);let i=this.activeConnection(),o;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,t)),o={dispose:()=>{let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,t),o={dispose:()=>{this._pendingRequestHandlers.delete(r);let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),o.dispose()}}}async sendNotification(e,t){if(this.$state===Re.StartFailed||this.$state===Re.Stopping||this.$state===Re.Stopped)return Promise.reject(new J.ResponseError(J.ErrorCodes.ConnectionInactive,"Client is not running"));let r=this._didChangeTextDocumentFeature.syncKind===J.TextDocumentSyncKind.Full,i;r&&typeof e!="string"&&e.method===J.DidOpenTextDocumentNotification.method&&(i=t?.textDocument.uri,this._pendingOpenNotifications.add(i));let o=await this.$start();r&&await this.sendPendingFullTextDocumentChanges(o),i!==void 0&&this._pendingOpenNotifications.delete(i);let s=this._clientOptions.middleware?.sendNotification;return s?s(e,o.sendNotification.bind(o),t):o.sendNotification(e,t)}onNotification(e,t){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,t);let i=this.activeConnection(),o;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,t)),o={dispose:()=>{let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,t),o={dispose:()=>{this._pendingNotificationHandlers.delete(r);let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),o.dispose()}}}async sendProgress(e,t,r){if(this.$state===Re.StartFailed||this.$state===Re.Stopping||this.$state===Re.Stopped)return Promise.reject(new J.ResponseError(J.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,r)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}onProgress(e,t,r){this._progressHandlers.set(t,{type:e,handler:r});let i=this.activeConnection(),o,s=this._clientOptions.middleware?.handleWorkDoneProgress,a=J.WorkDoneProgress.is(e)&&s!==void 0?c=>{s(t,c,()=>r(c))}:r;return i!==void 0?(this._progressDisposables.set(t,i.onProgress(e,t,a)),o={dispose:()=>{let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:r}),o={dispose:()=>{this._pendingProgressHandlers.delete(t);let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),o.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Xh(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof J.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?Gn.string(e.stack)?e.stack:e.message:Gn.string(e)?e:e.toString()}debug(e,t,r=!0){this.logOutputMessage(J.MessageType.Debug,gi.Debug,"Debug",e,t,r)}info(e,t,r=!0){this.logOutputMessage(J.MessageType.Info,gi.Info,"Info",e,t,r)}warn(e,t,r=!0){this.logOutputMessage(J.MessageType.Warning,gi.Warn,"Warn",e,t,r)}error(e,t,r=!0){this.logOutputMessage(J.MessageType.Error,gi.Error,"Error",e,t,r)}logOutputMessage(e,t,r,i,o,s){this.outputChannel.appendLine(`[${r.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${i}`),o!=null&&this.outputChannel.appendLine(this.data2String(o)),(s==="force"||s&&this._clientOptions.revealOutputChannelOn<=t)&&this.showNotificationMessage(e,i)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===J.MessageType.Error?Ke.window.showErrorMessage:e===J.MessageType.Warning?Ke.window.showWarningMessage:Ke.window.showInformationMessage)(t,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Re.Initial||this.$state===Re.Stopping||this.$state===Re.Stopped}needsStop(){return this.$state===Re.Starting||this.$state===Re.Running}activeConnection(){return this.$state===Re.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===Re.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===Re.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?Ke.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):Ke.languages.createDiagnosticCollection());for(let[i,o]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,o);for(let[i,o]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,o);for(let[i,o]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,o);this.$state=Re.Starting;try{let i=await this.createConnection();i.onNotification(J.LogMessageNotification.type,o=>{switch(o.type){case J.MessageType.Error:this.error(o.message,void 0,!1);break;case J.MessageType.Warning:this.warn(o.message,void 0,!1);break;case J.MessageType.Info:this.info(o.message,void 0,!1);break;case J.MessageType.Debug:this.debug(o.message,void 0,!1);break;default:this.outputChannel.appendLine(o.message)}}),i.onNotification(J.ShowMessageNotification.type,o=>{switch(o.type){case J.MessageType.Error:Ke.window.showErrorMessage(o.message);break;case J.MessageType.Warning:Ke.window.showWarningMessage(o.message);break;case J.MessageType.Info:Ke.window.showInformationMessage(o.message);break;default:Ke.window.showInformationMessage(o.message)}}),i.onRequest(J.ShowMessageRequest.type,o=>{let s;switch(o.type){case J.MessageType.Error:s=Ke.window.showErrorMessage;break;case J.MessageType.Warning:s=Ke.window.showWarningMessage;break;case J.MessageType.Info:s=Ke.window.showInformationMessage;break;default:s=Ke.window.showInformationMessage}let a=o.actions||[];return s(o.message,...a)}),i.onNotification(J.TelemetryEventNotification.type,o=>{this._telemetryEmitter.fire(o)}),i.onRequest(J.ShowDocumentRequest.type,async o=>{let s=async c=>{let u=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await Ke.env.openExternal(u)};{let l={};return c.selection!==void 0&&(l.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?l.preserveFocus=!0:c.takeFocus===!0&&(l.preserveFocus=!1),await Ke.window.showTextDocument(u,l),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(o,s):s(o)}),i.listen(),await this.initialize(i),t()}catch(i){this.$state=Re.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((i,o)=>{e=i,t=o}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:Ke.env.appName,version:Ke.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(Ke.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Gn.func(t)?t():t,trace:J.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=rD.generateUuid(),a=new $P.ProgressPart(e,s);o.workDoneToken=s;try{let c=await this.doInitialize(e,o);return a.done(),c}catch(c){throw a.cancel(),c}}else return this.doInitialize(e,o)}async doInitialize(e,t){try{let r=await e.initialize(t);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==J.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=Re.Running;let i;Gn.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===J.TextDocumentSyncKind.None?i={openClose:!1,change:J.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(J.PublishDiagnosticsNotification.type,o=>this.handleDiagnostics(o)),e.onRequest(J.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest(J.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest(J.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o));for(let[o,s]of this._pendingNotificationHandlers)this._notificationDisposables.set(o,e.onNotification(o,s));this._pendingNotificationHandlers.clear();for(let[o,s]of this._pendingRequestHandlers)this._requestDisposables.set(o,e.onRequest(o,s));this._pendingRequestHandlers.clear();for(let[o,s]of this._pendingProgressHandlers)this._progressDisposables.set(o,e.onProgress(s.type,o,s.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(J.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof J.ResponseError&&r.data&&r.data.retry?Ke.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&Ke.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=Ke.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===Re.Stopped||this.$state===Re.Initial)return;if(this.$state===Re.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==Re.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Re.Stopping,this.cleanUp(e);let i=new Promise(s=>{(0,J.RAL)().timer.setTimeout(s,t)}),o=(async s=>(await s.shutdown(),await s.exit(),s))(r);return this._onStop=Promise.race([i,o]).then(s=>{if(s!==void 0)s.end(),s.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},s=>{throw this.error("Stopping server failed",s,!1),s}).finally(()=>{this.$state=Re.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let r of t)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.clear();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=>{await t.sendNotification(J.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=>{t.error("Notify file events failed.",o)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(t.length===0)return;for(let r of t){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification(J.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(r,J.DidChangeTextDocumentNotification.type,i)}}catch(t){throw this.error("Sending pending changes failed",t,!1),t}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,J.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,r]=e.value;this._diagnosticQueue.delete(t);let i=new Ke.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(o=>{if(!i.token.isCancellationRequested){let s=this._p2c.asUri(t),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(s,o,(c,u)=>this.setDiagnostics(c,u)):this.setDiagnostics(s,o)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}getLocale(){return Ke.env.language}async $start(){if(this.$state===Re.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,o,s)=>{this.handleConnectionError(i,o,s).catch(a=>this.error("Handling connection error failed",a))},t=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=yE(r.reader,r.writer,e,t,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===Re.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:Xr.DoNotRestart};if(this.$state!==Re.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===Xr.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===Re.Starting?this.$state=Re.StartFailed:this.$state=Re.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===Xr.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=Re.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}async handleConnectionError(e,t,r){let i=await this._clientOptions.errorHandler.error(e,t,r);i.action===zo.Shutdown?(this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}
Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(o=>{this.error("Stopping server failed",o,!1)})):this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}`,void 0,i.handled===!0?!1:"force")}hookConfigurationChanged(e){this._listeners.push(Ke.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let r=Ke.workspace.getConfiguration(this._id),i=J.Trace.Off,o=J.TraceFormat.Text;if(r){let s=r.get("trace.server","off");typeof s=="string"?i=J.Trace.fromString(s):(i=J.Trace.fromString(r.get("trace.server.verbosity","off")),o=J.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(s=>{this.error("Updating trace failed with error",s,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;Gn.array(t)?r=t:r=[t],r&&this._dynamicFeatures.get(J.DidChangeWatchedFilesNotification.type.method).registerRaw(rD.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),Xn.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature(J.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof iD.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new oD.ConfigurationFeature(this)),this.registerFeature(new ro.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new ro.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new ro.WillSaveFeature(this)),this.registerFeature(new ro.WillSaveWaitUntilFeature(this)),this.registerFeature(new ro.DidSaveTextDocumentFeature(this)),this.registerFeature(new ro.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new tE.FileSystemWatcherFeature(this,t=>this.notifyFileEvent(t))),this.registerFeature(new UP.CompletionItemFeature(this)),this.registerFeature(new BP.HoverFeature(this)),this.registerFeature(new WP.SignatureHelpFeature(this)),this.registerFeature(new VP.DefinitionFeature(this)),this.registerFeature(new GP.ReferencesFeature(this)),this.registerFeature(new zP.DocumentHighlightFeature(this)),this.registerFeature(new KP.DocumentSymbolFeature(this)),this.registerFeature(new XP.WorkspaceSymbolFeature(this)),this.registerFeature(new QP.CodeActionFeature(this)),this.registerFeature(new YP.CodeLensFeature(this)),this.registerFeature(new zh.DocumentFormattingFeature(this)),this.registerFeature(new zh.DocumentRangeFormattingFeature(this)),this.registerFeature(new zh.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new JP.RenameFeature(this)),this.registerFeature(new ZP.DocumentLinkFeature(this)),this.registerFeature(new eE.ExecuteCommandFeature(this)),this.registerFeature(new oD.SyncConfigurationFeature(this)),this.registerFeature(new iE.TypeDefinitionFeature(this)),this.registerFeature(new rE.ImplementationFeature(this)),this.registerFeature(new nE.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new oE.WorkspaceFoldersFeature(this)),this.registerFeature(new sE.FoldingRangeFeature(this)),this.registerFeature(new aE.DeclarationFeature(this)),this.registerFeature(new cE.SelectionRangeFeature(this)),this.registerFeature(new uE.ProgressFeature(this)),this.registerFeature(new lE.CallHierarchyFeature(this)),this.registerFeature(new dE.SemanticTokensFeature(this)),this.registerFeature(new fE.LinkedEditingFeature(this)),this.registerFeature(new io.DidCreateFilesFeature(this)),this.registerFeature(new io.DidRenameFilesFeature(this)),this.registerFeature(new io.DidDeleteFilesFeature(this)),this.registerFeature(new io.WillCreateFilesFeature(this)),this.registerFeature(new io.WillRenameFilesFeature(this)),this.registerFeature(new io.WillDeleteFilesFeature(this)),this.registerFeature(new hE.TypeHierarchyFeature(this)),this.registerFeature(new pE.InlineValueFeature(this)),this.registerFeature(new gE.InlayHintsFeature(this)),this.registerFeature(new HP.DiagnosticFeature(this)),this.registerFeature(new iD.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Qh.createAll(this))}fillInitializeParams(e){for(let t of this._features)Gn.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,Xn.ensure)(e,"workspace").applyEdit=!0;let t=(0,Xn.ensure)((0,Xn.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[J.ResourceOperationKind.Create,J.ResourceOperationKind.Rename,J.ResourceOperationKind.Delete],t.failureHandling=J.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,Xn.ensure)((0,Xn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[J.DiagnosticTag.Unnecessary,J.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,Xn.ensure)(e,"window"),o=(0,Xn.ensure)(i,"showMessage");o.messageActionItem={additionalPropertiesSupport:!0};let s=(0,Xn.ensure)(i,"showDocument");s.support=!0;let a=(0,Xn.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(n.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)Gn.func(r.preInitialize)&&r.preInitialize(this._capabilities,t);for(let r of this._features)r.initialize(this._capabilities,t)}async handleRegistrationRequest(e){let t=this.clientOptions.middleware?.handleRegisterCapability;return t?t(e,r=>this.doRegisterCapability(r)):this.doRegisterCapability(e)}async doRegisterCapability(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let r=this._dynamicFeatures.get(t.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let i=t.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let o={id:t.id,registerOptions:i};try{r.register(o)}catch(s){return Promise.reject(s)}}}async handleUnregistrationRequest(e){let t=this.clientOptions.middleware?.handleUnregisterCapability;return t?t(e,r=>this.doUnregisterCapability(r)):this.doUnregisterCapability(e)}async doUnregisterCapability(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let r=this._dynamicFeatures.get(t.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));r.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),i=new Map;Ke.workspace.textDocuments.forEach(s=>i.set(s.uri.toString(),s));let o=!1;if(t.documentChanges){for(let s of t.documentChanges)if(J.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let a=this._p2c.asUri(s.textDocument.uri).toString(),c=i.get(a);if(c&&c.version!==s.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):Gn.asPromise(Ke.workspace.applyEdit(r).then(s=>({applied:s})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof J.ResponseError){if(r.code===J.ErrorCodes.PendingResponseRejected||r.code===J.ErrorCodes.ConnectionInactive)return i;if(r.code===J.LSPErrorCodes.RequestCancelled||r.code===J.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw r.data!==void 0?new Xn.LSPCancellationError(r.data):new Ke.CancellationError}else if(r.code===J.LSPErrorCodes.ContentModified){if(n.RequestsToCancelOnContentModified.has(e.method)||n.CancellableResolveCalls.has(e.method))throw new Ke.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};$t.BaseLanguageClient=Ko;Ko.RequestsToCancelOnContentModified=new Set([J.SemanticTokensRequest.method,J.SemanticTokensRangeRequest.method,J.SemanticTokensDeltaRequest.method]);Ko.CancellableResolveCalls=new Set([J.CompletionResolveRequest.method,J.CodeLensResolveRequest.method,J.CodeActionResolveRequest.method,J.InlayHintResolveRequest.method,J.DocumentLinkResolveRequest.method,J.WorkspaceSymbolResolveRequest.method]);var Gh=class{error(e){(0,J.RAL)().console.error(e)}warn(e){(0,J.RAL)().console.warn(e)}info(e){(0,J.RAL)().console.info(e)}log(e){(0,J.RAL)().console.log(e)}};function yE(n,e,t,r,i){let o=new Gh,s=(0,J.createProtocolConnection)(n,e,o,i);return s.onError(c=>{t(c[0],c[1],c[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:s.sendRequest,onRequest:s.onRequest,hasPendingResponse:s.hasPendingResponse,sendNotification:s.sendNotification,onNotification:s.onNotification,onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(c,u,l)=>{let g={sendNotification:!1,traceFormat:J.TraceFormat.Text};return l===void 0?s.trace(c,u,g):(Gn.boolean(l),s.trace(c,u,l))},initialize:c=>s.sendRequest(J.InitializeRequest.type,c),shutdown:()=>s.sendRequest(J.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(J.ExitNotification.type),end:()=>s.end(),dispose:()=>s.dispose()}}var Qh;(function(n){function e(t){return[new mE.InlineCompletionItemFeature(t)]}n.createAll=e})(Qh||($t.ProposedFeatures=Qh={}))});var uD=$(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.terminate=void 0;var cD=require("child_process"),vE=require("path"),bE=process.platform==="win32",wE=process.platform==="darwin",CE=process.platform==="linux";function DE(n,e){if(bE)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),cD.execFileSync("taskkill",["/T","/F","/PID",n.pid.toString()],i),!0}catch{return!1}else if(CE||wE)try{var t=(0,vE.join)(__dirname,"terminateProcess.sh"),r=cD.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill("SIGKILL"),!0}Hc.terminate=DE});var Jh=$((MO,lD)=>{"use strict";lD.exports=we()});var Xo=$((jO,dD)=>{var SE=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};dD.exports=SE});var Uc=$(($O,fD)=>{var TE="2.0.0",_E=Number.MAX_SAFE_INTEGER||9007199254740991,RE=16,PE=250,EE=["major","premajor","minor","preminor","patch","prepatch","prerelease"];fD.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:RE,MAX_SAFE_BUILD_LENGTH:PE,MAX_SAFE_INTEGER:_E,RELEASE_TYPES:EE,SEMVER_SPEC_VERSION:TE,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Bc=$((Tr,hD)=>{var{MAX_SAFE_COMPONENT_LENGTH:Zh,MAX_SAFE_BUILD_LENGTH:xE,MAX_LENGTH:IE}=Uc(),kE=Xo();Tr=hD.exports={};var OE=Tr.re=[],qE=Tr.safeRe=[],oe=Tr.src=[],se=Tr.t={},NE=0,ep="[a-zA-Z0-9-]",LE=[["\\s",1],["\\d",IE],[ep,xE]],AE=n=>{for(let[e,t]of LE)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},Te=(n,e,t)=>{let r=AE(e),i=NE++;kE(n,i,e),se[n]=i,oe[i]=e,OE[i]=new RegExp(e,t?"g":void 0),qE[i]=new RegExp(r,t?"g":void 0)};Te("NUMERICIDENTIFIER","0|[1-9]\\d*");Te("NUMERICIDENTIFIERLOOSE","\\d+");Te("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${ep}*`);Te("MAINVERSION",`(${oe[se.NUMERICIDENTIFIER]})\\.(${oe[se.NUMERICIDENTIFIER]})\\.(${oe[se.NUMERICIDENTIFIER]})`);Te("MAINVERSIONLOOSE",`(${oe[se.NUMERICIDENTIFIERLOOSE]})\\.(${oe[se.NUMERICIDENTIFIERLOOSE]})\\.(${oe[se.NUMERICIDENTIFIERLOOSE]})`);Te("PRERELEASEIDENTIFIER",`(?:${oe[se.NUMERICIDENTIFIER]}|${oe[se.NONNUMERICIDENTIFIER]})`);Te("PRERELEASEIDENTIFIERLOOSE",`(?:${oe[se.NUMERICIDENTIFIERLOOSE]}|${oe[se.NONNUMERICIDENTIFIER]})`);Te("PRERELEASE",`(?:-(${oe[se.PRERELEASEIDENTIFIER]}(?:\\.${oe[se.PRERELEASEIDENTIFIER]})*))`);Te("PRERELEASELOOSE",`(?:-?(${oe[se.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${oe[se.PRERELEASEIDENTIFIERLOOSE]})*))`);Te("BUILDIDENTIFIER",`${ep}+`);Te("BUILD",`(?:\\+(${oe[se.BUILDIDENTIFIER]}(?:\\.${oe[se.BUILDIDENTIFIER]})*))`);Te("FULLPLAIN",`v?${oe[se.MAINVERSION]}${oe[se.PRERELEASE]}?${oe[se.BUILD]}?`);Te("FULL",`^${oe[se.FULLPLAIN]}$`);Te("LOOSEPLAIN",`[v=\\s]*${oe[se.MAINVERSIONLOOSE]}${oe[se.PRERELEASELOOSE]}?${oe[se.BUILD]}?`);Te("LOOSE",`^${oe[se.LOOSEPLAIN]}$`);Te("GTLT","((?:<|>)?=?)");Te("XRANGEIDENTIFIERLOOSE",`${oe[se.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Te("XRANGEIDENTIFIER",`${oe[se.NUMERICIDENTIFIER]}|x|X|\\*`);Te("XRANGEPLAIN",`[v=\\s]*(${oe[se.XRANGEIDENTIFIER]})(?:\\.(${oe[se.XRANGEIDENTIFIER]})(?:\\.(${oe[se.XRANGEIDENTIFIER]})(?:${oe[se.PRERELEASE]})?${oe[se.BUILD]}?)?)?`);Te("XRANGEPLAINLOOSE",`[v=\\s]*(${oe[se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${oe[se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${oe[se.XRANGEIDENTIFIERLOOSE]})(?:${oe[se.PRERELEASELOOSE]})?${oe[se.BUILD]}?)?)?`);Te("XRANGE",`^${oe[se.GTLT]}\\s*${oe[se.XRANGEPLAIN]}$`);Te("XRANGELOOSE",`^${oe[se.GTLT]}\\s*${oe[se.XRANGEPLAINLOOSE]}$`);Te("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Zh}})(?:\\.(\\d{1,${Zh}}))?(?:\\.(\\d{1,${Zh}}))?`);Te("COERCE",`${oe[se.COERCEPLAIN]}(?:$|[^\\d])`);Te("COERCEFULL",oe[se.COERCEPLAIN]+`(?:${oe[se.PRERELEASE]})?(?:${oe[se.BUILD]})?(?:$|[^\\d])`);Te("COERCERTL",oe[se.COERCE],!0);Te("COERCERTLFULL",oe[se.COERCEFULL],!0);Te("LONETILDE","(?:~>?)");Te("TILDETRIM",`(\\s*)${oe[se.LONETILDE]}\\s+`,!0);Tr.tildeTrimReplace="$1~";Te("TILDE",`^${oe[se.LONETILDE]}${oe[se.XRANGEPLAIN]}$`);Te("TILDELOOSE",`^${oe[se.LONETILDE]}${oe[se.XRANGEPLAINLOOSE]}$`);Te("LONECARET","(?:\\^)");Te("CARETTRIM",`(\\s*)${oe[se.LONECARET]}\\s+`,!0);Tr.caretTrimReplace="$1^";Te("CARET",`^${oe[se.LONECARET]}${oe[se.XRANGEPLAIN]}$`);Te("CARETLOOSE",`^${oe[se.LONECARET]}${oe[se.XRANGEPLAINLOOSE]}$`);Te("COMPARATORLOOSE",`^${oe[se.GTLT]}\\s*(${oe[se.LOOSEPLAIN]})$|^$`);Te("COMPARATOR",`^${oe[se.GTLT]}\\s*(${oe[se.FULLPLAIN]})$|^$`);Te("COMPARATORTRIM",`(\\s*)${oe[se.GTLT]}\\s*(${oe[se.LOOSEPLAIN]}|${oe[se.XRANGEPLAIN]})`,!0);Tr.comparatorTrimReplace="$1$2$3";Te("HYPHENRANGE",`^\\s*(${oe[se.XRANGEPLAIN]})\\s+-\\s+(${oe[se.XRANGEPLAIN]})\\s*$`);Te("HYPHENRANGELOOSE",`^\\s*(${oe[se.XRANGEPLAINLOOSE]})\\s+-\\s+(${oe[se.XRANGEPLAINLOOSE]})\\s*$`);Te("STAR","(<|>)?=?\\s*\\*");Te("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Te("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Vc=$((HO,pD)=>{var FE=Object.freeze({loose:!0}),ME=Object.freeze({}),jE=n=>n?typeof n!="object"?FE:n:ME;pD.exports=jE});var vD=$((UO,yD)=>{var gD=/^[0-9]+$/,mD=(n,e)=>{let t=gD.test(n),r=gD.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},$E=(n,e)=>mD(e,n);yD.exports={compareIdentifiers:mD,rcompareIdentifiers:$E}});var Go=$((BO,DD)=>{var Wc=Xo(),{MAX_LENGTH:bD,MAX_SAFE_INTEGER:zc}=Uc(),{safeRe:wD,t:CD}=Bc(),HE=Vc(),{compareIdentifiers:oo}=vD(),tp=class n{constructor(e,t){if(t=HE(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>bD)throw new TypeError(`version is longer than ${bD} characters`);Wc("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?wD[CD.LOOSE]:wD[CD.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>zc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>zc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>zc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<zc)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Wc("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),oo(this.major,e.major)||oo(this.minor,e.minor)||oo(this.patch,e.patch)}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(Wc("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return oo(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(Wc("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return oo(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];r===!1&&(o=[t]),oo(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};DD.exports=tp});var _D=$((VO,TD)=>{var SD=Go(),UE=(n,e,t=!1)=>{if(n instanceof SD)return n;try{return new SD(n,e)}catch(r){if(!t)return null;throw r}};TD.exports=UE});var PD=$((WO,RD)=>{var np=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};RD.exports=np});var mi=$((zO,xD)=>{var ED=Go(),BE=(n,e,t)=>new ED(n,t).compare(new ED(e,t));xD.exports=BE});var kD=$((KO,ID)=>{var VE=mi(),WE=(n,e,t)=>VE(n,e,t)===0;ID.exports=WE});var qD=$((XO,OD)=>{var zE=mi(),KE=(n,e,t)=>zE(n,e,t)!==0;OD.exports=KE});var LD=$((GO,ND)=>{var XE=mi(),GE=(n,e,t)=>XE(n,e,t)>0;ND.exports=GE});var FD=$((QO,AD)=>{var QE=mi(),YE=(n,e,t)=>QE(n,e,t)>=0;AD.exports=YE});var jD=$((YO,MD)=>{var JE=mi(),ZE=(n,e,t)=>JE(n,e,t)<0;MD.exports=ZE});var HD=$((JO,$D)=>{var ex=mi(),tx=(n,e,t)=>ex(n,e,t)<=0;$D.exports=tx});var BD=$((ZO,UD)=>{var nx=kD(),rx=qD(),ix=LD(),ox=FD(),sx=jD(),ax=HD(),cx=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return nx(n,t,r);case"!=":return rx(n,t,r);case">":return ix(n,t,r);case">=":return ox(n,t,r);case"<":return sx(n,t,r);case"<=":return ax(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};UD.exports=cx});var QD=$((eq,GD)=>{var Qo=Symbol("SemVer ANY"),op=class n{static get ANY(){return Qo}constructor(e,t){if(t=VD(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),ip("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Qo?this.value="":this.value=this.operator+this.semver.version,ip("comp",this)}parse(e){let t=this.options.loose?WD[zD.COMPARATORLOOSE]:WD[zD.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new KD(r[2],this.options.loose):this.semver=Qo}toString(){return this.value}test(e){if(ip("Comparator.test",e,this.options.loose),this.semver===Qo||e===Qo)return!0;if(typeof e=="string")try{e=new KD(e,this.options)}catch{return!1}return rp(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new XD(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new XD(this.value,t).test(e.semver):(t=VD(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||rp(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||rp(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};GD.exports=op;var VD=Vc(),{safeRe:WD,t:zD}=Bc(),rp=BD(),ip=Xo(),KD=Go(),XD=sp()});var sp=$((tq,eS)=>{var ux=/\s+/g,ap=class n{constructor(e,t){if(t=dx(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof cp)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(ux," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!JD(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&vx(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&mx)|(this.options.loose&&yx))+":"+e,i=YD.get(r);if(i)return i;let o=this.options.loose,s=o?yn[tn.HYPHENRANGELOOSE]:yn[tn.HYPHENRANGE];e=e.replace(s,Ex(this.options.includePrerelease)),ct("hyphen replace",e),e=e.replace(yn[tn.COMPARATORTRIM],hx),ct("comparator trim",e),e=e.replace(yn[tn.TILDETRIM],px),ct("tilde trim",e),e=e.replace(yn[tn.CARETTRIM],gx),ct("caret trim",e);let a=e.split(" ").map(g=>bx(g,this.options)).join(" ").split(/\s+/).map(g=>Px(g,this.options));o&&(a=a.filter(g=>(ct("loose invalid filter",g,this.options),!!g.match(yn[tn.COMPARATORLOOSE])))),ct("range list",a);let c=new Map,u=a.map(g=>new cp(g,this.options));for(let g of u){if(JD(g))return[g];c.set(g.value,g)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return YD.set(r,l),l}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>ZD(r,t)&&e.set.some(i=>ZD(i,t)&&r.every(o=>i.every(s=>o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new fx(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(xx(this.set[t],e,this.options))return!0;return!1}};eS.exports=ap;var lx=PD(),YD=new lx,dx=Vc(),cp=QD(),ct=Xo(),fx=Go(),{safeRe:yn,t:tn,comparatorTrimReplace:hx,tildeTrimReplace:px,caretTrimReplace:gx}=Bc(),{FLAG_INCLUDE_PRERELEASE:mx,FLAG_LOOSE:yx}=Uc(),JD=n=>n.value==="<0.0.0-0",vx=n=>n.value==="",ZD=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(o=>i.intersects(o,e)),i=r.pop();return t},bx=(n,e)=>(ct("comp",n,e),n=Dx(n,e),ct("caret",n),n=wx(n,e),ct("tildes",n),n=Tx(n,e),ct("xrange",n),n=Rx(n,e),ct("stars",n),n),nn=n=>!n||n.toLowerCase()==="x"||n==="*",wx=(n,e)=>n.trim().split(/\s+/).map(t=>Cx(t,e)).join(" "),Cx=(n,e)=>{let t=e.loose?yn[tn.TILDELOOSE]:yn[tn.TILDE];return n.replace(t,(r,i,o,s,a)=>{ct("tilde",n,r,i,o,s,a);let c;return nn(i)?c="":nn(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:nn(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(ct("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,ct("tilde return",c),c})},Dx=(n,e)=>n.trim().split(/\s+/).map(t=>Sx(t,e)).join(" "),Sx=(n,e)=>{ct("caret",n,e);let t=e.loose?yn[tn.CARETLOOSE]:yn[tn.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,o,s,a,c)=>{ct("caret",n,i,o,s,a,c);let u;return nn(o)?u="":nn(s)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:nn(a)?o==="0"?u=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(ct("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(ct("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),ct("caret return",u),u})},Tx=(n,e)=>(ct("replaceXRanges",n,e),n.split(/\s+/).map(t=>_x(t,e)).join(" ")),_x=(n,e)=>{n=n.trim();let t=e.loose?yn[tn.XRANGELOOSE]:yn[tn.XRANGE];return n.replace(t,(r,i,o,s,a,c)=>{ct("xRange",n,r,i,o,s,a,c);let u=nn(o),l=u||nn(s),g=l||nn(a),d=g;return i==="="&&d&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):l?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:g&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),ct("xRange return",r),r})},Rx=(n,e)=>(ct("replaceStars",n,e),n.trim().replace(yn[tn.STAR],"")),Px=(n,e)=>(ct("replaceGTE0",n,e),n.trim().replace(yn[e.includePrerelease?tn.GTE0PRE:tn.GTE0],"")),Ex=n=>(e,t,r,i,o,s,a,c,u,l,g,d)=>(nn(r)?t="":nn(i)?t=`>=${r}.0.0${n?"-0":""}`:nn(o)?t=`>=${r}.${i}.0${n?"-0":""}`:s?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,nn(u)?c="":nn(l)?c=`<${+u+1}.0.0-0`:nn(g)?c=`<${u}.${+l+1}.0-0`:d?c=`<=${u}.${l}.${g}-${d}`:n?c=`<${u}.${l}.${+g+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),xx=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(ct(n[r].semver),n[r].semver!==cp.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var nS=$((nq,tS)=>{var Ix=sp(),kx=(n,e,t)=>{try{e=new Ix(e,t)}catch{return!1}return e.test(n)};tS.exports=kx});var iS=$(On=>{"use strict";var Ox=On&&On.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),up=On&&On.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ox(e,n,t)};Object.defineProperty(On,"__esModule",{value:!0});On.DiagnosticPullMode=On.vsdiag=void 0;up(we(),On);up(Fe(),On);var rS=mf();Object.defineProperty(On,"vsdiag",{enumerable:!0,get:function(){return rS.vsdiag}});Object.defineProperty(On,"DiagnosticPullMode",{enumerable:!0,get:function(){return rS.DiagnosticPullMode}});up(Yh(),On)});var cS=$(vn=>{"use strict";var qx=vn&&vn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),aS=vn&&vn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&qx(e,n,t)};Object.defineProperty(vn,"__esModule",{value:!0});vn.SettingMonitor=vn.LanguageClient=vn.TransportKind=void 0;var _r=require("child_process"),lp=require("fs"),dp=require("path"),Qr=require("vscode"),ht=Nn(),oS=Yh(),Nx=uD(),mt=Jh(),Lx=_D(),Ax=nS();aS(Jh(),vn);aS(iS(),vn);var sS="^1.82.0",yt;(function(n){n[n.stdio=0]="stdio",n[n.ipc=1]="ipc",n[n.pipe=2]="pipe",n[n.socket=3]="socket"})(yt||(vn.TransportKind=yt={}));var Gr;(function(n){function e(t){let r=t;return r&&r.kind===yt.socket&&ht.number(r.port)}n.isSocket=e})(Gr||(Gr={}));var fp;(function(n){function e(t){return ht.string(t.command)}n.is=e})(fp||(fp={}));var hp;(function(n){function e(t){return ht.string(t.module)}n.is=e})(hp||(hp={}));var pp;(function(n){function e(t){let r=t;return r&&r.writer!==void 0&&r.reader!==void 0}n.is=e})(pp||(pp={}));var gp;(function(n){function e(t){let r=t;return r&&r.process!==void 0&&typeof r.detached=="boolean"}n.is=e})(gp||(gp={}));var mp=class extends oS.BaseLanguageClient{constructor(e,t,r,i,o){let s,a,c,u,l;ht.string(t)?(s=e,a=t,c=r,u=i,l=!!o):(s=e.toLowerCase(),a=e,c=t,u=r,l=i),l===void 0&&(l=!1),super(s,a,u),this._serverOptions=c,this._forceDebug=l,this._isInDebugMode=l;try{this.checkVersion()}catch(g){throw ht.string(g.message)&&this.outputChannel.appendLine(g.message),g}}checkVersion(){let e=Lx(Qr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Qr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!Ax(e,sS))throw new Error(`The language client requires VS Code version ${sS} but received version ${Qr.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,Nx.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(l,g){if(!l&&!g)return;let d=Object.create(null);return Object.keys(process.env).forEach(p=>d[p]=process.env[p]),g&&(d.ELECTRON_RUN_AS_NODE="1",d.ELECTRON_NO_ASAR="1"),l&&Object.keys(l).forEach(p=>d[p]=l[p]),d}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let l=process.execArgv;return l?l.some(g=>r.some(d=>g.startsWith(d))||i.some(d=>g===d)):!1}function s(l){if(l.stdin===null||l.stdout===null||l.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(ht.func(a))return a().then(l=>{if(oS.MessageTransports.is(l))return this._isDetached=!!l.detached,l;if(pp.is(l))return this._isDetached=!!l.detached,{reader:new mt.StreamMessageReader(l.reader),writer:new mt.StreamMessageWriter(l.writer)};{let g;return gp.is(l)?(g=l.process,this._isDetached=l.detached):(g=l,this._isDetached=!1),g.stderr.on("data",d=>this.outputChannel.append(ht.string(d)?d:d.toString(e))),{reader:new mt.StreamMessageReader(g.stdout),writer:new mt.StreamMessageWriter(g.stdin)}}});let c,u=a;return u.run||u.debug?this._forceDebug||o()?(c=u.debug,this._isInDebugMode=!0):(c=u.run,this._isInDebugMode=!1):c=a,this._getServerWorkingDir(c.options).then(l=>{if(hp.is(c)&&c.module){let g=c,d=g.transport||yt.stdio;if(g.runtime){let p=[],h=g.options??Object.create(null);h.execArgv&&h.execArgv.forEach(E=>p.push(E)),p.push(g.module),g.args&&g.args.forEach(E=>p.push(E));let T=Object.create(null);T.cwd=l,T.env=t(h.env,!1);let I=this._getRuntimePath(g.runtime,l),O;if(d===yt.ipc?(T.stdio=[null,null,null,"ipc"],p.push("--node-ipc")):d===yt.stdio?p.push("--stdio"):d===yt.pipe?(O=(0,mt.generateRandomPipeName)(),p.push(`--pipe=${O}`)):Gr.isSocket(d)&&p.push(`--socket=${d.port}`),p.push(`--clientProcessId=${process.pid.toString()}`),d===yt.ipc||d===yt.stdio){let E=_r.spawn(I,p,T);return!E||!E.pid?so(E,`Launching server using runtime ${I} failed.`):(this._serverProcess=E,E.stderr.on("data",C=>this.outputChannel.append(ht.string(C)?C:C.toString(e))),d===yt.ipc?(E.stdout.on("data",C=>this.outputChannel.append(ht.string(C)?C:C.toString(e))),Promise.resolve({reader:new mt.IPCMessageReader(E),writer:new mt.IPCMessageWriter(E)})):Promise.resolve({reader:new mt.StreamMessageReader(E.stdout),writer:new mt.StreamMessageWriter(E.stdin)}))}else{if(d===yt.pipe)return(0,mt.createClientPipeTransport)(O).then(E=>{let C=_r.spawn(I,p,T);return!C||!C.pid?so(C,`Launching server using runtime ${I} failed.`):(this._serverProcess=C,C.stderr.on("data",y=>this.outputChannel.append(ht.string(y)?y:y.toString(e))),C.stdout.on("data",y=>this.outputChannel.append(ht.string(y)?y:y.toString(e))),E.onConnected().then(y=>({reader:y[0],writer:y[1]})))});if(Gr.isSocket(d))return(0,mt.createClientSocketTransport)(d.port).then(E=>{let C=_r.spawn(I,p,T);return!C||!C.pid?so(C,`Launching server using runtime ${I} failed.`):(this._serverProcess=C,C.stderr.on("data",y=>this.outputChannel.append(ht.string(y)?y:y.toString(e))),C.stdout.on("data",y=>this.outputChannel.append(ht.string(y)?y:y.toString(e))),E.onConnected().then(y=>({reader:y[0],writer:y[1]})))})}}else{let p;return new Promise((h,T)=>{let I=(g.args&&g.args.slice())??[];d===yt.ipc?I.push("--node-ipc"):d===yt.stdio?I.push("--stdio"):d===yt.pipe?(p=(0,mt.generateRandomPipeName)(),I.push(`--pipe=${p}`)):Gr.isSocket(d)&&I.push(`--socket=${d.port}`),I.push(`--clientProcessId=${process.pid.toString()}`);let O=g.options??Object.create(null);if(O.env=t(O.env,!0),O.execArgv=O.execArgv||[],O.cwd=l,O.silent=!0,d===yt.ipc||d===yt.stdio){let E=_r.fork(g.module,I||[],O);s(E),this._serverProcess=E,E.stderr.on("data",C=>this.outputChannel.append(ht.string(C)?C:C.toString(e))),d===yt.ipc?(E.stdout.on("data",C=>this.outputChannel.append(ht.string(C)?C:C.toString(e))),h({reader:new mt.IPCMessageReader(this._serverProcess),writer:new mt.IPCMessageWriter(this._serverProcess)})):h({reader:new mt.StreamMessageReader(E.stdout),writer:new mt.StreamMessageWriter(E.stdin)})}else d===yt.pipe?(0,mt.createClientPipeTransport)(p).then(E=>{let C=_r.fork(g.module,I||[],O);s(C),this._serverProcess=C,C.stderr.on("data",y=>this.outputChannel.append(ht.string(y)?y:y.toString(e))),C.stdout.on("data",y=>this.outputChannel.append(ht.string(y)?y:y.toString(e))),E.onConnected().then(y=>{h({reader:y[0],writer:y[1]})},T)},T):Gr.isSocket(d)&&(0,mt.createClientSocketTransport)(d.port).then(E=>{let C=_r.fork(g.module,I||[],O);s(C),this._serverProcess=C,C.stderr.on("data",y=>this.outputChannel.append(ht.string(y)?y:y.toString(e))),C.stdout.on("data",y=>this.outputChannel.append(ht.string(y)?y:y.toString(e))),E.onConnected().then(y=>{h({reader:y[0],writer:y[1]})},T)},T)})}}else if(fp.is(c)&&c.command){let g=c,d=c.args!==void 0?c.args.slice(0):[],p,h=c.transport;if(h===yt.stdio)d.push("--stdio");else if(h===yt.pipe)p=(0,mt.generateRandomPipeName)(),d.push(`--pipe=${p}`);else if(Gr.isSocket(h))d.push(`--socket=${h.port}`);else if(h===yt.ipc)throw new Error("Transport kind ipc is not support for command executable");let T=Object.assign({},g.options);if(T.cwd=T.cwd||l,h===void 0||h===yt.stdio){let I=_r.spawn(g.command,d,T);return!I||!I.pid?so(I,`Launching server using command ${g.command} failed.`):(I.stderr.on("data",O=>this.outputChannel.append(ht.string(O)?O:O.toString(e))),this._serverProcess=I,this._isDetached=!!T.detached,Promise.resolve({reader:new mt.StreamMessageReader(I.stdout),writer:new mt.StreamMessageWriter(I.stdin)}))}else{if(h===yt.pipe)return(0,mt.createClientPipeTransport)(p).then(I=>{let O=_r.spawn(g.command,d,T);return!O||!O.pid?so(O,`Launching server using command ${g.command} failed.`):(this._serverProcess=O,this._isDetached=!!T.detached,O.stderr.on("data",E=>this.outputChannel.append(ht.string(E)?E:E.toString(e))),O.stdout.on("data",E=>this.outputChannel.append(ht.string(E)?E:E.toString(e))),I.onConnected().then(E=>({reader:E[0],writer:E[1]})))});if(Gr.isSocket(h))return(0,mt.createClientSocketTransport)(h.port).then(I=>{let O=_r.spawn(g.command,d,T);return!O||!O.pid?so(O,`Launching server using command ${g.command} failed.`):(this._serverProcess=O,this._isDetached=!!T.detached,O.stderr.on("data",E=>this.outputChannel.append(ht.string(E)?E:E.toString(e))),O.stdout.on("data",E=>this.outputChannel.append(ht.string(E)?E:E.toString(e))),I.onConnected().then(E=>({reader:E[0],writer:E[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))}).finally(()=>{this._serverProcess!==void 0&&this._serverProcess.on("exit",(l,g)=>{l!==null&&this.error(`Server process exited with code ${l}.`,void 0,!1),g!==null&&this.error(`Server process exited with signal ${g}.`,void 0,!1)})})}_getRuntimePath(e,t){if(dp.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=dp.join(r,e);if(lp.existsSync(i))return i}if(t!==void 0){let i=dp.join(t,e);if(lp.existsSync(i))return i}return e}_mainGetRootPath(){let e=Qr.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=>{lp.lstat(t,(i,o)=>{r(!i&&o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};vn.LanguageClient=mp;var yp=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return Qr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Qr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?Qr.workspace.getConfiguration(t).get(r,!1):Qr.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch(o=>this._client.error("Start failed after configuration change",o,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(o=>this._client.error("Stop failed after configuration change",o,"force"))}};vn.SettingMonitor=yp;function so(n,e){return n===null?Promise.reject(e):new Promise((t,r)=>{n.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var lS=$((oq,uS)=>{"use strict";uS.exports=cS()});var Kx={};XS(Kx,{activate:()=>zx});module.exports=GS(Kx);var Rt=Be(require("vscode"));var Jr=Be(require("vscode")),Gc="AHK++",Qe=class{static statusBarItem;static getConfig(e){return Jr.workspace.getConfiguration("ahk++").get(e)??Jr.workspace.getConfiguration(Gc).get(e)}static updateStatusBarItems(e){this.statusBarItem||(this.statusBarItem=Jr.window.createStatusBarItem(Jr.StatusBarAlignment.Left)),this.statusBarItem.text=e,this.statusBarItem.show()}static hide(){this.statusBarItem.hide()}};var os=Be(require("vscode"));var kp=Be(require("vscode"));var er=class{static purify(e){return e?e.replace(/;.+/,"").replace(/".*?"/g,'""').replace(/{.*}/g,"").replace(/ +/g," ").replace(/\bgui\b.*/gi,"").replace(/\b(msgbox)\b.+?%/gi,"$1"):""}static join(e,t){if(!(!e||!t))if(Array.isArray(t))for(let r of t)e.push(r);else e.push(t)}static matchAll(e,t){if(!e.global)throw new Error("Only support global regex!");let r=[],i;for(;i=e.exec(t);)r.push(i);return r}},Dn=()=>kp.window.activeTextEditor?.document.languageId==="ahk",rs=n=>n==="ahk"||n==="ahk2";var is=class{constructor(e,t,r,i){this.name=e;this.document=t;this.line=r;this.character=i}},Ci=class{constructor(e,t,r,i){this.name=e;this.document=t;this.line=r;this.character=i}};var Di=class{constructor(e,t,r,i,o,s,a){this.origin=e;this.name=t;this.uriString=r;this.line=i;this.character=o;this.withQuote=s;this.comment=a;this.buildParams(),this.variables=[]}params;variables;full;endLine;buildParams(){let e=/\s*\((.+?)\)\s*$/;if(this.origin!==this.name){let t=this.origin.match(e);t?(this.params=t[1].split(",").filter(r=>r.trim()).map(r=>{let i=/[^:=* \t]+/;return r.match(i)?.[0]??r}),this.full=this.origin.replace(t[1],this.params.join(", "))):(this.params=[],this.full=this.origin)}}pushVariable(e){Array.isArray(e)||(e=[e]);e:for(let t of e){for(let r of this.variables)if(r.name===t.name)continue e;for(let r of this.params)if(r===t.name)continue e;this.variables.push(t)}}};var Op=require("fs"),qp=require("path");async function Np(n,e=[],t,r){if(!n)return[];let i=YS(t);r?.(`folder: ${i.folder.map(s=>s.toString()).join(`
`)}`),r?.(`file: ${i.file.map(s=>s.toString()).join(`
`)}`);let o=async s=>{let a=await Op.promises.opendir(s);for await(let c of a){let u=(0,qp.resolve)(s,c.name);r?.("Checking "+u),c.isDirectory()&&!i.folder.some(l=>l.test(u))?await o(u):c.isFile()&&c.name.match(/\.(ahk|ah1|ahk1|ext)$/i)&&!i.file.some(l=>l.test(u))?(r?.("Adding "+u),e.push(u)):r?.("Ignoring "+u)}return e};return await o(n)}function YS(n=[]){let e=[],t=[];for(let r of n)try{(/[\\/]$/.test(r)?t:e).push(JS(r))}catch{console.log(`[Error] Invalid glob pattern: ${r}`)}return{file:e,folder:t}}function JS(n){let e="",t=!1,r,i;(r=n.startsWith("!"))&&(n=n.slice(1));for(let o=0,s,a=n.length;o<a;o++)switch(i=n[o]){case"/":case"\\":e+="[\\x5c/]";break;case"$":case"^":case"+":case".":case"(":case")":case"=":case"|":e+="\\"+i;break;case"?":e+=".";break;case"!":o?e.endsWith("[")?e+="^":e+="\\"+i:r=!0;break;case"{":t=!0,e+="(";break;case"}":t=!1,e+=")";break;case",":e+=t?"|":",";break;case"*":for(s=o;n[o+1]==="*";)o++;o>s&&/^[\x5c/]?\*+[\x5c/]?$/.test(n.substring(s-1,o+2))?(e+="((?:[^\\x5c/]*(?:[\\x5c/]|$))*)",o++):e+="([^\\x5c/]*)";break;default:e+=i}return/^([a-zA-Z]:|\*\*)/.test(n)?e="^"+e:/[\\/]/.test(n[0])||(e="[\\x5c/]"+e),/[\\/]$/.test(n)||(e+="$"),r&&(e=e.startsWith("^")?`^(?!${e})`:`(?!${e})`),new RegExp(e,"i")}var Lp=Be(require("vscode")),cn=class n{static outputChannel;static debug(e){n.log(e,!1)}static log(e,t=!0){e instanceof Error&&(console.trace(e),e=e.message),this.outputChannel||(this.outputChannel=Lp.window.createOutputChannel("AHK++ (v1)")),t&&this.outputChannel.show(t),this.outputChannel.appendLine(`${new Date().toISOString()} ${e}`)}};var ZS=/ *\/\*/,eT=/ *\*\//,un=new Map,Ap=()=>{cn.debug("Clearing cache"),un.clear()},it=class n{static async buildByPath(e){let t=Qe.getConfig("exclude"),r=await Np(e,[],t,cn.debug);cn.debug(`Building ${r.length} files`);for(let i of r){cn.debug(`Building ${i}`);let o=await os.workspace.openTextDocument(os.Uri.file(i));this.buildScript(o)}}static async buildScript(e,t={}){if(t.usingCache&&un.get(e.uri.path))return un.get(e.uri.path);let r=t.maximumParseLength??Qe.getConfig("v1.intellisense.maximumParseLength"),i=r>=0?Math.min(e.lineCount,r):e.lineCount,o=[],s=[],a=[],c=[],u=[],l,g=0,d=!1;for(let h=0;h<i;h++){let T=e.lineAt(h).text;if(T.match(ZS)&&(d=!0),T.match(eT)&&(d=!1),d)continue;let I=n.detectMethodByLine(e,h);if(I)if(I instanceof Di){o.push(I),s.push(new Ci(I.name,e,h,I.character)),l=I,I.withQuote&&g++;continue}else er.join(s,I);let O=n.getLabelByLine(e,h);if(O){a.push(O);continue}let E=n.getBlockByLine(e,h);E&&u.push(E),T.includes("{")&&g++,T.includes("}")&&(g--,l&&(l.endLine=h));let C=n.detectVariableByLine(e,h);C&&(g===0||!l?this.joinVars(c,C):l.pushVariable(C))}let p={methods:o,labels:a,refs:s,variables:c,blocks:u};return un.set(e.uri.path,p),p}static async getMethodByName(e,t){t=t.toLowerCase();for(let r of un.get(e.uri.path).methods)if(r.name.toLowerCase()===t)return r;for(let r of un.keys())for(let i of un.get(r).methods)if(i.name.toLowerCase()===t)return i}static async getAllMethod(){let e=[];for(let t of un.keys())for(let r of un.get(t).methods)e.push(r);return e}static async getLabelByName(e,t){t=t.toLowerCase();for(let r of un.get(e.uri.path).labels)if(r.name.toLowerCase()===t)return r;for(let r of un.keys())for(let i of un.get(r).labels)if(i.name.toLowerCase()===t)return i}static getAllRefByName(e){let t=[];e=e.toLowerCase();for(let r of un.keys()){let i=un.get(r);for(let o of i.refs)o.name.toLowerCase()===e&&t.push(o)}return t}static getBlockByLine(e,t){let{text:r}=e.lineAt(t),i=r.match(/;;(.+)/);if(i)return{document:e,line:t,name:i[1],character:r.indexOf(i[1])}}static getLabelByLine(e,t){let r=er.purify(e.lineAt(t).text),i=/^[ \t]*([\u4e00-\u9fa5_a-zA-Z0-9]+):{1}(?!(:|=))/.exec(r);if(i){let o=i[1];return o.toLowerCase()==="case"||o.toLowerCase()==="default"?void 0:new is(i[1],e,t,r.indexOf(o))}}static varDefPattern=/[ \t]*(\w+?)\s*([+\-*/.:])?(?<![=!])=(?![=!]).+/;static varCommandPattern=/(\w+)[ \t,]+/g;static keywords=["and","or","new","extends","if","loop"];static detectVariableByLine(e,t){let r=er.purify(e.lineAt(t).text),i=r.match(n.varDefPattern);if(i){let o=i[1];return{line:t,document:e,isGlobal:!0,method:null,name:o,character:r.indexOf(o)}}else{let o=[],s=er.matchAll(n.varCommandPattern,r.replace(/\(.+?\)/g,""));for(let a=0;a<s.length;a++){if(a===0)continue;let c=s[a][1];this.keywords.includes(c.toLowerCase())||o.push({line:t,document:e,isGlobal:!0,method:null,name:c,character:r.indexOf(s[a][0])})}return o}}static detectMethodByLine(e,t,r){r??=e.lineAt(t).text;let i=er.purify(r),o=/\s*(([\u4e00-\u9fa5_a-zA-Z0-9]+)(?<!if|while)\(.*?\))\s*(\{)?\s*/i,s=i.match(o);if(!s)return;let a=s[2],c=r.indexOf(a);if(i.length!==s[0].length){let g=[new Ci(a,e,t,c)],d=this.detectMethodByLine(e,t,r.replace(new RegExp(a+"\\s*\\("),""));return er.join(g,d),g}let u=s[1];if(s[3])return new Di(u,a,e.uri.toString(),t,c,!0,n.getRemarkByLine(e,t-1));for(let g=t+1;g<e.lineCount;g++){let d=er.purify(e.lineAt(g).text);if(d.trim())return d.match(/^\s*{/)?new Di(u,a,e.uri.toString(),t,c,!1,n.getRemarkByLine(e,t-1)):new Ci(a,e,t,c)}}static getRemarkByLine(e,t){if(t>=0){let{text:r}=e.lineAt(t),i=r.match(/^\s*;\s*(.+)/);if(i)return i[1]}return null}static joinVars(e,t){if(!(!e||!t)){Array.isArray(t)||(t=[t]);e:for(let r of t){for(let i of e)if(i.name===r.name)continue e;e.push(r)}}}};var jp=require("path"),At=Be(require("vscode"));var xr=Be(require("fs")),Qc=Be(require("path")),hr=Be(require("vscode"));var Ti=class{static storagePath;static init(e){this.storagePath=e.globalStoragePath,hr.workspace.onDidSaveTextDocument(t=>{it.buildScript(t)})}static check(e){xr.existsSync(e)||xr.mkdirSync(e)}static show(e){if(this.storagePath||hr.window.showErrorMessage("FileManager is not init!"),!e)return;let t=`${this.storagePath}/${e}`;this.check(this.storagePath),this.check(Qc.resolve(t,".."));let r=hr.Uri.file(t);return new Promise(i=>{hr.workspace.openTextDocument(r).then(async o=>{i(await hr.window.showTextDocument(o))})})}static record(e,t,r){if(this.storagePath||hr.window.showErrorMessage("FileManager is not init!"),!!e)return new Promise(i=>{let o=`${this.storagePath}/${e}`;this.check(this.storagePath),this.check(Qc.resolve(o,"..")),r===0?xr.writeFileSync(o,`${t}`,{encoding:"utf8"}):xr.appendFileSync(o,`${t}`,{encoding:"utf8"}),i(o)})}};var Fp=Be(require("child_process"));var Mp=(n,e={})=>new Promise((t,r)=>{Fp.exec(n,e,i=>{if(i){cn.log(i.message),r(i);return}t(!0)})});var $p=Be(require("fs"));var tT=(n,e,t,r,i,o)=>{if(!n||!e)return"";let s=e.lastIndexOf("."),a=e.substring(0,s<0?e.length:s)+".exe",c=t?"/gui":"",u=r?`/icon "${r}"`:"",l=i?`/bin "${i}"`:"";return`"${n}" ${c} /in "${e}" /out "${a}" ${u} ${l} ${o?"/mpress 1":""}`},pr=class{static async startDebugger(e){let t=e?At.Uri.file(e):At.window.activeTextEditor.document.uri;e=e||await this.getPathByActive();let r=!!At.extensions.getExtension("zero-plusplus.vscode-autohotkey-debug"),i=Dn()?"v1.file.interpreterPath":"v2.file.interpreterPath";At.debug.startDebugging(At.workspace.getWorkspaceFolder(t),{type:r?"autohotkey":"ahk",request:"launch",name:"AutoHotkey Debugger",runtime:Qe.getConfig(i),program:e})}static async compile(e){let t=At.window.activeTextEditor.document.uri.fsPath;if(!$p.existsSync(t)){At.window.showErrorMessage("Cannot compile new files.");return}this.checkAndSaveActive();let r=Qe.getConfig("compiler.compilerPath"),i=Qe.getConfig("compiler.compileIcon"),o=Qe.getConfig(Dn()?"v1.file.compileBaseFile":"v2.file.compileBaseFile"),s=Qe.getConfig("compiler.useMpress"),a=tT(r,t,e,i,o,s);if(!a){At.window.showErrorMessage("Cannot build compile command.");return}await Mp(a,{cwd:`${(0,jp.resolve)(t,"..")}`})&&!e&&At.window.showInformationMessage("Compile success!")}static async getPathByActive(){let e=At.window.activeTextEditor.document;return e.isUntitled?await this.createTemplate(e.getText()):e.fileName}static async createTemplate(e){let t=`temp-${this.getNowDate()}.ahk`;return await Ti.record(t,e,0)}static checkAndSaveActive(){At.window.activeTextEditor.document.isUntitled||At.commands.executeCommand("workbench.action.files.save")}static getNowDate(){let e=new Date,t=e.getMonth()+1,r=e.getDate();return t<=9&&(t="0"+t),r<=9&&(r="0"+r),e.getFullYear()+"-"+t+"-"+r+"-"+this.pad(e.getHours(),2)+"-"+this.pad(e.getMinutes(),2)+"-"+this.pad(e.getSeconds(),2)}static pad(e,t){let r=e+"";return r.length>=t?e:new Array(t-r.length+1).join("0")+e}};var ln=Be(lo());var Im=require("events");var Sm=require("events"),Tm=Be(require("net")),_m=Be(Dm());var Ns=class extends Sm.EventEmitter{constructor(t){super();this.port=t}proxyServer;ahkConnection;start(){let r;return this.proxyServer=new Tm.Server().listen(this.port).on("connection",i=>{this.ahkConnection=i,i.on("data",o=>{r=r?Buffer.concat([r,o]):o,r[r.length-1]===0&&(this.process(r.toString()),r=null)})}).on("error",i=>{throw cn.log(i.message),i}),this}shutdown(){this.ahkConnection&&this.ahkConnection.end(),this.proxyServer&&this.proxyServer.close()}write(t){this.ahkConnection&&this.ahkConnection.write(t)}header='<?xml version="1.0" encoding="UTF-8"?>';parser=new _m.Parser({attrkey:"attr",charsAsChildren:!1,charkey:"content",explicitCharkey:!0,explicitArray:!1});process(t){t=t.substring(t.indexOf("<?xml")),t.indexOf(this.header)===-1&&(t=this.header+t);for(let r of t.split(this.header)){if(!r?.trim())continue;let i=this.header+r;this.parser.parseStringPromise(i).then(o=>{for(let s in o)Object.prototype.hasOwnProperty.call(o,s)&&this.emit(s,o[s])}).catch(o=>{cn.log(o)})}}};var Rm=require("path"),As=Be(lo()),Fs=require("fs"),Ls=class{_breakPoints=new Map;loopPoints(e){for(let t of this._breakPoints.keys())for(let r of this._breakPoints.get(t))e(r)}get(e){return this._breakPoints.get(e)}buildBreakPoint(e,t,r){if(!(0,Fs.existsSync)(e))return[];let i=(0,Fs.readFileSync)(e).toString().split(`
`),o=t.map(s=>{let a=new As.Breakpoint(!1,s.line,s.column,new As.Source((0,Rm.basename)(e),e)),c=i[s.line];return c&&c.trim().charAt(0)!==";"&&(a.verified=!0),r(a),a});return this._breakPoints.set(e,o),o}};var Ms=class{constructor(e){this.debugServer=e}transId=1;commandCallback={};sendCommand(e,t){if(this.debugServer)return this.transId++,e+=` -i ${this.transId}`,typeof t=="string"&&(e+=` -- ${Buffer.from(t).toString("base64")}`),e+="\0",this.debugServer.write(`${e}`),new Promise(r=>{this.commandCallback[""+this.transId]=i=>{r(i)}})}callback(e,t){let r=this.commandCallback[e];r&&r(t),this.commandCallback[e]=null}};var $s=Be(lo()),Pm=require("path"),js=class{handle(e,t){return t?(Array.isArray(t.stack)?t.stack:Array.of(t.stack)).map((i,o)=>new $s.StackFrame(o,i.attr.where,new $s.Source((0,Pm.basename)(i.attr.filename),i.attr.filename),parseInt(i.attr.lineno))):[]}};var ti=Be(lo());var nr=class{static toArray(e){return e?Array.isArray(e)?e:[e]:[]}static atob(e){return e?Buffer.from(e,"base64").toString():null}static btoa(e){return e?Buffer.from(e).toString("base64"):null}};var Hs=class{variableHandles=new ti.Handles;variableMap=new Map;frameId;getScopeByRef(e){let t=this.variableHandles.get(e);return typeof t=="string"?t==="Local"?0:1:t.scope}getVarByRef(e){return this.variableHandles.get(e)}getVarByName(e){return this.variableMap.get(e)}obtainValue(e){let t,r=!1,i=e.match(/^(?:()|"(.*)"|(true|false)|([+-]?\d+)|([+-]?\d+\.[+-]?\d+)|([\w\d]+))$/is);if(!i)return Promise.reject(new Error(`"${e}" is invalid value.`));let[,o,s,a,c,u,l]=i;return o!==void 0?(t="string",e=""):s!==void 0?(t="string",e=s):a!==void 0?(t="string",e=a.match(/true/i)?"1":"0"):c!==void 0?(t="integer",e=c):u!==void 0?(t="float",e=u):(r=!0,e=l),Promise.resolve({type:t,value:e,isVariable:r})}getArrayValue(e,t,r){let i=this.getVarByRef(e);return Array.isArray(i?.value)?i.value.slice(t,t+r).map((o,s)=>new ti.Variable(`[${t+s+1}]`,o)):[]}scopes(e){return this.frameId=e,[new ti.Scope("Local",this.variableHandles.create("Local"),!1),new ti.Scope("Global",this.variableHandles.create("Global"),!1)]}getFrameId(){return this.frameId}parsePropertyget(e,t){return this.parse(e.property.content?e:e.property,t)}parse(e,t){return nr.toArray(e.property).map(r=>{try{let{attr:i}=r,o,s;if(this.likeArray(r)){let c=this.getLikeArrayLength(r);o=100<c?c:void 0,s=100<c?1:void 0}let a={scope:t,frameId:t===1?-1:this.frameId,name:r.attr.fullname,value:this.buildVariableValue(r)};return this.variableMap.set(i.name,a),{type:i.type,name:i.name,value:this.formatPropertyValue(r),indexedVariables:o,namedVariables:s,variablesReference:i.type!=="object"?0:this.variableHandles.create(a)}}catch(i){console.log(i);return}})}buildVariableValue(e){let{attr:t,content:r=""}=e;if(["string","integer","float"].includes(t.type)){let i=nr.atob(r);return t.type==="integer"||t.type==="float"?i:`"${i}"`}else if(t.type==="object"){let i=nr.toArray(e.property);return this.likeArray(e)&&t.classname==="Object"?i.map(o=>nr.atob(o.content)):i.reduce((o,s)=>(o[s.attr.fullname]=nr.atob(s.content),o),{})}return`${t.classname}`}formatPropertyValue(e){let{attr:t,content:r=""}=e;if(["string","integer","float"].includes(t.type)){let i=Buffer.from(r,t.encoding).toString();return t.type==="integer"||t.type==="float"?i:`"${i}"`}else if(t.type==="object"&&this.likeArray(e)){let i=t.classname==="Object"?"Array":t.classname,o=this.getLikeArrayLength(e);return`${i}(${o})`}return`${t.classname}`}getLikeArrayLength(e){let t=nr.toArray(e.property);if(t.length===0)return 0;for(let r=t.length-1;r>0;r--){let i=t[r].attr.name.match(/\[([0-9]+)\]/);if(i)return parseInt(i[1])}return 0}likeArray(e){return nr.toArray(e.property).some(t=>t.attr.name.match(/\[[0-9]+\]/))}};var ju=Be(xm()),km=require("child_process"),Om=require("path"),qm=require("fs");var Vs=class extends Im.EventEmitter{debugServer;breakPointHandler;commandHandler;stackHandler;variableHandler;startArgs;constructor(){super()}async start(e){let t=Dn()?"v1.file.interpreterPath":"v2.file.interpreterPath",r=e.runtime??Qe.getConfig(t),i=e.dbgpSettings??{},{maxChildren:o,maxData:s}={maxChildren:300,maxData:131072,...i};this.breakPointHandler=new Ls,this.stackHandler=new js,this.variableHandler=new Hs,this.startArgs=e;let a=await(0,ju.default)({port:ju.default.makeRange(9e3,9100)});this.debugServer=new Ns(a),this.commandHandler=new Ms(this.debugServer),this.debugServer.start().on("init",()=>{this.breakPointHandler.loopPoints(l=>{this.setBreakPonit(l)}),this.sendCommand(`feature_set -n max_children -v ${o}`),this.sendCommand(`feature_set -n max_data -v ${s}`),this.sendCommand("feature_set -n max_depth -v 2"),this.sendCommand("stdout -c 1"),this.sendCommand("stderr -c 1"),this.sendCommand("run")}).on("stream",l=>{this.emit("output",Buffer.from(l.content,"base64").toString())}).on("response",l=>{if(l.attr.command)switch(this.commandHandler.callback(l.attr.transaction_id,l),l.attr.command){case"run":case"step_into":case"step_over":case"step_out":this.processRunResponse(l);break;case"stop":this.end();break}}),e.program||(e.program=await pr.getPathByActive());let c=yT(e.program);if(!(0,qm.existsSync)(r)){cn.log(`AutoHotkey execute bin not found: ${r}`),this.end();return}(0,km.spawn)(r,["/ErrorStdOut",`/debug=localhost:${a}`,c],{cwd:`${(0,Om.resolve)(e.program,"..")}`}).stderr.on("data",l=>{this.emit("output",l.toString("utf8")),this.end()})}async restart(){this.sendCommand("stop"),this.end(),pr.startDebugger(this.startArgs.program)}sendCommand(e,t){return this.commandHandler?this.commandHandler.sendCommand(e,t):null}stop(){this.sendCommand("stop"),this.debugServer.shutdown()}end(){this.emit("end"),this.debugServer.shutdown()}scopes(e){return this.variableHandler.scopes(e)}async listVariables(e){if(e.filter==="named")return[];if(e.filter==="indexed")return this.variableHandler.getArrayValue(e.variablesReference,e.start,e.count);let t=this.variableHandler.getScopeByRef(e.variablesReference),r=this.variableHandler.getFrameId(),i=this.variableHandler.getVarByRef(e.variablesReference)?.name;if(i)return this.getVariable(r,t,i);let o=await this.sendCommand(`context_get -d ${r} -c ${t}`);return this.variableHandler.parse(o,t)}async getVariableByEval(e){let t=this.variableHandler.getFrameId(),r=await this.getVariable(t,0,e);if(r.length===0)return null;if(r.length===1)return r[0].value;{let i=this.variableHandler.getVarByName(e);return JSON.stringify(i.value)}}async getVariable(e,t,r){let i=await this.sendCommand(`property_get -d ${e} -c ${t} -n ${r}`);return this.variableHandler.parsePropertyget(i,t)}async setVariable(e){return this.variableHandler.obtainValue(e.value).then(async({type:t,value:r,isVariable:i})=>{let o=this.variableHandler.getFrameId(),s=this.variableHandler.getScopeByRef(e.variablesReference);if(i){let d=(await this.getVariable(o,s,r))[0];if(!d)throw new Error(`variable ${e.value} not found!`);r=d.value,r.match(/^"|"$/g)&&(t="string",r=r.replace(/^"|"$/g,""))}let a=this.variableHandler.getVarByRef(e.variablesReference)?.name,c=e.name;a&&(c=c.includes("[")&&c.includes("]")?`${a}${c}`:`${a}.${c}`);let u=await this.sendCommand(`property_set -d ${o} -c ${s} -n ${c} -t ${t}`,r);if(!parseInt(u.attr.success))throw new Error(`"${c}" cannot be written. Probably read-only.`);let l=t==="string"?`"${r}"`:r;return{name:e.name,value:l,type:t,variablesReference:0}})}async stack(e){let t=await this.sendCommand("stack_get");return this.stackHandler.handle(e,t)}async setBreakPonit(e){if(this.debugServer&&e.verified){let t=await this.sendCommand(`breakpoint_set -t line -f ${e.source.path} -n ${e.line}`);e.id=t.attr.id}}buildBreakPoint(e,t){return this.clearBreakpoints(e),this.breakPointHandler.buildBreakPoint(e,t,r=>{this.setBreakPonit(r)})}clearBreakpoints(e){let t;if(this.debugServer&&(t=this.breakPointHandler.get(e)))for(let r of t)this.sendCommand(`breakpoint_remove -d ${r.id}`)}processRunResponse(e){switch(e.attr.status){case"break":this.emit("break",e.attr.command);break;case"stopping":case"stopped":this.end();break}}},yT=n=>{let e=n.split("\\");return e[e.length-1]};var Ws=class n extends ln.LoggingDebugSession{static threadId=1;dispatcher;constructor(){super(),this.setDebuggerLinesStartAt1(!1),this.setDebuggerColumnsStartAt1(!1),this.dispatcher=new Vs,this.dispatcher.on("break",e=>{this.sendEvent(new ln.StoppedEvent(e,n.threadId))}).on("breakpointValidated",e=>{this.sendEvent(new ln.BreakpointEvent("changed",{verified:e.verified,id:e.id}))}).on("output",e=>{this.sendEvent(new ln.OutputEvent(`${e}
`))}).on("end",()=>{this.sendEvent(new ln.TerminatedEvent)})}initializeRequest(e){e.body={...e.body,completionTriggerCharacters:[".","["],supportsConfigurationDoneRequest:!1,supportsEvaluateForHovers:!0,supportsStepBack:!1,supportsDataBreakpoints:!1,supportsCompletionsRequest:!0,supportsCancelRequest:!0,supportsRestartRequest:!0,supportsBreakpointLocationsRequest:!1,supportsSetVariable:!0},this.sendResponse(e),this.sendEvent(new ln.InitializedEvent)}restartRequest(e){this.dispatcher.restart(),this.sendResponse(e)}async launchRequest(e,t){this.dispatcher.start(t),this.sendResponse(e)}disconnectRequest(e){this.dispatcher.stop(),this.sendResponse(e)}async setBreakPointsRequest(e,t){e.body={breakpoints:this.dispatcher.buildBreakPoint(t.source.path,t.breakpoints)},this.sendResponse(e)}async stackTraceRequest(e,t){e.body={stackFrames:await this.dispatcher.stack(t)},this.sendResponse(e)}scopesRequest(e,t){e.body={scopes:this.dispatcher.scopes(t.frameId)},this.sendResponse(e)}async variablesRequest(e,t){e.body={variables:await this.dispatcher.listVariables(t)},this.sendResponse(e)}async setVariableRequest(e,t){try{e.body=await this.dispatcher.setVariable(t),this.sendResponse(e)}catch(r){this.sendErrorResponse(e,{id:t.variablesReference,format:r.message})}}pauseRequest(e){this.dispatcher.sendCommand("break"),this.sendResponse(e)}continueRequest(e){this.dispatcher.sendCommand("run"),this.sendResponse(e)}nextRequest(e){this.dispatcher.sendCommand("step_over"),this.sendResponse(e)}stepInRequest(e){this.dispatcher.sendCommand("step_into"),this.sendResponse(e)}stepOutRequest(e){this.dispatcher.sendCommand("step_out"),this.sendResponse(e)}threadsRequest(e){e.body={threads:[new ln.Thread(n.threadId,"main thread")]},this.sendResponse(e)}async completionsRequest(e){e.body={targets:[...await this.dispatcher.listVariables({variablesReference:1e3}),...await this.dispatcher.listVariables({variablesReference:1001})].map(t=>({type:"variable",label:t.name,sortText:t.name}))},this.sendResponse(e)}async evaluateRequest(e,t){let r=t.expression.split("="),i;r.length===1?i=await this.dispatcher.getVariableByEval(t.expression):(this.dispatcher.setVariable({name:r[0],value:r[1],variablesReference:1e3}),i=`execute: ${t.expression}`),e.body={result:i||"null",variablesReference:0},this.sendResponse(e)}};var Ot=Be(require("vscode"));var Nm=require("fs"),zs=class{async provideDefinition(e,t){let r=await this.tryGetFileLink(e,t);if(r)return r;let i=e.getText(e.getWordRangeAtPosition(t));if(new RegExp(i+"\\s*\\(.*?\\)").test(e.lineAt(t.line).text)){let a=await it.getMethodByName(e,i);if(a)return new Ot.Location(Ot.Uri.parse(a.uriString),new Ot.Position(a.line,a.character))}let o=await it.getLabelByName(e,i);if(o){let a=o.document;return new Ot.Location(a.uri,new Ot.Position(o.line,o.character))}let s=await it.buildScript(e,{usingCache:!0});for(let a of s.methods)if(t.line>=a.line&&t.line<=a.endLine){for(let c of a.variables)if(c.name===i)return new Ot.Location(e.uri,new Ot.Position(c.line,c.character));for(let c of a.params)if(c===i)return new Ot.Location(e.uri,new Ot.Position(a.line,a.character+a.origin.indexOf(c)))}for(let a of s.variables)if(a.name===i)return new Ot.Location(e.uri,new Ot.Position(a.line,a.character));return null}async tryGetFileLink(e,t,r){let{text:i}=e.lineAt(t.line),o=i.match(/(?<=#include).+?\.(ahk|ext)\b/i);if(!o)return;let s=r||e.uri.path.substr(0,e.uri.path.lastIndexOf("/")),a=Ot.Uri.file(o[0].trim().replace(/(%A_ScriptDir%|%A_WorkingDir%)/,s).replace(/(%A_LineFile%)/,e.uri.path));return(0,Nm.existsSync)(a.fsPath)?new Ot.Location(a,new Ot.Position(0,0)):r?this.tryGetFileLink(e,t,Ot.workspace.workspaceFolders?.[0].uri.fsPath):void 0}};var Ks=Be(require("vscode")),Lm=()=>Ks.window.onDidChangeActiveTextEditor(n=>{if(n&&rs(n.document.languageId)&&n.document.getText()===""){let e=Dn()?"v1.file.templateSnippetName":"v2.file.templateSnippetName",t=Qe.getConfig(e);if(t==="")return;Ks.commands.executeCommand("editor.action.insertSnippet",{name:t})}});var Ys=Be(require("vscode"));var Xs=/(?<=^|\s+);.*/;var po=require("util"),Am=n=>new Array(n.lineCount).fill(0).map((e,t)=>n.lineAt(t).text).join(`
`);function Fm(n,e){return e.insertSpaces?" ".repeat(n*e.tabSize):"	".repeat(n)}function Mm(n,e,t){return t||e?.trim()?n+e:e}function Pi(n,e,t,r,i){let o=Fm(r,i),s=Mm(o,t,i.preserveIndent);return n!==e-1&&(s+=`
`),s}function $u(n){if(!n)return"";let e=["autotrim","blockinput","click","clipwait","control","controlclick","controlfocus","controlget","controlgetfocus","controlgetpos","controlgettext","controlmove","controlsend","controlsendraw","controlsettext","coordmode","critical","detecthiddentext","detecthiddenwindows","drive","driveget","drivespacefree","edit","envadd","envdiv","envget","envmult","envset","envsub","envupdate","exit","exitapp","fileappend","filecopy","filecopydir","filecreatedir","filecreateshortcut","filedelete","fileencoding","filegetattrib","filegetshortcut","filegetsize","filegettime","filegetversion","fileinstall","filemove","filemovedir","fileread","filereadline","filerecycle","filerecycleempty","fileremovedir","fileselectfile","fileselectfolder","filesetattrib","filesettime","formattime","getkeystate","groupactivate","groupadd","groupclose","groupdeactivate","gui","guicontrol","guicontrolget","hotkey","imagesearch","inidelete","iniread","iniwrite","input","inputbox","keyhistory","keywait","listhotkeys","listlines","listvars","menu","mouseclick","mouseclickdrag","mousegetpos","mousemove","msgbox","onexit","outputdebug","pause","pixelgetcolor","pixelsearch","postmessage","process","progress","random","regdelete","regread","regwrite","reload","run","runas","runwait","send","sendevent","sendinput","sendlevel","sendmessage","sendmode","sendplay","sendraw","setbatchlines","setcapslockstate","setcontroldelay","setdefaultmousespeed","setenv","setformat","setkeydelay","setmousedelay","setnumlockstate","setregview","setscrolllockstate","setstorecapslockmode","settimer","settitlematchmode","setwindelay","setworkingdir","shutdown","sleep","sort","soundbeep","soundget","soundgetwavevolume","soundplay","soundset","soundsetwavevolume","splashimage","splashtextoff","splashtexton","splitpath","statusbargettext","statusbarwait","stringcasesense","stringgetpos","stringleft","stringlen","stringlower","stringmid","stringreplace","stringright","stringsplit","stringtrimleft","stringtrimright","stringupper","suspend","sysget","thread","tooltip","transform","traytip","urldownloadtofile","winactivate","winactivatebottom","winclose","winget","wingetactivestats","wingetactivetitle","wingetclass","wingetpos","wingettext","wingettitle","winhide","winkill","winmaximize","winmenuselectitem","winminimize","winminimizeall","winminimizeallundo","winmove","winrestore","winset","winsettitle","winshow","winwait","winwaitactive","winwaitclose","winwaitnotactive"],t=n;for(let i of e){let o="(^\\s*"+i+"\\b(?!\\()).*",s=new RegExp(o,"i");if(n.search(s)!==-1){t=n.replace(s,"$1");break}}let r=t.replace(/".*?"/g,'""');return r=$m(r,/{[^{}]*}/g,""),r=r.replace(/\s+/g," ").replace(Xs,"").trim(),r}function Gs(n){let e=["ifexist","ifinstring","ifmsgbox","ifnotexist","ifnotinstring","ifwinactive","ifwinexist","ifwinnotactive","ifwinnotexist","if","else","loop","for","while","catch"];for(let t of e)if(n.match("^}?\\s*"+t+"\\b(?!:)"))return!0;return!1}function vT(n,e){if(e===-1)return n;let t=new RegExp(`\\n(\\s*?\\n){${e},}`,"g");return n.replace(t,`
`+"$1".repeat(e)).replace(/^\s*\n+/,"")}function bT(n,e){return e?n.replace(/ {2,}/g," "):n}function Hu(n,e){let t=new RegExp(e,"g");return $m(n,/{[^{}]*}/g,"").match(t)?.length??0}function wT(n){let e=Math.max(...n.map(r=>jm(r).indexOf("=")));return n.map(r=>CT(r,e))}function jm(n){return n.replace(/(?<!`);.+/,"").replace(/(?<=\S) {2,}(?=\S)/g," ").replace(/\s?(?=:?=)/," ").replace(/(?<=:?=)\s?/," ")}function CT(n,e){let t=/;.+/.exec(n)?.[0]??"";n=jm(n);let r=n.indexOf("=");return n.replace(/\s(?=:?=)/," ".repeat(e-r+1)).concat(t).trimEnd()}function $m(n,e,t){for(;;){let r=n.length;if(n=n.replace(e,t),r===n.length)break}return n}var Nr=class{depth;constructor(e){this.depth=e??[-1]}enterBlockOfCode(e){for(let t=e;t>0;t--)this.depth.push(-1);return this.depth}exitBlockOfCode(e){for(let t=e;t>0;t--)this.depth.splice(this.depth.lastIndexOf(-1));return this.restoreEmptyDepth(),this.depth}last(){return this.depth[this.depth.length-1]}push(e){return this.depth.push(e)}pop(){let e=this.depth.pop();return this.restoreEmptyDepth(),e}restoreDepth(){let e=this.depth.lastIndexOf(-1)+1,t=this.depth[e];return this.depth.splice(e),t}restoreEmptyDepth(){this.depth.length===0&&(this.depth=[-1])}};function DT(n,e){let t=0,r=0,i=n.split(`
`);for(let o=i.length-1;o>=0;o--){let s=i[o];if($u(s)===""){let c=Fm(r,e);i[o]=Mm(c,s.trim(),e.preserveIndent)}else{if(t=ST(s,e),s.match(/^\s*}/)){let c=Hu($u(s),"}");t+=c}r=t}}return i.join(`
`)}function ST(n,e){let r=n.match(/^\s+/)?.[0].length??0;return e.insertSpaces?r/e.tabSize:r}var Hm=(n,e)=>{let t="",r=0,i=0,o=0,s=!1,a=!1,c=!0,u=new Nr,l=new Nr,g=!1,d=[],p=!1,h=!1,T=!1,I=!1,O=!1,E=-1,C=!1,y="",m=!1,P=0,A=0,S=0,U=!1,k=new Nr,H=new Nr,X=e.indentCodeAfterLabel,Z=e.indentCodeAfterIfDirective,le=e.trimExtraSpaces,he=/;\s*@AHK\+\+AlignAssignmentOn/i,ne=/;\s*@AHK\+\+AlignAssignmentOff/i,qe=/;\s*@AHK\+\+FormatBlockCommentOn/i,me=/;\s*@AHK\+\+FormatBlockCommentOff/i,Ee=/^(((and|or|not)\b)|[\^!~?:&<>=.,|]|\+(?!\+)|-(?!-)|\/(?!\*)|\*(?!\/))/,Xe=/^[^\s\t,`]+(?<!:):$/,vt=/^.+::$/,bt=/^.+::/,on="#(ifwinactive|ifwinnotactive|ifwinexist|ifwinnotexist|if)",Wt=/^(case\s*.+?:|default:)\s*.*/,wt=n.split(`
`);return wt.forEach((_,D)=>{let V=$u(_).toLowerCase(),j=Xs.exec(_)?.[0]??"",ye=_.replace(Xs,"");ye=bT(ye,le).concat(j).trim();let Ne=V==="";c=!0;let ve=Hu(V,"{"),Ue=Hu(V,"}");if(Ne&&(g&&j.match(ne)&&(g=!1,d=wT(d),d.forEach((Le,et)=>{t+=Pi(D-d.length+et+1,wt.length,Le,r,e)}),d=[]),m&&j.match(me)&&(m=!1)),g){if(d.push(ye),D!==wt.length-1)return;d.forEach((Le,et)=>{t+=Pi(D-d.length+et+1,wt.length,Le,r,e)}),d=[]}if(!C&&_.match(/^\s*\/\*/)&&(C=!0,y=_.match(/(^\s*)\/\*/)?.[1],m&&(P=r,A=o,S=i,U=s,k=u,H=l,o=r,i=r,s=!1,u=new Nr,l=new Nr)),C){if(!m){let Le="";_.startsWith(y)?Le=_.substring(y.length):Le=_,t+=Pi(D,wt.length,Le.trimEnd(),r,e)}if(_.match(/^\s*\*\//)&&(C=!1,m&&(r=P,o=A,i=S,s=U,u=k,l=H)),!m)return}if(Ne&&!j.match(he)&&!j.match(ne)&&!j.match(qe)&&!j.match(me)){t+=Pi(D,wt.length,ye,0,e);return}if(V.match(/^\((?!::)(?!.*\bltrim\b)/)&&(T=!0),T){t+=_.trimEnd()+`
`,V.match(/^\)/)&&(T=!1);return}if(h&&V.match(/^\)/)&&(h=!1,r--),h){t+=Pi(D,wt.length,_.trim(),r,e);return}if(V.match(Ee)&&!V.match(/::/)&&(p=!0,I&&(r--,E=i),s&&(O=!0,s=!1,a=!1,r--),a&&(s=!0,r++),r++),O&&!p&&(O=!1,s=!0,r++),Ue&&(l.last()>-1&&(r=l.last()),u.exitBlockOfCode(Ue),l.exitBlockOfCode(Ue),p||(r-=Ue)),ve&&(s||O)&&!Gs(V)&&(O?O=!1:V.match(/^{/)&&(s=!1,r-=ve),r===l.last()&&l.pop()),(u.last()>-1||l.last()>-1)&&!p&&!s&&(!C||m)){if(V.match(/^}? ?else\b(?!:)/))r=u.pop();else if(!V.match(/^{/)&&!V.match(/^}/)){let Le=u.restoreDepth(),et=l.restoreDepth();Le!==void 0&&et!==void 0?r=Math.min(Le,et):r=Le??et}}V.match("^"+on+"\\b")&&(o>0?r-=o:r--),V.match(/^(return|exit|exitapp)\b/)&&o===r&&(o=0,r--),(V.match(Wt)||(V.match(Xe)||V.match(vt)||V.match(bt))&&X&&o===r)&&r--,r<0&&(r=0),P<0&&(P=0),i=r,t+=Pi(D,wt.length,ye,r,e),Ne&&(j.match(he)?g=!0:j.match(qe)&&(m=!0)),s&&(!C||m)?(s=!1,a=!0,Gs(V)||r--):a=!1,Gs(V)&&ve===0&&l.last()===-1&&l.push(r),V.match(/^(}? ?else )?if\b(?!:)/)&&u.push(r),ve?(r+=ve,c=!1,p?I=!1:I=!0,u.enterBlockOfCode(ve),l.enterBlockOfCode(ve)):I=!1,V.match("^"+on+"\\b.+")&&Z&&(r++,o=0),V.match(Wt)?r++:V.match(Xe)||V.match(vt)?X&&l.depth.length===1&&(r++,o=r):V.match(bt)&&(o=0),p&&(p=!1,Ue&&(r-=Ue,E===r&&(E=-1,r++)),r--),V.match(/^\((?!::)(?=.*\bltrim\b)/)&&(h=!0,r++),c&&Gs(V)&&(s=!0,r++),D===wt.length-1&&!((0,po.isDeepStrictEqual)(u.depth,[-1])||(0,po.isDeepStrictEqual)(u.depth,[-1,0]))&&!((0,po.isDeepStrictEqual)(l.depth,[-1])||(0,po.isDeepStrictEqual)(l.depth,[-1,0]))&&console.error(["Internal formatter data:","ifDepth:",u.depth,"focDepth:",l.depth].join(`
`))}),t=DT(t,e),t=vT(t,e.allowedNumberOfEmptyLines),t};function TT(n){let e=n.lineCount-1;return new Ys.Range(0,0,e,n.lineAt(e).text.length)}var Qs=class{provideDocumentFormattingEdits(e,t){let r=Am(e),i=Qe.getConfig("v1.formatter.allowedNumberOfEmptyLines"),o=Qe.getConfig("v1.formatter.indentCodeAfterLabel"),s=Qe.getConfig("v1.formatter.indentCodeAfterIfDirective"),a=Qe.getConfig("v1.formatter.preserveIndent"),c=Qe.getConfig("v1.formatter.trimExtraSpaces"),u=Hm(r,{...t,allowedNumberOfEmptyLines:i,indentCodeAfterLabel:o,indentCodeAfterIfDirective:s,preserveIndent:a,trimExtraSpaces:c});return[new Ys.TextEdit(TT(e),u)]}};var Ft=Be(require("vscode"));var Js=class{async provideDocumentSymbols(e){let t=[],r=await it.buildScript(e);for(let i of r.methods)t.push(new Ft.SymbolInformation(i.full,Ft.SymbolKind.Method,i.comment,new Ft.Location(Ft.Uri.parse(i.uriString),new Ft.Position(i.line,i.character))));for(let i of r.labels)t.push(new Ft.SymbolInformation(i.name,Ft.SymbolKind.Field,null,new Ft.Location(i.document.uri,new Ft.Position(i.line,i.character))));for(let i of r.blocks)t.push(new Ft.SymbolInformation(i.name,Ft.SymbolKind.Module,null,new Ft.Location(i.document.uri,new Ft.Position(i.line,i.character))));return t}};var Um=require("fs"),Bm=require("path"),yr=require("vscode");var Zs=class{snippetCache;constructor(e){this.initSnippetCache(e)}async provideHover(e,t){let r=this.buildContext(e,t);if(!r)return null;let i=this.tryGetSnippetHover(r);if(i)return i;let o=await it.getMethodByName(e,r.word);if(o){let s=new yr.MarkdownString("",!0).appendCodeblock(o.full);return o.comment&&s.appendText(o.comment),new yr.Hover(s)}return null}tryGetSnippetHover(e){let t=e.word.toLowerCase();e.charAfter==="("&&(t+="()");let r=this.snippetCache.get(t);if(!r)return;let i=new yr.MarkdownString("",!0).appendCodeblock(r.body,"ahk");return r.description&&i.appendText(r.description),new yr.Hover(i)}buildContext(e,t){let r=t.line,i=e.getWordRangeAtPosition(t);if(!i)return;let o=e.getText(i);i.start.character>0&&e.getText(new yr.Range(r,i.start.character-1,r,i.start.character))==="#"&&(o="#"+o);let s=e.getText(new yr.Range(r,i.end.character,r,i.end.character+1));return{word:o,charAfter:s}}initSnippetCache(e){let t=JSON.parse((0,Um.readFileSync)((0,Bm.join)(e.extensionPath,"language","snippetsV1.json"),"utf8"));this.snippetCache=new Map;for(let r in t){let i=t[r];typeof i.body=="string"&&(i.body=i.body?.replace(/\d{1}:/g,"")),this.snippetCache.set(r.toLowerCase(),i)}}};var ta=Be(require("vscode"));var ea=class{provideReferences(e,t){let r=e.getText(e.getWordRangeAtPosition(t)),i=[],o=it.getAllRefByName(r);for(let s of o)i.push(new ta.Location(s.document.uri,new ta.Position(s.line,s.character)));return i}};var Bn=Be(require("vscode"));var na=class{async provideRenameEdits(e,t,r){for(let a of Bn.workspace.textDocuments)it.buildScript(a);let i=e.getText(e.getWordRangeAtPosition(t)),o=it.getAllRefByName(i),s=new Bn.WorkspaceEdit;for(let a of o){if(a.document.uri.scheme!=="file")continue;let c=[];c.push(new Bn.TextEdit(new Bn.Range(new Bn.Position(a.line,a.character),new Bn.Position(a.line,a.character+i.length)),r)),console.debug(`url:${a.document.uri},line:${a.line},character:${a.character}`),s.set(a.document.uri,c)}return s}async prepareRename(e,t){let r=e.getWordRangeAtPosition(t),i=e.getText(r);if(await it.getMethodByName(e,i))return r;throw new Error("You cannot rename this element.")}};var Vm=Be(require("vscode"));var ra=class{async provideSignatureHelp(e,t){let r,i=e.lineAt(t.line).text,o=0;for(let c=t.character-1;c>0;c--){let u=i.charAt(c);if(u==="("){r=new Vm.Position(t.line,c);break}u===","&&o++}let s=e.getText(e.getWordRangeAtPosition(r)),a=await it.getMethodByName(e,s);return a?{activeSignature:0,signatures:[{label:a.origin,parameters:a.params.map(c=>({label:c}))}],activeParameter:o}:null}};var rr=Be(require("vscode"));var Wm=require("vscode"),_T=n=>{let e=new rr.CompletionItem(n.params.length===0?n.name:n.full,rr.CompletionItemKind.Method);return e.insertText=n.params.length?new Wm.SnippetString(`${n.name}($1)`):`${n.name}()`,e.detail=n.comment,e},RT=(n,e,t)=>n.uriString===e&&n.line<=t&&t<=n.endLine,PT=n=>n.params.concat(n.variables).map(e=>new rr.CompletionItem(e,rr.CompletionItemKind.Variable)),ET=(n,e,t)=>{let r=[_T(n)];return RT(n,e,t)&&r.push(...PT(n)),r},xT=n=>new rr.CompletionItem(n,rr.CompletionItemKind.Variable),IT=(n,e,t,r)=>n.map(i=>ET(i,e,t)).reduce((i,o)=>i.concat(o),[]).concat(r.map(xT)),ia=class{async provideCompletionItems(e,t){if(e.getText(new rr.Range(t.translate(0,-1),t))===".")return[];let i=await it.getAllMethod(),o=await it.buildScript(e,{usingCache:!0});return IT(i.map(s=>({...s,variables:s.variables.map(a=>a.name)})),e.uri.toString(),t.line,o.variables.map(s=>s.name))}};var Uu=require("fs"),oa=Be(require("vscode")),Bu=Be(require("child_process"));var kT=(n,e)=>{let t=n.getText(e).trim();if(t)return t;let r=n.getText(n.getWordRangeAtPosition(e.active));return r.includes(`
`)?"":r},OT=(n,e)=>`
SetWinDelay 10
SetKeyDelay 0
searchText := "${n.replaceAll('"','""')}" ; Escape double quotes 
searchText := StrReplace(searchText, "#", "{#}")
IfWinNotExist, AutoHotkey Help
{
    Run ${e}
    WinWait AutoHotkey Help
}
WinActivate
WinWaitActive
Send, !s
Sleep 200
Send {home}
Sleep 10
Send +{end}%searchText%{enter}
ExitApp
`,qT=(n,e)=>`
SetWinDelay(10)
SetKeyDelay(0)
searchText := "${n}"
if (not WinExist("AutoHotkey v2 Help", ""))
{
    Run "${e}"
    WinWait "AutoHotkey v2 Help"
}
WinActivate
WinWaitActive
StrReplace(searchText, "#", "{#}")
Send "!s"
Sleep 200
Send "{home}"
Sleep 10
Send "+{end}" searchText "{enter}"
ExitApp()
`;async function zm(){let n=oa.window.activeTextEditor;if(!n)return;let e=kT(n.document,n.selection),t=Dn()?Qe.getConfig("v1.file.helpPath"):Qe.getConfig("v2.file.helpPath"),r=Qe.getConfig(Dn()?"v1.file.interpreterPath":"v2.file.interpreterPath"),i=Dn()?OT:qT;if(!(0,Uu.existsSync)(t)){oa.window.showErrorMessage(`Help path "${t}" does not exist`);return}if(!(0,Uu.existsSync)(r)){oa.window.showErrorMessage(`Interpreter path "${r}" does not exist`);return}try{Bu.execSync(`"${r}" /ErrorStdOut *`,{input:i(e,t)})}catch{Bu.execSync(`"${r}" /ErrorStdOut *`,{input:i("",t)})}}var Rn=Be(require("vscode"));var NT=n=>{let t=n.getText(new Rn.Range(0,0,50,0)),r=/^[ \t]*#Requires[ \t]+AutoHotkey[ \t]v?(1|2)\b/im,i=t.match(r);return i?Number.parseInt(i[1]):void 0},LT=n=>e=>{if(!e||!rs(e.languageId)||n.has(e.uri))return;n.add(e.uri);let t=NT(e),r=["ahk","ahk2"][t-1],i=e.languageId;r&&r!==i&&AT(e,r)},AT=(n,e)=>{Rn.languages.setTextDocumentLanguage(n,e).then(()=>{let t=Dn()?"v1":"v2";Rn.window.showInformationMessage(`Found '#Requires ${t}'. Switched to AutoHotkey ${t}.`)},t=>{Rn.window.showErrorMessage(`Failed to switch to ${e}:
${t.message}`)})},Km=n=>{let e=LT(new Set);Rn.window.onDidChangeActiveTextEditor(t=>e(t?.document),null,n.subscriptions),Rn.window.tabGroups.all.forEach(t=>t.tabs.filter(r=>r.input instanceof Rn.TabInputText).forEach(async r=>{let i=await Rn.workspace.openTextDocument(r.input.uri);e(i)}))};var Y=require("vscode"),Zo=Be(lS()),Qn=require("path"),wi=require("child_process"),Vt=require("fs");var Fx=(n={})=>({arrayStyle:"none",braceStyle:"One True Brace",breakChainedMethods:!1,ignoreComment:!1,indentString:"    ",indentBetweenHotIfDirectives:!1,keywordStartWithUppercase:!1,maxPreserveNewlines:2,objectStyle:"none",preserveNewlines:!0,spaceBeforeConditional:!0,spaceAfterDoubleColon:!0,spaceInEmptyParen:!1,spaceInOther:!0,spaceInParen:!1,switchCaseAlignment:!1,symbolWithSameCase:!1,whitespaceBeforeInlineComment:"",wrapLineLength:120,...n}),Mx=(n={})=>({exclude:[],v2:{general:{actionWhenV1Detected:"SwitchToV1",commentTagRegex:"^;;\\s*(.*)",completeFunctionCalls:!1,librarySuggestions:"Disabled",symbolFoldingFromOpenBrace:!1,syntaxes:""},completionCommitCharacters:{Class:".(",Function:"("},diagnostics:{classNonDynamicMemberCheck:!0,paramsCheck:!0},file:{interpreterPath:"C:\\Program Files\\AutoHotkey\\v2\\AutoHotkey.exe",maxScanDepth:2},formatter:Fx(),warn:{varUnset:!0,localSameAsGlobal:!1,callWithoutParentheses:"Off"},workingDirectories:[]},...n}),sq=Mx(),Yo="AHK++";var dS="AHK++",fS="AHK++",vp="AHK++ (v2)",Kc="ahk:isRunning",yi="ahk++.",hS=`${yi}executeCommand`,pS=`${yi}getActiveTextEditorUriAndPosition`,gS=`${yi}insertSnippet`,mS=`${yi}setTextDocumentLanguage`,yS=`${yi}updateStatusBar`,cq=`${yi}getWorkspaceFiles`,uq=`${yi}getWorkspaceFileContent`,Jo="ahk++.lsp.",vS=`${Jo}exportSymbols`,bS=`${Jo}getAHKversion`,wS=`${Jo}getContent`,CS=`${Jo}getVersionInfo`,DS=`${Jo}setV2Interpreter`,bn="ahk++.",lq=`${bn}diagnostic.full`,dq=`${bn}addDocComment`,fq=`${bn}setAScriptDir`,SS=`${bn}run`,TS=`${bn}runSelection`,_S=`${bn}stop`,bp=`${bn}setV2Interpreter`,RS=`${bn}debugConfigs`,PS=`${bn}debugParams`,ES=`${bn}debugAttach`,wp=`${bn}selectSyntaxes`,xS=`${bn}updateVersionInfo`,IS=`${bn}exportSymbols`,kS=`${bn}switchAhkVersion`;var OS=Be(require("vscode"));function vi(){return OS.workspace.getConfiguration(Yo)}function Yr(n,e){let t=vi().get(n);return t===void 0?e:t}var Rr,cr,rn,lr=new Map,ur=Yr("v2.file.interpreterPath",""),Dp=!1,MS=[new TextDecoder("utf8",{fatal:!0}),new TextDecoder("utf-16le",{fatal:!0})],jx=process.platform==="win32",Sp=[],bi={},qS=[],Tp={"ahk2.browse":"Browse your file system to find AutoHotkey2 interpreter","ahk2.compiledfailed":"Compiled failed!","ahk2.compiledsuccessfully":"Compiled successfully!","ahk2.current":"Current: {0}","ahk2.debugextnotexist":"The debug extension was not found, please install the debug extension first!","ahk2.diagnose.all":"Diagnostic All","ahk2.enterahkpath":"Enter path to AutoHotkey2 interpreter","ahk2.entercmd":"Enter the command line parameters that need to be passed","ahk2.enterorfind":"Enter path or find an existing interpreter","ahk2.enterversion":"Enter version","ahk2.filenotexist":"'{0}' does not exist","ahk2.find":"Find...","ahk2.savebeforecompilation":"Please save the script before compilation","ahk2.select":"Select","ahk2.set.interpreter":"Select AutoHotkey2 Interpreter","ahk2.unknownversion":"Unknown version"};function jS(n){let e=n.extension.id,t=n.asAbsolutePath(`${e.startsWith("mark-wiemer")?"ahk2/":""}server/${process.env.DEBUG?"out":"dist"}/server.js`),r={run:{module:t,transport:Zo.TransportKind.ipc},debug:{module:t,transport:{kind:Zo.TransportKind.socket,port:1219},options:{execArgv:["--nolazy","--inspect=6009"]}}},i={[hS]:l=>Y.commands.executeCommand(l.shift(),...l),[pS]:()=>{let l=Y.window.activeTextEditor;if(!l)return;let g=l.document.uri.toString(),d=l.selection.end;return{uri:g,position:d}},[gS]:async l=>{let g=Y.window.activeTextEditor;if(g)if(l[1]){let{start:d,end:p}=l[1];await g.insertSnippet(new Y.SnippetString(l[0]),new Y.Range(d.line,d.character,p.line,p.character))}else g.insertSnippet(new Y.SnippetString(l[0]))},[mS]:async l=>{let g=l[1]||"ahk";if(!qS.includes(g)){Y.window.showErrorMessage(`Unknown language id: ${g}`);return}let d=l[0],p=Y.workspace.textDocuments.find(h=>h.uri.toString()===d);p&&Y.languages.setTextDocumentLanguage(p,g)},[yS]:async l=>{ur=l[0],AS()}},o=Y.workspace.createFileSystemWatcher("**/*.{ahk}"),s={documentSelector:[{language:"ahk2"}],markdown:{isTrusted:!0,supportHtml:!0},outputChannel:cr=Y.window.createOutputChannel(vp,"~ahk2-output"),outputChannelName:vp,synchronize:{fileEvents:o},initializationOptions:{commands:Object.keys(i),GlobalStorage:n.globalStorageUri.fsPath,...vi()}};Yr("v2.formatter.one_true_brace",void 0)!==void 0&&Y.window.showWarningMessage(`Configuration "${Yo}.FormatOptions.one_true_brace" is no longer supported.
Please use "${Yo}.v2.formatter.braceStyle"`),Rr=new Zo.LanguageClient(dS,fS,r,s),Vx(n.extensionPath+"/package.nls"),MS.push(new TextDecoder(Y.env.language.startsWith("zh-")?"gbk":"windows-1252"));let a;Rr.start().then(()=>{Object.entries(i).forEach(l=>Rr.onRequest(...l)),AS(),Y.window.activeTextEditor?.document.languageId==="ahk2"&&rn.show(),Dp=!0,a(Rr),a=void 0});let c=[];function u(){bi={};for(let l of Y.extensions.all){let g;l.extensionKind===1&&/ahk|autohotkey/i.test(l.id)&&(g=l.packageJSON?.contributes?.debuggers?.[0]?.type)&&(bi[g]=l.id)}Sp=Object.values(bi),Y.languages.getLanguages().then(l=>qS=l);for(let l in bi)c.includes(l)||(c.push(l),n.subscriptions.push(Y.debug.registerDebugConfigurationProvider(l,{async resolveDebugConfiguration(g,d){if(d.__ahk2debug||Y.window.activeTextEditor?.document.languageId!=="ahk"){let h;if(d.__ahk2debug)d.runtime==="autohotkey"&&(h=d.runtime_v2);else{let O=function(E,C){if(E===C)return!0;if(E.__proto__!==C.__proto__||typeof E!="object")return!1;if(E instanceof Array)return E.every((m,P)=>O(m,C[P]));let y=Object.entries(E);return y.length===Object.keys(C).length&&y.every(([m,P])=>O(P,C[m]))};var p=O;d.request||="launch";let T=$S()?.filter(E=>Object.entries(E).every(([C,y])=>O(y,d[C])))?.sort((E,C)=>Object.keys(E).length-Object.keys(C).length).pop(),I=Yr("DebugConfiguration",{});delete I.request,delete I.type,Object.assign(d,I,T),T?.type==="autohotkey"&&(h=T.runtime_v2)}(d.runtime||=h)||(d.runtime=es(ur,g?.uri.fsPath),rn.text.endsWith("[UIAccess]")&&(d.useUIAVersion=!0)),d.request==="launch"&&(d.program||="${file}"),d.type==="ahkdbg"&&(d.AhkExecutable||=d.runtime)}return d}})))}u(),Y.commands.executeCommand("setContext",Kc,!1),rn=Y.window.createStatusBarItem(Y.StatusBarAlignment.Left,75),rn.command=bp;for(let l of[{text:"$(folder)syntaxes",command:{title:Jt("ahk2.select"),command:wp}}])n.subscriptions.push(Object.assign(Y.languages.createLanguageStatusItem(l.command.command,{language:"ahk2"}),l));return n.subscriptions.push(rn,cr,o,Y.extensions.onDidChange(u),Y.commands.registerTextEditorCommand(SS,l=>LS(l)),Y.commands.registerTextEditorCommand(TS,l=>LS(l,!0)),Y.commands.registerCommand(_S,Hx),Y.commands.registerCommand(bp,HS),Y.commands.registerCommand(RS,()=>Cp("c")),Y.commands.registerCommand(PS,()=>Cp("p")),Y.commands.registerCommand(ES,()=>Cp("a")),Y.commands.registerCommand(wp,Ux),Y.commands.registerTextEditorCommand(xS,async l=>{if(!Dp)return;let g=await Rr.sendRequest(CS,l.document.uri.toString());if(!g?.length)await l.insertSnippet(new Y.SnippetString(["/************************************************************************"," * @description ${1:}"," * @author ${2:}"," * @date ${3:$CURRENT_YEAR/$CURRENT_MONTH/$CURRENT_DATE}"," * @version ${4:0.0.0}"," ***********************************************************************/","",""].join(`
`)),new Y.Range(0,0,0,0));else{let d=new Date,p=[],h;for(let O of g)O.single?p.push(O.content.replace(/(?<=^;\s*@ahk2exe-setversion\s+)(\S+|(?=[\r\n]))/i,E=>(h||=E,"\0"))):p.push(O.content.replace(/(?<=^\s*[;*]?\s*@date[:\s]\s*)(\S+|(?=[\r\n]))/im,E=>[d.getFullYear(),d.getMonth()+1,d.getDate()].map(C=>C.toString().padStart(2,"0")).join(E.includes(".")?".":"/")).replace(/(?<=^\s*[;*]?\s*@version[:\s]\s*)(\S+|(?=[\r\n]))/im,E=>(h||=E,"\0")));if(h!==void 0){if(h=await Y.window.showInputBox({value:h,prompt:Jt("ahk2.enterversion")}),!h)return;p=p.map(O=>O.replace("\0",h))}let T=new Y.WorkspaceEdit,I=l.document.uri;g.forEach(O=>O.content!==(h=p.shift())&&T.replace(I,O.range,h)),T.size&&Y.workspace.applyEdit(T)}}),Y.commands.registerTextEditorCommand(kS,l=>{let g=l.document;Y.languages.setTextDocumentLanguage(g,g.languageId==="ahk2"?"ahk":"ahk2")}),Y.commands.registerTextEditorCommand(IS,l=>{let g=l.document;g.languageId==="ahk2"&&Rr.sendRequest(vS,g.uri.toString()).then(d=>Y.workspace.openTextDocument({language:"json",content:JSON.stringify(d,void 0,2)}).then(p=>Y.window.showTextDocument(p,2)))}),Y.workspace.registerTextDocumentContentProvider("ahkres",{provideTextDocumentContent(l,g){if(!g.isCancellationRequested)return Rr.sendRequest(wS,l.toString()).then(d=>(setTimeout(()=>{let p=Y.workspace.textDocuments.find(h=>h.uri.scheme==="ahkres"&&h.uri.path===l.path);p&&p.languageId!=="ahk2"&&Y.languages.setTextDocumentLanguage(p,"ahk2")},100),d))}}),Y.workspace.onDidCloseTextDocument(l=>Rr.sendNotification("onDidCloseTextDocument",l.isClosed?{uri:"",id:""}:{uri:l.uri.toString(),id:l.languageId})),Y.window.onDidChangeActiveTextEditor(l=>l?.document.languageId==="ahk2"?rn.show():rn.hide())),new Promise(l=>a=l)}function NS(n){for(let e of MS)try{return e.decode(n)}catch{}return n.toString()}var $x=()=>Y.window.activeTextEditor?.document.languageId==="ahk";async function LS(n,e=!1){let t=$x()?Yr("v1.file.interpreterPath",""):Yr("v2.file.interpreterPath",""),r=es(t,Y.workspace.getWorkspaceFolder(n.document.uri)?.uri.fsPath);if(!r){let l=t||"AutoHotkey.exe";Y.window.showErrorMessage(Jt("ahk2.filenotexist",l),Jt("ahk2.set.interpreter")).then(g=>g?HS():void 0);return}let i="",o="*",s=`"${r}" /ErrorStdOut=utf-8 `,a;Yr("general.showOutput","always")==="always"&&cr.show(!0),lr.size||cr.clear(),e?i=n.selections.map(n.document.getText).join(`
`):(n.document.isUntitled||!n.document.uri.toString().startsWith("file:///"))&&(i=n.document.getText()),r.replace(/^(.+[\\/])AutoHotkeyUX\.exe$/i,(...l)=>{let g=l[1]+"launcher.ahk";return ao(g)&&(s=`"${r}" "${g}" `),""});let u;if(i!=="")rn.text.endsWith("[UIAccess]")?(o=(0,Qn.resolve)(__dirname,"temp.ahk"),(0,Vt.writeFileSync)(o,i),s+=`"${o}"`,a=new Date,u=(0,wi.spawn)(s,{cwd:`${(0,Qn.resolve)(n.document.fileName,"..")}`,shell:!0}),(0,Vt.unlinkSync)(o)):(s+=o,a=new Date,u=(0,wi.spawn)(s,{cwd:`${(0,Qn.resolve)(n.document.fileName,"..")}`,shell:!0}),u.stdin?.write(i),u.stdin?.end());else{if(n.document.isUntitled)return;await Y.commands.executeCommand("workbench.action.files.save"),o=n.document.fileName,s+=`"${o}"`,a=new Date,u=(0,wi.spawn)(s,{cwd:(0,Qn.resolve)(o,".."),shell:!0})}u.pid?(cr.appendLine(`[Running] [pid:${u.pid}] ${s}`),lr.set(u.pid,u),u.path=o,Y.commands.executeCommand("setContext",Kc,!0),u.stderr?.on("data",l=>{cr.appendLine(NS(l))}),u.on("error",l=>{cr.appendLine(JSON.stringify(l)),lr.delete(u.pid)}),u.stdout?.on("data",l=>{cr.appendLine(NS(l))}),u.on("exit",l=>{cr.appendLine(`[Done] [pid:${u.pid}] exited with code=${l} in ${(new Date().getTime()-a.getTime())/1e3} seconds`),lr.delete(u.pid),lr.size||Y.commands.executeCommand("setContext",Kc,!1)})):cr.appendLine(`[Fail] ${s}`)}async function Hx(){if(!lr.size)return;if(lr.size===1)lr.forEach(e=>n(e.pid));else{let e=Y.window.createQuickPick(),t=[];e.title="Running Scripts",lr.forEach(r=>t.push({label:`pid: ${r.pid}`,detail:r.path})),e.items=t,e.canSelectMany=!0,e.onDidAccept(()=>{e.selectedItems.forEach(r=>n(parseInt(r.label.slice(5)))),e.dispose()}),e.show()}function n(e){(0,wi.execSync)("taskkill /pid "+e+" /T /F"),lr.delete(e)}}function $S(){let n=Y.workspace.getConfiguration("launch").inspect("configurations");return n&&[...n.workspaceFolderValue??[],...n.workspaceValue??[],...n.globalValue??[]].filter(e=>e.type in bi)}async function Cp(n){let e,t=Y.window.activeTextEditor,r={...Yr("DebugConfiguration",{}),request:"launch",__ahk2debug:!0};if(!Sp.length){Y.window.showErrorMessage(Jt("ahk2.debugextnotexist")),e=await Y.window.showQuickPick(["zero-plusplus.vscode-autohotkey-debug","helsmy.autohotkey-debug","mark-wiemer.vscode-autohotkey-plus-plus","cweijan.vscode-autohotkey-plus"]),e&&Y.commands.executeCommand("workbench.extensions.installExtension",e);return}if("ap".includes(n)){if(!Sp.includes(e="zero-plusplus.vscode-autohotkey-debug")){Y.window.showErrorMessage("zero-plusplus.vscode-autohotkey-debug was not found!");return}if(r.type=Object.entries(bi).find(([,i])=>i===e)[0],n==="p"){let i=await Y.window.showInputBox({prompt:Jt("ahk2.entercmd")});if(i===void 0)return;if(i=i.trim()){let o=[];i.replace(/('|")(.*?(?<!\\))\1(?=(\s|$))|(\S+)/g,(...s)=>(o.push(s[4]||s[2]),"")),r.args=o}}else r.request="attach"}else if(n==="c"){let i=$S();if(i?.length){let o=Y.window.createQuickPick();o.items=i.map(a=>({label:a.name,data:a})),o.show();let s=await new Promise(a=>{o.onDidAccept(()=>a(o.selectedItems[0]?.data)),o.onDidHide(()=>a(void 0))});if(o.dispose(),!s)return;r=s}}else r.program="${file}";r.type||=Object.keys(bi).sort().pop(),r.name||=`AutoHotkey ${r.request==="attach"?"Attach":"Debug"}`,Y.debug.startDebugging(t&&Y.workspace.getWorkspaceFolder(t.document.uri),r)}async function HS(){let n=-1,{path:e,from:t}=Bx(),r=[],i=(e=es(ur||e,void 0,!1)).toLowerCase(),o=Y.window.createQuickPick(),s,a,c={label:""};r.push({alwaysShow:!0,label:Jt("ahk2.enterahkpath")+"...",detail:Jt("ahk2.enterorfind")}),s={label:Jt("ahk2.find"),detail:Jt("ahk2.browse")},e&&await u((0,Qn.resolve)(e,".."),i.includes("autohotkey")?20:5),i.includes("c:\\program files\\autohotkey\\")||await u("C:\\Program Files\\AutoHotkey\\",20),n=r.map(l=>l.detail?.toLowerCase()).indexOf((ur||e).toLowerCase()),n!==-1&&(a=r[n]),o.matchOnDetail=!0,o.items=r,o.title=Jt("ahk2.set.interpreter"),a&&(o.activeItems=[a]),o.placeholder=Jt("ahk2.current",ur),o.show(),o.onDidAccept(async()=>{if(o.selectedItems[0]===r[0]){o.title=void 0,o.activeItems=[],o.value="",o.items=[s],o.placeholder=Jt("ahk2.enterahkpath");return}else if(o.selectedItems[0]===s){o.ignoreFocusOut=!0;let l=await Y.window.showOpenDialog({defaultUri:e?Y.Uri.file(e):void 0,filters:{Executables:["exe"]},openLabel:Jt("ahk2.select")});l&&(c.detail=l[0].fsPath)}else(s=o.selectedItems[0])?(!a||s!==a)&&s.detail&&(c=s):o.value.match(/\.exe/i)&&ao(o.value)&&(c.detail=o.value);o.dispose(),c.detail&&(rn.tooltip=ur=c.detail,vi().update("v2.file.interpreterPath",ur,t),rn.text=c.label||=(await _p([ur]))[0],Dp&&Y.commands.executeCommand(DS,ur))}),o.onDidHide(()=>o.dispose());async function u(l,g){let d=[];if(ao(l)){for(let p of(0,Vt.readdirSync)(l)){let h=(0,Qn.resolve)(l,p);try{if(FS(h).isDirectory())for(p of(0,Vt.readdirSync)(h)){let T=(0,Qn.resolve)(h,p);p.toLowerCase().endsWith(".exe")&&!FS(T).isDirectory()&&d.push(T)}else p.toLowerCase().endsWith(".exe")&&d.push(h);if(d.length>=g)break}catch{}}(await _p(d)).forEach((p,h)=>{p.match(/\bautohotkey.*?2\./i)&&!p.endsWith("[UIAccess]")&&r.push({label:p,detail:d[h]})})}}}async function Ux(){let n=(await Y.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0}))?.[0].fsPath,e=vi().inspect("v2.general.syntaxes"),t="",r=Y.ConfigurationTarget.Global;e&&(t=(r=Y.ConfigurationTarget.WorkspaceFolder,e.workspaceFolderValue??(r=Y.ConfigurationTarget.Workspace,e.workspaceValue)??(r=Y.ConfigurationTarget.Global,e.globalValue)??"")),!(n===void 0||t.toLowerCase()===n.toLowerCase())&&vi().update("v2.general.syntaxes",n||void 0,r)}function _p(n){return Rr.sendRequest(bS,n.map(e=>es(e,void 0,!0)||e))}function Bx(){let n=vi().inspect("v2.file.interpreterPath"),e="";if(n){if(e=n.workspaceFolderValue)return{path:e,from:Y.ConfigurationTarget.WorkspaceFolder};if(e=n.workspaceValue)return{path:e,from:Y.ConfigurationTarget.Workspace};if(e=n.globalValue)return{path:e,from:Y.ConfigurationTarget.Global};e=n.defaultValue??""}return{path:e}}async function AS(){let n=Y.window.activeTextEditor?.document.uri,e=n?Y.workspace.getWorkspaceFolder(n)?.uri.fsPath:void 0,t=es(ur,e,!1);t.toLowerCase().endsWith(".exe")&&ao(t)?t!==rn.tooltip&&(rn.tooltip=t,rn.text=(await _p([t]))[0]||Jt("ahk2.unknownversion")):(rn.text=Jt("ahk2.set.interpreter"),rn.tooltip=void 0,t="")}function es(n,e,t=!0){if(!n)return"";let r=[];n.includes(":")||r.push((0,Qn.resolve)(e??"",n)),!/[\\/]/.test(n)&&jx&&r.push((0,wi.execSync)(`where ${n}`,{encoding:"utf-8"}).trim()),r.push(n);for(let i of r)if(i)try{return(0,Vt.lstatSync)(i).isSymbolicLink()&&t&&(i=(0,Qn.resolve)(i,"..",(0,Vt.readlinkSync)(i))),i}catch{}return""}function ao(n){try{(0,Vt.lstatSync)(n)}catch(e){if(e?.code==="ENOENT")return!1}return!0}function FS(n){let e=(0,Vt.lstatSync)(n);return e.isSymbolicLink()?(0,Vt.lstatSync)((0,Qn.resolve)(n,"..",(0,Vt.readlinkSync)(n))):e}function Vx(n){let e=`${n}.${Y.env.language}.json`;if(!(!ao(e)&&(!Y.env.language.startsWith("zh-")||!ao(e=`${n}.zh-cn.json`))))try{let t=JSON.parse((0,Vt.readFileSync)(e,{encoding:"utf8"}));for(let r of Object.keys(Tp))(e=t[r])&&(Tp[r]=e)}catch{}}function Jt(n,...e){let t=Tp[n];return e.length?Wx(t,...e):t}function Wx(n,...e){return n.replace(/\{(\d+)\}/g,(...t)=>{let r=parseInt(t[1]);return r<e.length?e[r]:" "})}function zx(n){(async()=>(Qe.updateStatusBarItems("Indexing AutoHotkey workspace..."),await it.buildByPath(Rt.workspace.workspaceFolders?.[0].uri.fsPath),Qe.updateStatusBarItems("Indexed AutoHotkey workspace :)"),Qe.hide()))();let e={language:"ahk"};Ti.init(n),Km(n),n.subscriptions.push(Rt.languages.registerHoverProvider(e,new Zs(n)),Rt.languages.registerDefinitionProvider(e,new zs),Rt.languages.registerRenameProvider(e,new na),Rt.languages.registerSignatureHelpProvider(e,new ra,"(",","),Rt.languages.registerDocumentSymbolProvider(e,new Js),Rt.languages.registerDocumentFormattingEditProvider(e,new Qs),Rt.languages.registerReferenceProvider(e,new ea),Rt.debug.registerDebugAdapterDescriptorFactory("ahk",new Rp),Lm(),Rt.commands.registerCommand("ahk++.compile",()=>pr.compile(!1)),Rt.commands.registerCommand("ahk++.compilerGui",()=>pr.compile(!0)),Rt.commands.registerCommand("ahk++.debug",()=>pr.startDebugger()),Rt.commands.registerCommand("ahk++.openHelp",zm)),n.subscriptions.push(Rt.languages.registerCompletionItemProvider(e,new ia,".")),Rt.workspace.onDidChangeConfiguration(async t=>{t.affectsConfiguration(`${Gc}.exclude`)&&(Ap(),await it.buildByPath(Rt.workspace.workspaceFolders?.[0].uri.fsPath))}),jS(n)}var Rp=class{createDebugAdapterDescriptor(){return new Rt.DebugAdapterInlineImplementation(new Ws)}};0&&(module.exports={activate});
/*! Bundled license information:

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/
